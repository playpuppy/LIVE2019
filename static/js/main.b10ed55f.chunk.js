(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{309:function(e,t,n){e.exports=n(427)},319:function(e,t,n){},320:function(e,t,n){},321:function(e,t,n){},409:function(e,t,n){},410:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){},427:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),o=n(96),i=n.n(o),a=n(109),c=(n(319),n(320),n(438)),l=n(436),u=n(305),p=n(441),d=n(443),h=n(442),f=(n(321),"/Users/shonanking/lab/project/LIVE2019/src/components/Header/Header.tsx");var m=e=>(Object(r.useEffect)(()=>{e.fetchCourses()},[]),s.a.createElement("div",{className:"Header",id:"puppy-header",__source:{fileName:f,lineNumber:18},__self:void 0},s.a.createElement(p.a,{bg:"white",variant:"light",expand:"lg",__source:{fileName:f,lineNumber:19},__self:void 0},s.a.createElement(p.a.Brand,{onClick:()=>e.setShow(!0),__source:{fileName:f,lineNumber:20},__self:void 0},s.a.createElement("img",{src:"./image/logo.png",width:"25",height:"25",className:"d-inline-block align-top",__source:{fileName:f,lineNumber:21},__self:void 0})," Puppy"),s.a.createElement(d.a,{className:"mr-auto",__source:{fileName:f,lineNumber:29},__self:void 0},s.a.createElement(h.a,{title:e.course.title,id:"nav-dropdown-courses",__source:{fileName:f,lineNumber:30},__self:void 0},Object.keys(e.courses).map(t=>{const n=e.courses[t];return s.a.createElement(h.a,{title:n.title,id:"nav-dropdown-pages-".concat(n.title),drop:"right",key:n.title,__source:{fileName:f,lineNumber:34},__self:void 0},n.list.map((e,n)=>s.a.createElement(h.a.Item,{href:"?course=".concat(t,"#").concat(n),key:n,__source:{fileName:f,lineNumber:42},__self:void 0},e.title)))})))))),y=n(141),b=n(81);const g={UndefinedParseTree:e=>"UndefinedParseTree: ".concat(e.subject),TypeError:e=>e.subject?"TypeError: type ".concat(e.subject," or compatible its type is required"):"TypeError: type ".concat(e.given," is not assignable to type ").concat(e.request),BinaryTypeError:e=>"BinaryTypeError: invalid operands to binary expression ".concat(e.subject," (").concat(e.request," and ").concat(e.given,")"),SyntaxError:e=>"SyntaxError",UnknownPackageName:e=>"UnknownPackageName: package not found",OnlyInFunction:e=>"OnlyInFunction: ".concat(e.subject," outside function"),OnlyInLoop:e=>"OnlyInLoop: ".concat(e.subject," outside loop"),UndefinedName:e=>"UndefinedName: use of undeclared identifier ".concat(e.subject),Immutable:e=>"Immutable: ".concat(e.subject," is immutable value"),InferredPackage:e=>"InferredPackage: ".concat(e.subject," imported automatically"),UnknownName:e=>"UnknownName: use of undeclared identifier ".concat(e.subject),NotFunction:e=>"NotFunction: ".concat(e.subject," is not a function"),TooManyArguments:e=>"TooManyArguments: arguments are too many",RequiredArguments:e=>"RequiredArguments: arguments are required",CompileError:e=>"CompileError: ".concat(e.subject)};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E;!function(e){e.SET_SIZE="SET_SIZE",e.SET_CODE="SET_CODE",e.SET_CODEEDITOR="SET_CODEEDITOR",e.SET_FONTSIZE="SET_FONTSIZE",e.SET_DECORATION="SET_DECORATION",e.SET_MARKER="SET_MARKER",e.SET_THEME="SETTHEME",e.SET_DIFFSTARTLINENUMBER="SET_DIFFSTARTLINENUMBER"}(E||(E={}));const w=e=>({type:E.SET_CODE,payload:{code:e}}),S=e=>({type:E.SET_DECORATION,payload:{decoration:e}}),N=e=>{switch(e){case"error":return b.MarkerSeverity.Error;case"info":return b.MarkerSeverity.Info;case"warning":return b.MarkerSeverity.Warning;case"hint":return b.MarkerSeverity.Hint}},x=e=>({type:E.SET_THEME,payload:{theme:e}}),T={width:500,height:500,code:"",codeEditor:null,theme:"vs",fontSize:24,decoration:[],markers:[],diffStartLineNumber:null};var O,k=(e=T,t)=>{switch(t.type){case E.SET_SIZE:return _({},e,{width:t.payload.width,height:t.payload.height});case E.SET_CODE:return _({},e,{code:t.payload.code});case E.SET_CODEEDITOR:return _({},e,{codeEditor:t.payload.codeEditor});case E.SET_FONTSIZE:return _({},e,{fontSize:t.payload.value});case E.SET_DECORATION:return _({},e,{decoration:t.payload.decoration});case E.SET_MARKER:return b.editor.setModelMarkers(e.codeEditor.getModel(),"puppy",t.payload.markers),_({},e,{codeEditor:e.codeEditor,markers:t.payload.markers});case E.SET_THEME:return _({},e,{theme:t.payload.theme});case E.SET_DIFFSTARTLINENUMBER:return _({},e,{diffStartLineNumber:t.payload.startLineNumber});default:return e}};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.SET_CONTENT="SET_CONTENT",e.SET_COURSES="SET_COURCES",e.SET_COURSE="SET_COURSE",e.SET_VISIBLE="SET_VISIBLE"}(O||(O={}));const C=e=>({type:O.SET_CONTENT,payload:{content:e}}),P=e=>({type:O.SET_COURSE,payload:{course:e}}),L=e=>({type:O.SET_VISIBLE,payload:{visible:e}}),j={content:"# Hello World \n\n Rendered by **marked**",courses:{},course:{title:"",list:[]},coursePath:"",page:0,visible:!0};var M,F=(e=j,t)=>{switch(t.type){case O.SET_CONTENT:return A({},e,{content:t.payload.content});case O.SET_COURSES:return A({},e,{courses:t.payload.courses});case O.SET_COURSE:return A({},e,{course:t.payload.course});case O.SET_VISIBLE:return A({},e,{visible:t.payload.visible});default:return e}};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.SET_SIZE="SET_SIZE",e.SET_PUPPY="SET_PUPPY",e.SET_ISLIVE="SET_ISLIVE"}(M||(M={}));const B={width:500,height:500,puppy:null,isLive:!0};var V,z=(e=B,t)=>{switch(t.type){case M.SET_SIZE:return e.puppy&&e.puppy.resize(t.payload.width,t.payload.height),D({},e,{width:t.payload.width,height:t.payload.height});case M.SET_PUPPY:return D({},e,{puppy:t.payload.puppy});case M.SET_ISLIVE:return D({},e,{isLive:t.payload.isLive});default:return e}};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.SET_VALUE="SET_VALUE",e.SET_SHOW="SET_SHOW",e.SET_PLACEHOLDER="SET_PLACEHOLDER"}(V||(V={}));const H=e=>({type:V.SET_SHOW,payload:{show:e}}),q={value:"",show:!1,placeholder:""};var K=(e=q,t)=>{switch(t.type){case V.SET_VALUE:return U({},e,{value:t.payload.value});case V.SET_SHOW:return t.payload.show?{value:"",show:t.payload.show,placeholder:""}:U({},e,{show:t.payload.show});case V.SET_PLACEHOLDER:return U({},e,{placeholder:t.payload.placeholder});default:return e}},G=n(44);const X=G.Bodies,Y=G.Composite,Z=G.Common,J={radius:(e,t,n)=>{t.radius=n,"circle"===t.base&&(t.width=2*n,t.height=2*n)},width:(e,t,n)=>{t.width=n,"circle"===t.base&&(t.radius=n/2,t.height=n)},height:(e,t,n)=>{t.height=n,"circle"===t.base&&(t.radius=n/2,t.width=n)},fillStyle:(e,t,n)=>{t.fillStyle=((e,t)=>{if(Array.isArray(t)&&(t=Z.choose(t)),"number"===typeof t){const n=e.world.colorScheme;return n[t%n.length]}return t})(e,n)}},$=(e,t,n,r)=>(n in J?J[n](e,t,r):t[n]=r,r),Q=(e,t,n,r)=>t[n]?$(e,t,n,t[n]):r?$(e,t,n,r):void 0,ee=(e,t)=>(Object.assign(t,{base:"circle",visible:!0}),Q(e,t,"height"),Q(e,t,"width"),Q(e,t,"radius",25),Q(e,t,"fillStyle",Z.choose(e.world.colorScheme)),X.circle(t.position.x,t.position.y,t.radius,t)),te=(e,t)=>(Object.assign(t,{base:"rectangle",visible:!0}),Q(e,t,"width",100),Q(e,t,"height",100),Q(e,t,"fillStyle",t.isStatic?"black":Z.choose(e.world.colorScheme)),X.rectangle(t.position.x,t.position.y,t.width,t.height,t)),ne=(e,t)=>{Object.assign(t,{base:"polygon",visible:!0});const n=Q(e,t,"sides",5);return Q(e,t,"height"),Q(e,t,"width"),Q(e,t,"radius",25),X.polygon(t.position.x,t.position.y,n,t.radius,t)},re=(e,t)=>(Object.assign(t,{base:"rectangle",isSensor:!0,isStatic:!0,visible:!0,collisionFilter:{category:1,mask:0,group:3}}),Q(e,t,"width",10),Q(e,t,"height",10),Q(e,t,"fontColor",Z.choose(e.world.colorScheme)),Q(e,t,"fillStyle","rgba(255, 255, 255, 0)"),X.rectangle(t.position.x,t.position.y,t.width,t.height,t)),se=(e,t)=>(Object.assign(t,{base:"circle",isSensor:!0,isStatic:!0,visible:!0,collisionFilter:{category:1,mask:0,group:3},created:e.getTimeStamp()}),Q(e,t,"height"),Q(e,t,"width"),Q(e,t,"radius",10),Q(e,t,"fillStyle",0),Q(e,t,"opacity",.8),X.circle(t.position.x,t.position.y,t.radius,t)),oe=(e,t)=>{const n=Q(e,t,"column",5),r=Q(e,t,"width",e.world.viewWidth/2),s=Q(e,t,"height",e.world.viewWidth/2),o=r/(2*n),i=t.position.x-r/2,a=t.position.y-s/2,c=G.Composite.create({label:"Newtons Cradle"});for(let l=0;l<n;l+=1){const n={visible:!0,fillStyle:Z.choose(e.world.colorScheme),inertia:t.interia||1/0,restitution:t.restitution||1,friction:t.friction||0,frictionAir:t.frictionAir||1e-4,slop:t.slop||1},r=G.Bodies.circle(i+l*(1.9*o),a+s,o,n),u=G.Constraint.create({pointA:{x:i+l*(1.9*o),y:a},bodyB:r,render:{visible:!0,lineWidth:1|t.lineWidth,strokeStyle:t.strokeStyle||"gray"}});Y.addBody(c,r),Y.addConstraint(c,u)}return console.log(c),console.log(c.parts),c},ie=e=>(Object.assign(e,{Circle:ee,Rectangle:te,Polygon:ne,Label:re,Drop:se,Pendulum:oe}),e);const ae=G.Common,ce={pop:["#de9610","#c93a40","#fff001","#d06d8c","#65ace4","#a0c238","#56a764","#d16b16","#cc528b","#9460a0","#f2cf01","#0074bf"],cute:["#e2b2c0","#fff353","#a5d1f4","#e4ad6d","#d685b0","#dbe159","#7fc2ef","#c4a6ca","#eabf4c","#f9e697","#b3d3ac","#eac7cd"],dynamic:["#b80117","#222584","#00904a","#edc600","#261e1c","#6d1782","#8f253b","#a0c238","#d16b16","#0168b3","#b88b26","#c30068"],gorgeous:["#7d0f80","#b08829","#a03c44","#018a9a","#ab045c","#391d2b","#d5a417","#546474","#0f5ca0","#d0b98d","#d4c91f","#c1541c"],casual:["#7b9ad0","#f8e352","#c8d627","#d5848b","#e5ab47","#e1cea3","#51a1a2","#b1d7e4","#66b7ec","#c08e47","#ae8dbc","#c3cfa9"],psychedelic:["#b7007c","#009b85","#382284","#e2c80f","#009dc6","#c4c829","#95007e","#d685b0","#eee800","#bf5116","#b80e3b","#0178bc"],bright:["#fff001","#cb5393","#a0c238","#d78114","#00a5e7","#cd5638","#0168b3","#d685b0","#00984b","#f2cf01","#6bb6bb","#a563a0"],fairytale:["#cca9ca","#9bcad0","#dd9dbf","#edef9c","#aabade","#f2dae8","#c7ddae","#a199c8","#faede5","#d5a87f","#f7f06e","#95bfe7"],heavy:["#000000","#998c69","#5c002f","#244765","#814523","#5e2a58","#1a653c","#6a6a68","#bf7220","#5f556e","#84762f","#872226"],impact:["#c60019","#fff001","#1d4293","#00984b","#019fe6","#c2007b","#261e1c","#7d0f80","#dc9610","#dbdf19","#d685b0","#a0c238"],street:["#33476a","#211917","#6c7822","#c2007b","#44aeea","#5e3032","#d16b16","#c8d627","#9193a0","#816945","#c50030","#0080c9"],cool:["#b0d7f4","#c0cbe9","#eef0b1","#44aeea","#85beab","#c4a6ca","#f7f06e","#c8d627","#bcccd9","#e4f0fc","#f2dae8","#6490cd"],elegant:["#ae8dbc","#e3b3cd","#d6ddf0","#e5d57d","#82c0cd","#afc7a7","#834e62","#6a9176","#7f7eb8","#a04e90","#dbbc86","#c4c829"],fresh:["#70b062","#c8d85b","#f8e133","#dbdf19","#e3ab30","#dd9dbf","#a979ad","#cd5638","#399548","#6bb6bb","#f7f39c","#9acce3"],warm:["#c59f22","#dd9b9d","#ebcc00","#d6d11d","#8d4f42","#d8836e","#f8e469","#cbb586","#e4aa01","#eac287","#f2d8bf","#a6658d"],soft:["#f8e469","#e7e0aa","#d9de84","#e4bd60","#9ac29f","#e3be87","#edef9c","#dd9b9d","#b2d6d4","#f5dfa6","#ebeddf","#e1d4e6"],man:["#23466e","#4d639f","#dfe0d8","#1d695f","#9aadbe","#844f30","#934e61","#7e9895","#77aad7","#848a96","#a76535","#7e8639"],woman:["#7b0050","#a8006d","#bea620","#a26c54","#949b34","#614983","#cba777","#de9610","#bd8683","#be87a6","#bf5346","#e1d0b4"],boy:["#0168b3","#66b7ec","#afd0ef","#88b83e","#b8b2d6","#6bb6bb","#5e4694","#f2cf01","#c6e2f8","#d5dbcf","#7a8bc3","#e8e6f3"],girl:["#d06da3","#c2d3ed","#be91bc","#c73576","#f8e352","#c8d627","#e3b3cd","#c6e0d5","#e4ab5a","#cb6c58","#845d9e","#82c0cd"],smart:["#4d639f","#356c92","#c9ced1","#dfd4be","#92a1a6","#a67b2d","#bda5bb","#2c4b79","#d6d680","#babea5","#ebc175","#3a614f"],light:["#44aeea","#b4cb32","#b2b6db","#b2d6d4","#ebe9ae","#0080c9","#71b174","#e4c4db","#7da8db","#eac39a","#dbe585","#6db5a9"],stylish:["#58656e","#bac1c7","#487ca3","#dfd4be","#004679","#c0542d","#a44682","#9599b2","#d6d680","#8eb4d9","#6c5776","#499475"],natural:["#ba9648","#87643e","#c2b5d1","#ba7d8c","#b8ac60","#797c85","#f9ebd1","#9cb1c2","#81a47a","#acb130","#8b342a","#acae98"],spring:["#dd9cb4","#eeea55","#ebc061","#b2d6d4","#f2dae8","#c9d744","#b8b2d6","#afd0ef","#d7847e","#f8e352","#b3ce5b","#cbacbe"],summer:["#174e9e","#68b8dd","#d16b16","#88b83e","#f2cf01","#019fe6","#c60019","#019c96","#b0d7f4","#fff001","#0074bf","#c83955"],fall:["#ae3c22","#902342","#c59f22","#7e8639","#eabd00","#a49e2e","#ac5238","#9f832f","#ba7c6f","#875f3b","#bba929","#786b4b"],winter:["#a5aad4","#6591b6","#623d82","#5f897b","#858aa0","#eff3f6","#c2d3dd","#4f616f","#7f7073","#42629f","#674c51","#b38da4"],japan:["#c3003a","#3a546b","#d5a02e","#918d43","#787cac","#604439","#6f2757","#c1541c","#565d63","#afc9ca","#baaa52","#e2b2c0"],euro:["#bf541c","#25a4b7","#e4aa01","#b2bfe1","#ad438e","#1d4293","#b71232","#e8e2be","#b0bf30","#6aa43e","#6276b5","#d7832d"],nordic:["#149bdf","#dbdf19","#c97a2b","#945141","#9abca4","#a5a79a","#e6d9b9","#eabd00","#bf545e","#86b070","#665e51","#b59a4d"],asian:["#946761","#b80040","#4eacb8","#7f1f69","#c8b568","#147472","#1d518b","#b1623b","#95a578","#b9b327","#af508a","#dab100"]},le=e=>{const t=e in ce?ce[e]:ce[ae.choose(["pop","cute","dynamic","gorgeous","casual","psychedelic","bright","fairytale","heavy","impact","street","cool","elegant","fresh","warm","soft","man","woman","boy","girl","smart","light","stylish","natural","spring","summer","fall","winter","japan","euro","nordic","asian"])],n=document.getElementsByClassName("btn");for(let r=0;r<n.length;r+=1)n[r].style.backgroundColor=t[r%t.length],n[r].style.borderColor=t[r%t.length];return t};class ue{constructor(e,t){this.puppy=void 0,this.Body=void 0,this.Composite=void 0,this.Constraint=void 0,this.puppy=e,this.Body=t.Body,this.Composite=t.Composite,this.Constraint=t.Constraint}int(e,t){if("number"===typeof e)return 0|e;if("string"===typeof e){const n=Number.parseInt(e,t);return Number.isNaN(n)?0:n}return"boolean"===typeof e?e?1:0:0|e}float(e){if("number"===typeof e)return e;if("string"===typeof e){const t=Number.parseFloat(e);return isNaN(t)?0:t}return"boolean"===typeof e?e?1:0:e}str(e){return"number"===typeof e||"string"===typeof e?"".concat(e):"boolean"===typeof e?e?"True":"False":Array.isArray(e)?"["+e.map(e=>this.repr(e)).join(", ")+"]":void 0===e?"undefined":e.x&&e.y?"(".concat(e.x,", ").concat(e.y,")"):e.text?e.text:"{"+Object.keys(e).map(t=>"".concat(t,": ").concat(this.repr(e[t]))).join(", ")+"}"}repr(e){return"string"===typeof e?-1==e.indexOf('"')?'"'.concat(e,'"'):"'".concat(e,"'"):this.str(e)}anyAdd(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):e+t}anyMul(e,t){if("string"===typeof e){let n="";for(let r=0;r<t;r+=1)n+=e;return n}if(Array.isArray(e)){let n=[];for(let r=0;r<t;r+=1)n=n.concat(e);return n}return e*t}anyIn(e,t){return t.indexOf(e)>=0}range(e,t,n){let r=0,s=0,o=1;void 0===t?s=e:void 0!==n?(r=e,s=t,o=0===n?1:n):(r=e,s=t);const i=[];if(r<=s){o<0&&(o=-o);for(let e=r;e<s&&(i.push(e),!(i.length>1e5));e+=o);}else{o>0&&(o=-o);for(let e=r;e>s&&(i.push(e),!(i.length>1e5));e+=o);}return i}get(e,t,n,r){const s=e[t];return void 0===s?n:s}index(e,t,n){return"string"===typeof e?e.charAt((t+e.length)%e.length):Array.isArray(e)?e[(t+e.length)%e.length]:void 0}slice(e,t,n,r){return"string"===typeof e?(void 0==n&&(n=e.length),e.substring(t,n)):Array.isArray(e)?(void 0==n&&(n=e.length),e.slice(t,n)):void 0}find(e,t){return e.indexOf(t)}join(e,t){return t.join(e)}append(e,t){e.push(t)}len(e){return"string"===typeof e||Array.isArray(e.length)?e.length:0}vec(e=0,t=0){return{x:e,y:t}}setPosition(e,t,n){this.Body.setPosition(e,{x:t,y:n})}translate(e,t,n){this.Body.translate(e,{x:t,y:n})}applyForce(e,t,n,r,s){this.Body.applyForce(e,{x:t,y:n},{x:r,y:s})}rotate(e,t,n,r){this.Body.rotate(e,t)}scale(e,t,n,r,s){this.Body.scale(e,t,n)}setAngle(e,t){this.Body.setAngle(e,t)}setVelocity(e,t,n){this.Body.setVelocity(e,{x:t,y:n})}setAngularVelocity(e,t){this.Body.setAngularVelocity(e,t)}setDensity(e,t){this.Body.setDensity(e,t)}setMass(e,t){this.Body.setMass(e,t)}setStatic(e,t){this.Body.setStatic(e,t)}newComosite(e){return this.Composite.create({label:"comosite"})}addBody(e,t){this.Composite.addBody(e,t)}addConstraint(e,t){this.Composite.addConstraint(this.Constraint.create(t))}}const pe=G.Engine,de=G.Runner,he=(e=>{const t=(e,t)=>{let n=e.textures[t];return n||(n=e.textures[t]=new Image,t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:")||t.startsWith("/")?n.src=t:n.src="".concat("/LIVE2019","/image/").concat(t),n)};return e.bodies=function(e,n,r){const s=r,o=e.options,i=o.showInternalEdges||!o.wireframes,a=o.font||"bold 60px 'Arial'",c=o.fontColor||"gray";for(let l=0;l<n.length;l+=1){const r=n[l];if(r.visible)for(let n=r.parts.length>1?1:0;n<r.parts.length;n+=1){const l=r.parts[n];if(l.visible){if(1!==l.opacity&&(s.globalAlpha=l.opacity),l.image){const n=t(e,l.image);s.translate(l.position.x,l.position.y),s.rotate(l.angle),s.drawImage(n,-.5*l.width,-.5*l.height,l.width,l.height),s.rotate(-l.angle),s.translate(-l.position.x,-l.position.y)}else{if(l.circleRadius)s.beginPath(),s.arc(l.position.x,l.position.y,l.circleRadius,0,2*Math.PI);else{s.beginPath(),s.moveTo(l.vertices[0].x,l.vertices[0].y);for(let e=1;e<l.vertices.length;e+=1)!l.vertices[e-1].isInternal||i?s.lineTo(l.vertices[e].x,l.vertices[e].y):s.moveTo(l.vertices[e].x,l.vertices[e].y),l.vertices[e].isInternal&&!i&&s.moveTo(l.vertices[(e+1)%l.vertices.length].x,l.vertices[(e+1)%l.vertices.length].y);s.lineTo(l.vertices[0].x,l.vertices[0].y),s.closePath()}o.wireframes?(s.lineWidth=1,s.strokeStyle="#bbb",s.stroke()):(s.fillStyle=l.fillStyle,l.lineWidth&&(s.lineWidth=l.lineWidth,s.strokeStyle=l.strokeStyle,s.stroke()),s.fill())}void 0!==l.value&&(l.ref&&(l.value=l.ref()),s.save(),s.font=l.font||a,s.fillStyle=l.fontColor||c,s.textAlign=l.textAlign||"center",l.shadowColor&&(s.shadowColor=l.shadowColor,s.shadowBlur=s.shadowBlur||0,s.shadowOffsetX=s.shadowOffsetX||2,s.shadowOffsetY=s.shadowOffsetY||2),s.fillText("".concat(l.value),l.position.x,l.position.y+10),s.restore()),s.globalAlpha=1}}}},e})(G.Render),fe=G.Constraint,me=G.MouseConstraint,ye=G.Mouse,be=G.World,ge=G.Bounds,ve=G.Vertices,_e=G.Detector,Ee=G.Common;class we{constructor(e,t,n=!1){this.settings=void 0,this.code=void 0,this.world=void 0,this.interval=void 0,this.waitRestart=void 0,this.isExecuting=void 0,this.runner=void 0,this.engine=void 0,this.render=void 0,this.canvas=void 0,this.vars=void 0,this.lib=void 0,this.new_=((e,t,n,r)=>{r.position||(r.position={x:t,y:n});const s=e(this,r);return be.add(this.engine.world,[s]),s}),this.Circle=((e,t,n={})=>this.new_(this.vars.Circle,e,t,n)),this.Rectangle=((e,t,n={})=>this.new_(this.vars.Rectangle,e,t,n)),this.Polygon=((e,t,n={})=>this.new_(this.vars.Polygon,e,t,n)),this.Label=((e,t,n={})=>this.new_(this.vars.Label,e,t,n)),this.World=((e,t,n)=>{if(this.engine&&this.world){this.world.viewWidth=e,this.world.viewHeight=t;const r=this.world.view.min;this.world.view={min:r,max:{x:r.x+e,y:r.y+t}},this.resize(this.render.options.width,this.render.options.height),he.lookAt(this.render,this.world.view),n&&Object.keys(n).map(e=>{this.world&&e in this.world&&("background"==e&&(this.render.options.background=n.background),this.world[e]=n[e]),this.engine&&e in this.engine.world&&(this.engine.world[e]=n[e])})}}),this.settings=e,this.code=t,this.world=null,this.interval=500,this.waitRestart=n,this.isExecuting=!1,this.runner=null,this.engine=null,this.render=null,this.canvas=null,this.vars={},this.lib=new ue(this,{Body:G.Body,Composite:G.Composite,Constraint:G.Constraint})}initCode(){const e=this.code,t=e.world.width||1e3,n=e.world.height||1e3,r=e.world.viewWidth||t,s=e.world.viewHeight||n,o=e.world.position||{x:0,y:0};this.code=e,this.world={width:t,height:n,viewWidth:r,viewHeight:s,background:e.world.background||"white",gravity:e.world.gravitiy||{x:0,y:1},colorScheme:le(e.world.colorScheme||""),opacity:e.world.opacity||1,font:e.world.font||"bold 60px 'Arial'",view:e.world.view||{min:o,max:{x:o.x+r,y:o.y+s}},density:e.world.density||.001,friction:e.world.friction||.1,airFriction:e.world.airFriction||.01,frictionStatic:e.world.frictionStatic||.5,motion:e.world.motion||0,restitution:e.world.restitution||0}}startCode(){if(this.engine=pe.create(),this.world.gravity){const e=this.engine;window.addEventListener("deviceorientation",t=>{const n=window.orientation||0,r=e.world.gravity;0===n?(r.x=Ee.clamp(t.gamma,-90,90)/90,r.y=Ee.clamp(t.beta,-90,90)/90):180===n?(r.x=Ee.clamp(t.gamma,-90,90)/90,r.y=Ee.clamp(-t.beta,-90,90)/90):90===n?(r.x=Ee.clamp(t.beta,-90,90)/90,r.y=Ee.clamp(-t.gamma,-90,90)/90):-90===n&&(r.x=Ee.clamp(-t.beta,-90,90)/90,r.y=Ee.clamp(t.gamma,-90,90)/90)})}G.Events.on(this.engine,"beforeUpdate",()=>{const e=this.engine.timing.timestamp;this.settings.eachUpdate&&this.settings.eachUpdate(e);const t=G.Composite.allBodies(this.engine.world);for(let n=0;n<t.length;n+=1){const r=t[n];r.move&&r.move(r,e)}}),G.Events.on(this.engine,"collisionActive",e=>{const t=e.pairs;for(let n=0;n<t.length;n+=1){const e=t[n];e.bodyA.collisionActive&&e.bodyA.collisionActive(e.bodyA,e.bodyB),e.bodyB.collisionActive&&e.bodyB.collisionActive(e.bodyB,e.bodyA)}}),G.Events.on(this.engine,"collisionStart",e=>{const t=e.pairs;for(let n=0;n<t.length;n+=1){const e=t[n];e.bodyA.collisionStart&&e.bodyA.collisionStart(e.bodyA,e.bodyB),e.bodyB.collisionStart&&e.bodyB.collisionStart(e.bodyB,e.bodyA)}}),G.Events.on(this.engine,"collisionEnd",e=>{const t=e.pairs;for(let n=0;n<t.length;n+=1){const e=t[n];e.bodyA.collisionEnd&&e.bodyA.collisionEnd(e.bodyA,e.bodyB),e.bodyB.collisionEnd&&e.bodyB.collisionEnd(e.bodyB,e.bodyA)}}),this.runner=de.create({isFixed:!1});const e=document.getElementById(this.settings.canvas);let t=e.clientWidth,n=e.clientWidth*this.world.height/this.world.width;n>e.clientHeight&&(n=e.clientHeight,t=e.clientHeight*this.world.width/this.world.height);const r={element:e,engine:this.engine,options:{width:t,height:n,background:this.world.background,font:this.world.font,wireframes:!1}};this.render=he.create(r),this.canvas=this.render.canvas,he.lookAt(this.render,this.world.view);const s=ye.create(this.render.canvas),o={pointA:{x:0,y:0},pointB:{x:0,y:0},stiffness:this.world.mouseStiffness||.2,render:{visible:!1}},i=me.create(this.engine,{mouse:s,constraint:fe.create(o)});be.add(this.engine.world,i),this.render.mouse=s,G.Events.on(i,"mousedown",e=>{const t=e.mouse;let n=e.sourcebody;const r=G.Composite.allBodies(this.engine.world);for(let s=0;s<r.length;s+=1)if(n=r[s],ge.contains(n.bounds,t.position)&&_e.canCollide(n.collisionFilter,i.collisionFilter))for(let e=n.parts.length>1?1:0;e<n.parts.length;e+=1){const r=n.parts[e];if(r.clicked&&ve.contains(r.vertices,t.position)){r.clicked(r);break}}}),this.vars=ie({}),de.run(this.runner,this.engine),he.run(this.render)}dispose(){this.engine&&(be.clear(this.engine.world,!1),pe.clear(this.engine)),this.runner&&de.stop(this.runner),this.render&&(he.stop(this.render),this.render.canvas.remove(),this.render.textures={})}getCode(){return this.code}getCanvas(){return this.canvas}resize(e,t){let n=e,r=e*this.world.viewHeight/this.world.viewWidth;r>t&&(r=t,n=t*this.world.viewWidth/this.world.viewHeight),this.canvas.setAttribute("width",n.toString()),this.canvas.setAttribute("height",r.toString()),this.render.options.width=n,this.render.options.height=r}async wait(e){await new Promise(t=>setTimeout(t,e))}async waitForRun(e){for(;this.waitRestart;)await this.wait(e);this.runner.enabled=!0}async execute_main(){const e=_n();this.isExecuting=!0;for await(const t of this.code.main(this))if(t<e&&vn())for(let e=0;e<this.interval/this.runner.delta;e+=1)this.engine=pe.update(this.engine,void 0,void 0);else En(t,t),await this.waitForRun(1e3),await this.wait(this.interval);this.isExecuting=!1,wn()}isRunning(){return this.runner&&this.runner.enabled}runCode(){this.initCode(),this.dispose(),this.startCode(),this.runner.enabled=!this.waitRestart,this.execute_main()}pause(){this.waitRestart=!0,this.runner.enabled=!1}start(){this.isExecuting?this.waitRestart=!1:this.runner.enabled=!0}getTimeStamp(){return this.engine.timing.timestamp}ln(e){return this.code.lines[e]}async input(e){this.runner.enabled=!1;const t=await gn(e||"");return this.runner.enabled=!0,this.waitForRun(500),console.log("input ".concat(t)),t}async input0(e){this.runner.enabled=!1;const t=document.getElementById("inputtext");t.placeholder=e||"Input here",document.getElementById("myOverlay").style.display="block";const n=await(async()=>{const e=document.querySelector("#submitInput");let n="";return document.getElementById("submitInput").onclick=(()=>{document.getElementById("myOverlay").style.display="none",n=t.value,t.value=""}),await(e=>new Promise(t=>{const n=t;e.addEventListener("click",n,{once:!0})}))(e),n})();return this.runner.enabled=!0,this.waitForRun(500),n}print(e,t={}){const n=this.world.width,r=Ee.extend({shape:"label",value:"".concat(e),created:this.getTimeStamp(),move:(e,t)=>{const r=n-100*(t-e.created)*.003;G.Body.setPosition(e,{x:r,y:e.position.y}),r<-1&&be.remove(this.engine.world,e)}},t),s=this.world.width,o=this.world.height*(.9*Math.random()+.05);this.new_(this.vars.Label,s,o,r)}trace(e){console.log(e)}listAdd(e,t){return e.concat(t)}anyMul(e,t){if("string"===typeof e){let n="";for(let r=0;r<t;r+=1)n+=e;return n}if(Array.isArray(e)){let n=[];for(let r=0;r<t;r+=1)n=n.concat(e);return n}return e*t}anyIn(e,t){return t.indexOf(e)>=0}int(e){return"number"===typeof e?0|e:"string"===typeof e?Number.parseInt(e):"boolean"===typeof e?e?1:0:0|e}float(e){return"number"===typeof e?e:"string"===typeof e?Number.parseFloat(e):"boolean"===typeof e?e?1:0:e}str(e){return"boolean"===typeof e?e?"True":"False":Array.isArray(e)?"["+e.map(e=>this.str(e)).join(", ")+"]":"".concat(e)}range(e,t,n){let r=0,s=0,o=1;void 0===t?s=e:void 0!==n?(r=e,s=t,o=0===n?1:n):(r=e,s=t);const i=[];if(r<=s){o<0&&(o=-o);for(let e=r;e<s&&(i.push(e),!(i.length>1e5));e+=o);}else{o>0&&(o=-o);for(let e=r;e>s&&(i.push(e),!(i.length>1e5));e+=o);}return i}getindex(e,t){return"string"===typeof e?e.charAt((t+e.length)%e.length):Array.isArray(e)?e[(t+e.length)%e.length]:void 0}slice(e,t,n){return"string"===typeof e?(void 0==n&&(n=e.length),e.substr(t,n-t)):Array.isArray(e)?(void 0==n&&(n=e.length),e.slice(t,n)):void 0}find(e,t){return e.indexOf(t)}join(e,t){return t.join(e)}append(e,t){e.push(t)}len(e){return e.length}map(e,t){return Array.from(t,e)}setPosition(e,t,n){G.Body.setPosition(e,{x:t,y:n})}applyForce(e,t,n,r,s){G.Body.applyForce(e,{x:t,y:n},{x:r,y:s})}rotate(e,t,n,r){G.Body.rotate(e,t)}scale(e,t,n,r,s){G.Body.scale(e,t,n)}setAngle(e,t){G.Body.setAngle(e,t)}setVelocity(e,t,n){G.Body.setVelocity(e,{x:t,y:n})}setAngularVelocity(e,t){G.Body.setAngularVelocity(e,t)}setDensity(e,t){G.Body.setDensity(e,t)}setMass(e,t){G.Body.setMass(e,t)}setStatic(e,t){G.Body.setStatic(e,t)}}let Se={canvas:"puppy-screen",ftrace:e=>{}};var Ne,xe=n(202);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}!function(e){e.SET_VERSION_SHOW="SET_VERSION_SHOW"}(Ne||(Ne={}));const Oe=e=>({type:Ne.SET_VERSION_SHOW,payload:{show:e}}),ke={show:!1};var Ie=(e=ke,t)=>{switch(t.type){case Ne.SET_VERSION_SHOW:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{show:t.payload.show});default:return e}};const Ae=Object(xe.b)({editor:k,course:F,puppy:z,input:K,version:Ie}),Ce=Object(xe.c)(Ae);var Pe=Ce;class Le{constructor(e,t,n,r){this.tag=void 0,this.urn=void 0,this.inputs=void 0,this.spos=void 0,this.epos=void 0,this.nodes=void 0,this.tag=e,this.urn=r,this.inputs="",this.spos=t,this.epos=n,this.nodes=Le.empties}setup(e,t){if(null!==this.urn){const r=[];for(var n=this.urn;null!==n;)r.push([n.edge,n.child.setup(e,t)]),n=n.prev;this.nodes=r.reverse()}this.urn=e,this.inputs=t;for(var r=0;r<this.nodes.length;r+=1)this[r]=this.nodes[r][1],""!==this.nodes[r][0]&&(this[this.nodes[r][0]]=this.nodes[r][1]);return this}is(e){return this.tag===e}isError(){return"err"===this.tag}subs(){const e=[];for(var t=0;t<this.nodes.length;t+=1)e.push(this.nodes[t][1]);return e}size(){return this.nodes.length}contains(e){for(var t=0;t<this.nodes.length;t+=1)if(this.nodes[t][0]===e)return!0;return!1}get(e){return this[e]}tokenize(e,t){if(void 0===e)return this.inputs.substring(this.spos,this.epos);const n=this[e];return void 0===n?t||"":n.tokenize()}pos(e){const t=this.inputs;e=Math.min(e,t.length);for(var n=0,r=0,s=0;s<=e;s+=1)10==t.charCodeAt(s)?(n+=1,r=0):r+=1;return[e,n,r]}begin(){return this.pos(this.spos)}end(){return this.pos(this.spos)}length(){return this.epos-this.spos}toString(){const e=[];return this.strOut(e),e.join("")}strOut(e){e.push("[#"),e.push(this.tag);for(const t of this.nodes)e.push(""===t[0]?" ":" ".concat(t[0],"=")),t[1].strOut(e);if(0==this.nodes.length){const t=this.inputs.substring(this.spos,this.epos);e.push(" '"),e.push(t),e.push("'")}e.push("]")}}Le.empties=[];class je{constructor(e,t,n){this.prev=void 0,this.edge=void 0,this.child=void 0,this.prev=e,this.edge=t,this.child=n}}class Me{constructor(e,t,n,r){this.urn=void 0,this.inputs=void 0,this.pos=void 0,this.epos=void 0,this.head_pos=void 0,this.ast=void 0,this.state=void 0,this.memos=void 0,this.urn=e,this.inputs=t,this.pos=n,this.epos=r,this.head_pos=n,this.ast=null,this.state=null,this.memos=[];for(var s=0;s<1789;s++)this.memos.push(new $e)}}const Fe=e=>e.pos<e.epos&&(e.pos+=1,!0),Re=()=>Fe,De=e=>{const t=e.length;return n=>!!n.inputs.startsWith(e,n.pos)&&(n.pos+=t,!0)},Be=(e,t)=>{const n=1<<(t%8|0);e[t/8|0]|=n},Ve=(e,t)=>{const n=((e,t)=>{for(var n=0,r=0;r<e.length;r+=1)n=Math.max(e.charCodeAt(r),n);for(const s of t)n=Math.max(s.charCodeAt(0),n),n=Math.max(s.charCodeAt(1),n);return n})(e,t)+1,r=new Uint8Array(1+(n/8|0));r[0]=2;for(var s=0;s<e.length;s+=1)Be(r,e.charCodeAt(s));for(const i of t)for(var o=i.charCodeAt(0);o<=i.charCodeAt(1);o+=1)Be(r,o);return e=>{if(e.pos<e.epos){const t=e.inputs.charCodeAt(e.pos),n=t/8|0,s=1<<(t%8|0);if(n<r.length&&(r[n]&s)===s)return e.pos+=1,!0}return!1}},ze=e=>t=>{for(var n=t.pos,r=t.ast;e(t)&&t.pos>n;)n=t.pos,r=t.ast;return t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r,!0},We=e=>t=>{if(e(t)){for(var n=t.pos,r=t.ast;e(t)&&t.pos>n;)n=t.pos,r=t.ast;return t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r,!0}return!1},Ue=e=>t=>{const n=t.pos;return!!e(t)&&(t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,!0)},He=e=>t=>{const n=t.pos,r=t.ast;return!e(t)||(t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r,!1)},qe=e=>t=>{const n=t.pos,r=t.ast;return e(t)||(t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r),!0},Ke=(...e)=>t=>{for(const n of e)if(!n(t))return!1;return!0},Ge=(e,t)=>n=>e(n)&&t(n),Xe=(e,t,n)=>r=>e(r)&&t(r)&&n(r),Ye=(...e)=>t=>{const n=t.pos,r=t.ast;for(const s of e){if(s(t))return!0;t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r}return!1},Ze=(e,t)=>n=>{const r=n.pos,s=n.ast;return!!e(n)||(n.head_pos=Math.max(n.pos,n.head_pos),n.pos=r,n.ast=s,t(n))},Je=(e,t)=>e[t]?e[t]:n=>e[t](n);class $e{constructor(){this.key=void 0,this.key=-1}}const Qe=(e,t,n)=>r=>{const s=r.pos;return r.ast=null,!!e(r)&&(r.ast=new Le(t,s+n,r.pos,r.ast),!0)},et=(e,t)=>n=>{const r=n.ast;return!!t(n)&&(n.ast=new je(r,e,n.ast),!0)},tt=(e,t,n,r)=>s=>{const o=s.pos;return s.ast=new je(null,e,s.ast),!!t(s)&&(s.ast=new Le(n,o+r,s.pos,s.ast),!0)};class nt{constructor(e,t,n){this.sid=void 0,this.value=void 0,this.prev=void 0,this.sid=e,this.value=t,this.prev=n}}const rt=(e,t)=>{for(;null!==e;){if(e.sid===t)return e;e=e.prev}return null},st=e=>t=>{const n=rt(t.state,e);return!(null===n||!t.inputs.startsWith(n.value,t.pos))&&(t.pos+=n.value.length,!0)},ot=e=>{const t=at(e);return void 0===t&&(console.log("undefined ".concat(e)),console.log(it)),(e,n)=>{const r=new Me((void 0===n?{}:n).urn||"(unknown source)",e,0,e.length);return t(r)?null===r.ast&&(r.ast=new Le("",0,r.pos,null)):r.ast=new Le("err",r.head_pos,r.head_pos+1,null),r.ast.setup(r.urn,e)}};let it=null;const at=e=>(null===it&&((it={}).Source=Xe(qe(Je(it,"EOL")),Qe(ze(Ke(et("",Je(it,"Statement")),ze(Ge(Je(it,'";"'),et("",Je(it,"Statement")))),qe(Je(it,'";"')),Je(it,"EOL"))),"Source",0),Je(it,"EOF")),it.Block=Qe((e=>t=>{const n=t.state,r=e(t);return t.state=n,r})(Xe(((e,t)=>n=>{const r=n.pos;return!!t(n)&&(n.state=new nt(e,n.inputs.substring(r,n.pos),n.state),!0)})(0,Je(it,"INDENT")),Ze(Xe(et("",Je(it,"Statement")),ze(Ge(Je(it,'";"'),et("",Je(it,"Statement")))),qe(Je(it,'";"'))),Ge(Je(it,"_"),Ue(Je(it,"EOL")))),ze(Ge(st(0),Ze(Xe(et("",Je(it,"Statement")),ze(Ge(Je(it,'";"'),et("",Je(it,"Statement")))),qe(Je(it,'";"'))),Ge(Je(it,"_"),Ue(Je(it,"EOL")))))))),"Block",0),it.Statement=Ye(Je(it,"ClassDecl"),Je(it,"ImportDecl"),Je(it,"FuncDecl"),Je(it,"IfStmt"),Je(it,"ForStmt"),Je(it,"WhileStmt"),Je(it,"Return"),Je(it,"Yield"),Je(it,"Break"),Je(it,"Continue"),Je(it,"VarDecl"),Je(it,"Expression")),it.ImportDecl=Ze(Qe(Xe(Ge(De("import"),Je(it,"S")),et("name",Je(it,"Name")),qe(Ge(Ge(De("as"),Je(it,"S")),et("alias",Je(it,"Name"))))),"ImportDecl",0),Qe(Ke(Ge(De("from"),Je(it,"S")),et("name",Je(it,"Name")),Ge(De("import"),Je(it,"S")),et("names",Ze(Qe(Ge(et("",Je(it,"Name")),ze(Xe(De(","),Je(it,"_"),et("",Je(it,"Name"))))),"",0),Qe(Ge(De("*"),Je(it,"_")),"",0)))),"FromDecl",0)),it.ClassDecl=Qe(Ke(De("class"),Je(it,"S"),Je(it,"_"),et("name",Je(it,"Name")),qe(Ke(De("("),Je(it,"_"),et("extends",Je(it,"Name")),De(")"),Je(it,"_"))),De(":"),Je(it,"_"),Ze(et("",Je(it,"Block")),et("",Je(it,"Statement")))),"ClassDecl",0),it.FuncDecl=Qe(Ke(De("def"),Je(it,"S"),Je(it,"_"),et("name",Je(it,"Name")),et("params",Je(it,"FuncParams")),De(":"),Je(it,"_"),et("body",Ze(Je(it,"Block"),Je(it,"Statement")))),"FuncDecl",0),it.FuncParams=Qe(Ke(Je(it,'"("'),qe(et("",Je(it,"FuncParam"))),ze(Ge(Je(it,'","'),et("",Je(it,"FuncParam")))),Je(it,'")"')),"FuncParam",0),it.FuncParam=Qe(Ge(et("name",Je(it,"Name")),qe(Xe(De(":"),Je(it,"_"),et("type",Je(it,"Name"))))),"Param",0),it.Lambda=Qe(Ke(De("lambda"),qe(Xe(Je(it,"S"),Je(it,"_"),et("params",Je(it,"LambdaParams")))),De(":"),Je(it,"_"),et("body",Ze(Je(it,"Block"),Je(it,"Statement")))),"FuncExpr",0),it.LambdaParams=Qe(Ge(qe(et("",Je(it,"Name"))),ze(Ge(Je(it,'","'),et("",Je(it,"Name"))))),"Param",0),it.Return=Qe(Ge(De("return"),qe(Xe(He(Je(it,"W")),Je(it,"_"),et("expr",Je(it,"Expression"))))),"Return",0),it.Yield=Qe(Ge(De("yield"),Je(it,"_")),"Yield",0),it.Pass=Qe(Ge(De("pass"),Je(it,"_")),"Pass",0),it.Break=Qe(Ge(De("break"),Je(it,"_")),"Break",0),it.Continue=Qe(Ge(De("continue"),Je(it,"_")),"Continue",0),it.IfStmt=Qe(Ke(Ge(De("if"),He(Je(it,"W"))),Je(it,"_"),et("cond",Je(it,"Expression")),De(":"),Je(it,"_"),et("then",Ze(Je(it,"Block"),Je(it,"Statement"))),qe(et("elif",Je(it,"ElifBlock"))),qe(Ke(Ze(st(0),Je(it,"NL")),De("else"),He(Je(it,"W")),Je(it,"_"),De(":"),Je(it,"_"),et("else",Ze(Je(it,"Block"),Je(it,"Statement")))))),"IfStmt",0),it.ElifBlock=Qe(We(et("",Je(it,"ElifStmt"))),"",0),it.ElifStmt=Qe(Ke(Ze(st(0),Je(it,"NL")),Ge(De("elif"),He(Je(it,"W"))),Je(it,"_"),et("cond",Je(it,"Expression")),De(":"),Je(it,"_"),et("then",Ze(Je(it,"Block"),Je(it,"Statement")))),"ElifStmt",0),it.ForStmt=Qe(Ke(Ge(De("for"),He(Je(it,"W"))),Je(it,"_"),et("each",Je(it,"Name")),Ge(De("in"),He(Je(it,"W"))),Je(it,"_"),et("list",Je(it,"Expression")),De(":"),Je(it,"_"),et("body",Ze(Je(it,"Block"),Je(it,"Statement")))),"ForStmt",0),it.WhileStmt=Qe(Ke(Ge(De("while"),He(Je(it,"W"))),Je(it,"_"),et("cond",Je(it,"Expression")),De(":"),Je(it,"_"),et("body",Ze(Je(it,"Block"),Je(it,"Statement")))),"WhileStmt",0),it.VarDecl=Ze(Qe(Ke(et("left",Je(it,"LeftHand")),De("="),Je(it,"_"),et("right",Je(it,"Expression"))),"VarDecl",0),Je(it,"SelfAssign")),it.LeftHand=Ge(Je(it,"Name"),ze(Ze(tt("recv",Xe(De("."),Je(it,"_"),et("name",Je(it,"Name"))),"GetExpr",0),tt("recv",Xe(Je(it,'"["'),et("index",Je(it,"Expression")),Je(it,'"]"')),"IndexExpr",0)))),it.SelfAssign=Qe(Xe(et("left",Je(it,"LeftHand")),et("name",Je(it,"SelfAssignOp")),et("right",Je(it,"Expression"))),"SelfAssign",0),it.SelfAssignOp=Ge(Qe(Ge(Ye(De("<<"),De(">>"),De("**"),De("//"),Ve("+=*@/%&|^",[])),De("=")),"",0),Je(it,"_")),it.Expression=Ge(Je(it,"Operator"),qe(tt("then",Ke(De("if"),He(Je(it,"W")),Je(it,"_"),et("cond",Je(it,"Expression")),De("else"),He(Je(it,"W")),Je(it,"_"),et("else",Je(it,"Expression"))),"IfExpr",0))),it.Operator=Ge(Je(it,"AndExpr"),ze(tt("left",Xe(Je(it,"OR"),Je(it,"_"),et("right",Je(it,"AndExpr"))),"Or",0))),it.OR=Ze(Ge(De("or"),He(Je(it,"W"))),De("||")),it.AndExpr=Ge(Je(it,"NotExpr"),ze(tt("left",Xe(Je(it,"AND"),Je(it,"_"),et("right",Je(it,"NotExpr"))),"And",0))),it.AND=Ze(Ge(De("and"),He(Je(it,"W"))),De("&&")),it.NotExpr=Ze(Qe(Xe(Je(it,"NOT"),Je(it,"_"),et("",Je(it,"NotExpr"))),"Not",0),Je(it,"EqExpr")),it.NOT=Ze(Xe(De("not"),He(Je(it,"W")),Je(it,"_")),De("!")),it.EqExpr=Ge(Je(it,"SumExpr"),ze(tt("left",Xe(et("name",Qe(Je(it,"EQ"),"Name",0)),Je(it,"_"),et("right",Je(it,"SumExpr"))),"Infix",0))),it.EQ=Ye(Ge(De("=="),He(De("="))),Ge(De("!="),He(De("="))),Ge(De("<="),He(De("="))),Ge(De(">="),He(De("="))),Ge(De("<"),He(De("<"))),Ge(De(">"),He(De(">"))),Ge(De("in"),Je(it,"S")),Ge(De("is"),Je(it,"S")),Ge(De("is not"),Je(it,"S"))),it.SumExpr=Ge(Je(it,"ProdExpr"),ze(tt("left",Xe(et("name",Qe(Je(it,"SUM"),"Name",0)),Je(it,"_"),et("right",Je(it,"ProdExpr"))),"Infix",0))),it.SUM=Ve("+-|\uff0b\u30fc",[]),it.ProdExpr=Ge(Je(it,"PowExpr"),ze(tt("left",Xe(et("name",Qe(Je(it,"PROD"),"Name",0)),Je(it,"_"),et("right",Je(it,"PowExpr"))),"Infix",0))),it.PROD=Ye(De("//"),De("<<"),De(">>"),Ve("*/%^&\xd7\xf7",[])),it.PowExpr=Ge(Je(it,"UnaryExpr"),ze(tt("left",Xe(et("name",Qe(De("**"),"Name",0)),Je(it,"_"),et("right",Je(it,"UnaryExpr"))),"Infix",0))),it.UnaryExpr=Ze(Qe(Xe(et("name",Qe(Je(it,"PRE"),"Name",0)),Je(it,"_"),et("expr",Je(it,"UnaryExpr"))),"Unary",0),Je(it,"SuffixExpr")),it.PRE=Ve("+-~",[]),it.SuffixExpr=Ge(Je(it,"Primary"),ze(Ye(tt("recv",Ke(De("."),Je(it,"_"),et("name",Je(it,"Name")),Je(it,'"("'),et("params",Je(it,"Arguments")),Je(it,"__"),Je(it,'")"')),"MethodExpr",0),tt("recv",Xe(De("."),Je(it,"_"),et("name",Je(it,"Name"))),"GetExpr",0),tt("name",Ke(Je(it,'"("'),et("params",Je(it,"Arguments")),Je(it,"__"),Je(it,'")"')),"ApplyExpr",0),tt("recv",Ke(Je(it,'"["'),qe(et("left",Je(it,"Expression"))),De(":"),Je(it,"_"),qe(et("right",Je(it,"Expression"))),Je(it,'"]"')),"Slice",0),tt("recv",Xe(Je(it,'"["'),et("index",Je(it,"Expression")),Je(it,'"]"')),"IndexExpr",0)))),it.Arguments=Qe(Xe(qe(Ge(et("",Je(it,"Expression")),He(De("=")))),ze(Ke(De(","),Je(it,"__"),et("",Je(it,"Expression")),He(De("=")))),qe(et("",Je(it,"KeywordArgument")))),"Arguments",0),it.KeywordArgument=Qe(Xe(qe(Ge(De(","),Je(it,"__"))),et("",Je(it,"Argument")),ze(Xe(De(","),Je(it,"__"),et("",Je(it,"Argument"))))),"Data",0),it.Argument=Qe(Ke(et("name",Je(it,"Name")),De("="),Je(it,"_"),et("value",Je(it,"Expression"))),"KeyValue",0),it.Primary=Ye(Je(it,"GroupExpr"),Je(it,"ListExpr"),Je(it,"DataExpr"),Je(it,"Lambda"),Je(it,"Constant"),Je(it,"Name")),it.GroupExpr=Qe(Ke(Je(it,'"("'),et("",Je(it,"Expression")),ze(Xe(Je(it,'","'),Je(it,"__"),et("",Je(it,"Expression")))),Je(it,"__"),Je(it,'")"')),"Tuple",0),it.ListExpr=Qe(Ke(Je(it,'"["'),qe(Ge(et("",Je(it,"Expression")),ze(Xe(Je(it,'","'),Je(it,"__"),et("",Je(it,"Expression")))))),qe(Je(it,'","')),Je(it,"__"),Je(it,'"]"')),"List",0),it.DataExpr=Qe(Ke(Je(it,'"{"'),et("",Je(it,"KeyValue")),ze(Xe(Je(it,'","'),Je(it,"__"),et("",Je(it,"KeyValue")))),qe(Je(it,'","')),Je(it,"__"),Je(it,'"}"')),"Data",0),it.KeyValue=Qe(Xe(et("name",Ye(Je(it,"Name"),Je(it,"StringExpr"),Je(it,"CharExpr"))),Je(it,'":"'),et("value",Je(it,"Expression"))),"KeyValue",0),it.Name=Ze(Je(it,"Identifier"),Je(it,"NLPSymbol")),it.Identifier=Ge(Qe(Ge(Ve("",["AZ","az"]),ze(Je(it,"W"))),"Name",0),Je(it,"_")),it.NLPSymbol=Ge(Qe(We(Ye(Je(it,"HIRA"),Je(it,"KATA"),Je(it,"KANJI"))),"NLPSymbol",0),Je(it,"_")),it.W=Ve("_",["AZ","az","09"]),it.Constant=Ye(Je(it,"FormatString"),Je(it,"LongString"),Je(it,"StringExpr"),Je(it,"CharExpr"),Je(it,"Number"),Je(it,"TrueExpr"),Je(it,"FalseExpr"),Je(it,"NullExpr")),it.FormatString=Xe(Ve("Ff",[]),Ye(Xe(De("'''"),Qe(ze(et("",Je(it,"FormatContent3"))),"Format",0),De("'''")),Xe(De("'"),Qe(ze(et("",Je(it,"FormatContent1"))),"Format",0),De("'")),Xe(De('"""'),Qe(ze(et("",Je(it,"FormatContent3D"))),"Format",0),De('"""')),Xe(De('"'),Qe(ze(et("",Je(it,"FormatContent1D"))),"Format",0),De('"'))),Je(it,"_")),it.FormatContent3=Ze(Xe(De("{"),Je(it,"Expression"),De("}")),Qe(ze(Xe(He(De("'''")),He(De("{")),Re())),"StringPart",0)),it.FormatContent1=Ze(Xe(De("{"),Je(it,"Expression"),De("}")),Qe(ze(Xe(He(De("'")),He(De("{")),Re())),"StringPart",0)),it.FormatContent3D=Ze(Xe(De("{"),Je(it,"Expression"),De("}")),Qe(ze(Xe(He(De('"""')),He(De("{")),Re())),"StringPart",0)),it.FormatContent1D=Ze(Xe(De("{"),Je(it,"Expression"),De("}")),Qe(ze(Xe(He(De('"')),He(De("{")),Re())),"StringPart",0)),it.LongString=Ze(Ke(De("''"),Qe(Xe(De("'"),ze(Ye(Je(it,"ESCAPE"),Ge(He(Ve("\\'",[])),Re()),Ge(He(De("'''")),De("'")))),De("'")),"MultiString",0),De("''"),Je(it,"_")),Ke(De('""'),Qe(Xe(De('"'),ze(Ye(Je(it,"ESCAPE"),Ge(He(Ve('\\"',[])),Re()),Ge(He(De('"""')),De('"')))),De('"')),"MultiString",0),De('""'),Je(it,"_"))),it.StringExpr=Ge(Qe(Xe(De('"'),ze(Je(it,"STRING_CONTENT")),De('"')),"String",0),Je(it,"_")),it.CharExpr=Ge(Qe(Xe(De("'"),ze(Je(it,"CHAR_CONTENT")),De("'")),"Char",0),Je(it,"_")),it.STRING_CONTENT=Ze(Je(it,"ESCAPE"),Ge(He(Ve('"\n\\',[])),Re())),it.CHAR_CONTENT=Ze(Je(it,"ESCAPE"),Ge(He(Ve("'\n\\",[])),Re())),it.ESCAPE=Ye(Ge(De("\\"),Ve("'\"\\bfnrt",[])),Ke(De("\\"),Ve("",["03"]),Ve("",["07"]),Ve("",["07"])),Xe(De("\\"),Ve("",["07"]),Ve("",["07"])),Ge(De("\\"),Ve("",["07"])),Ke(De("\\"),Ve("uU",[]),Je(it,"HEX"),Je(it,"HEX"),Je(it,"HEX"),Je(it,"HEX"))),it.IntExpr=Ge(Qe(Ye(Je(it,"DECIMAL"),Je(it,"HEXADECIMAL"),Je(it,"BINARY"),Je(it,"OCTAL")),"Int",0),Je(it,"_")),it.DECIMAL=Ze(Ge(De("0"),He(Ve("bBxX_",["09"]))),Ge(Ve("",["19"]),ze(Ge(ze(De("_")),Je(it,"DIGIT"))))),it.HEXADECIMAL=Ke(De("0"),Ve("xX",[]),Je(it,"HEX"),ze(Ge(ze(De("_")),Je(it,"HEX")))),it.BINARY=Ke(De("0"),Ve("bB",[]),Ve("01",[]),ze(Ge(ze(De("_")),Ve("01",[])))),it.OCTAL=Ge(De("0"),ze(Ge(ze(De("_")),Ve("",["07"])))),it.DIGIT=Ve("",["09"]),it.HEX=Ve("",["af","AF","09"]),it.LONG_SUFFIX=Ve("lL",[]),it.FloatExpr=Ge(Qe(Je(it,"FLOAT"),"Double",0),Je(it,"_")),it.FLOAT=Ze(Ge(Je(it,"FRACTION"),qe(Je(it,"EXPONENT"))),Ge(We(Je(it,"DIGIT")),Je(it,"EXPONENT"))),it.FRACTION=Ze(Ke(He(De("_")),ze(Ge(ze(De("_")),Je(it,"DIGIT"))),De("."),Je(it,"DIGIT"),ze(Ge(ze(De("_")),Je(it,"DIGIT")))),Ke(Je(it,"DIGIT"),ze(Ge(ze(De("_")),Je(it,"DIGIT"))),De("."),He(De(".")))),it.EXPONENT=Ke(Ve("eE",[]),qe(Ve("+-",[])),Je(it,"DIGIT"),ze(Ge(ze(De("_")),Je(it,"DIGIT")))),it.Number=Ze(Je(it,"FloatExpr"),Je(it,"IntExpr")),it.TrueExpr=Ge(Qe(Ge(Ve("Tt",[]),De("rue")),"TrueExpr",0),Je(it,"_")),it.FalseExpr=Ge(Qe(Ge(Ve("Ff",[]),De("alse")),"FalseExpr",0),Je(it,"_")),it.NullExpr=Ge(Qe(Ze(De("None"),De("null")),"Null",0),Je(it,"_")),it.EOF=He(Re()),it.NL=Ze(De("\n"),Je(it,"EOF")),it.S=Ve(" \t\u200b\v\r\u3000",[]),it._=ze(Ye(Je(it,"S"),Je(it,"BLOCKCOMMENT"),Je(it,"LINECOMMENT"))),it.__=ze(Ye(Je(it,"S"),De("\n"),Je(it,"BLOCKCOMMENT"),Je(it,"LINECOMMENT"))),it.SPC=We(Ye(Je(it,"S"),Je(it,"BLOCKCOMMENT"),Je(it,"LINECOMMENT"))),it.BLOCKCOMMENT=Ze(Xe(De("/*"),ze(Ge(He(De("*/")),Re())),De("*/")),Xe(De("(*"),ze(Ge(He(De("*)")),Re())),De("*)"))),it.LINECOMMENT=Ge(De("#"),ze(Ge(He(Je(it,"NL")),Re()))),it.EOL=Xe(Je(it,"_"),Je(it,"NL"),ze(Ge(Je(it,"_"),Je(it,"NL")))),it.INDENT=Ge(De("\n"),We(Ve(" \t",[]))),it.C=Ye(Je(it,"HIRA"),Je(it,"KATA"),Je(it,"KANJI"),Je(it,"MARK"),Ve("",["\uff41\uff5a","\uff21\uff3a","\uff10\uff19"])),it.HIRA=Ve("",["\u3041\u3093"]),it.KATA=Ve("",["\u30a1\u30f6"]),it.KANJI=Ve("\u3005\u3007\u303b\u30fc",["\u3400\u4db5","\u4e00\u9fa0"]),it.MARK=De("\u30fc"),it['"{"']=Ge(Ve("{\uff5b",[]),Je(it,"__")),it['"}"']=Ge(Ve("}\uff5d",[]),Je(it,"_")),it['"["']=Ge(Ve("[\uff3b\u3010",[]),Je(it,"__")),it['"]"']=Ge(Ve("]\uff3d\u3011",[]),Je(it,"_")),it['"("']=Ge(Ve("(\uff08",[]),Je(it,"__")),it['")"']=Ge(Ve(")\uff09",[]),Je(it,"_")),it['"="']=Xe(Ve("=\uff1d",[]),He(Ve("=\uff1d",[])),Je(it,"_")),it['"."']=Ge(Ve(".\uff0e\u3002",[]),Je(it,"_")),it['","']=Ge(Ve(",\u3001",[]),Je(it,"_")),it['";"']=We(Ge(Ve(";\uff1b",[]),Je(it,"_"))),it['":"']=Ge(Ve(":\uff1a",[]),Je(it,"_"))),it[e]),ct="\t",lt="";class ut{constructor(e){this.code=void 0,this.code=e}isOptional(){return this.code!==lt}getValue(){return this.code}toString(){return"?"}rtype(){return this}psize(){return 0}ptype(e){return this}accept(e,t){return!1}realType(){return this}isPattern(){return!1}hasAlpha(){return!1}toVarType(e){return this}}class pt extends ut{constructor(e,t){super(t),this.name=void 0,this.name=e}toString(){return this.name}accept(e,t){const n=e.realType();return n instanceof pt?this.name===n.name:n instanceof Rt&&n.must(this,t)}isPattern(){return"a"===this.name||"b"===this.name}hasAlpha(){return"a"===this.name||"b"===this.name}toVarType(e){if(this.hasAlpha()){return void 0===e[this.name]&&(e[this.name]=new Rt(e.env,e.t)),e[this.name]}return this}}class dt extends pt{constructor(){super("void",lt)}accept(e,t){const n=e.realType();return n instanceof Rt&&n.must(this,t),!0}}class ht extends ut{constructor(...e){super(lt),this.types=void 0,this.types=e}toString(){const e=["("];for(var t=1;t<this.types.length;t+=1)t>1&&e.push(","),e.push(this.types[t].toString());return e.push(")->"),e.push(this.types[0].toString()),e.join("")}rtype(){return this.types[0]}psize(){return this.types.length-1}ptype(e){return this.types[e+1]}accept(e,t){const n=e.realType();if(n instanceof ht&&this.psize()==n.psize())for(var r=0;r<this.types.length;r+=1)return!!this.types[r].accept(n.types[r],t);return n instanceof Rt&&n.must(this,t)}isPattern(){for(const e of this.types)if(e.isPattern())return!0;return!1}hasAlpha(){for(const e of this.types)if(e.hasAlpha())return!0;return!1}toVarType(e){if(this.hasAlpha()){const t=[];for(const n of this.types)t.push(n.toVarType(e));return new ht(...t)}return this}}class ft extends ut{constructor(e,t=lt){super(t),this.param=void 0,this.param=e}toString(){return"List[".concat(this.param.toString(),"]")}psize(){return 1}ptype(e){return this.param}realType(){const e=this.param.realType();return e!==this.param?new ft(e,this.code):this}accept(e,t){const n=e.realType();return n instanceof ft?this.param==bt||this.param.accept(n.param,t):n instanceof Rt&&n.must(this,t)}isPattern(){return this.param.isPattern()}hasAlpha(){return this.param.hasAlpha()}toVarType(e){return this.hasAlpha()?new ft(this.param.toVarType(e)):this}}class mt extends ut{constructor(...e){super(lt),this.types=void 0,this.types=e}toString(){const e=[];for(var t=0;t<this.types.length;t+=1)t>0&&e.push("|"),e.push(this.types[t].toString());return e.join("")}psize(){return this.types.length}ptype(e){return this.types[e]}accept(e,t){for(const n of this.types)if(n.accept(e,!1))return!0;return console.log("FAIL ".concat(e," ").concat(this.toString())),!1}isPattern(){return!0}hasAlpha(){for(const e of this.types)if(e.hasAlpha())return!0;return!1}toVarType(e){if(this.hasAlpha()){const t=[];for(const n of this.types)t.push(n.toVarType(e));return new mt(...t)}return this}}const yt=(...e)=>1===e.length?e[0]:new mt(...e),bt=new class extends pt{constructor(e){super("any",e)}accept(e,t){return!(e.realType()instanceof dt)}isPattern(){return!0}hasAlpha(){return!0}toVarType(e){return new Rt(e.env,e.t)}}(lt),gt=new dt,vt=new pt("bool",lt),_t=new pt("number",lt),Et=new pt("number","undefined"),wt=_t,St=new pt("number","0"),Nt=(new pt("number","1"),new pt("number","0.0")),xt=new pt("string",lt),Tt=new pt("string","''"),Ot=new pt("a",lt),kt=new ft(Ot,lt),It=new ft(_t,lt),At=new ft(bt,lt),Ct=yt(At,xt),Pt=new pt("Object",lt),Lt=new pt("Vec",lt),jt=new pt("Vec","lib.vec(0,0)"),Mt=[],Ft=(e,t,n)=>{const r=[];for(const s of e)-1===r.indexOf(s)&&r.push(s);for(const s of t)-1===r.indexOf(s)&&r.push(s);if(void 0!==n)for(const s of n)-1===r.indexOf(s)&&r.push(s);return r};class Rt extends ut{constructor(e,t){super(lt),this.varMap=void 0,this.varid=void 0,this.ref=void 0,this.varMap=e.getroot("@varmap"),this.varid=this.varMap.length,this.varMap.push(Mt),this.ref=t}toString(){const e=this.varMap[this.varid];return e instanceof ut?e.toString():"any"}realType(){const e=this.varMap[this.varid];return e instanceof ut?e:this}accept(e,t){var n=this.varMap[this.varid];return n instanceof ut&&n!==this?n.accept(e,t):this.must(e.realType(),t)}must(e,t){const n=e.realType();if(t){if(n instanceof Rt){if(n.varid===this.varid)return!0;const e=Ft(this.varMap[this.varid],this.varMap[n.varid],[n.varid,this.varid]);for(const t of e)this.varMap[t]=e;return!0}if(!n.isPattern()){const e=this.varMap[this.varid];for(const t of e)this.varMap[t]=n;this.varMap[this.varid]=n}}return!0}hasAlpha(){return!1}}class Dt extends ut{constructor(e){super(JSON.stringify(e)),this.options=void 0,this.options=e}toString(){return this.code}accept(e){return e.realType()instanceof Dt}equals(e,t){return this.accept(e)}isPattern(){return!1}hasAlpha(){return!1}toVarType(e){return this}}class Bt{constructor(e,t,n){this.code=void 0,this.ty=void 0,this.isMatter=!1,this.isMutable=!1,this.code=e,this.ty=t.realType(),void 0!==n&&(this.isMatter=void 0!==n.isMatter&&n.isMatter,this.isMutable=void 0!=n.isMutable&&n.isMutable)}isGlobal(){return 0==this.code.indexOf("vars[")}}new mt(xt,_t);const Vt=new Dt({}),zt=new ht(wt,wt),Wt=new ht(wt,wt,wt),Ut=new ht(Pt,_t,_t,Vt),Ht={pi:new Bt("3.14159",wt),sin:new Bt("Math.sin",zt),cos:new Bt("Math.cos",zt),tan:new Bt("Math.tan",zt),sqrt:new Bt("Math.sqrt",zt),log:new Bt("Math.log",zt),log10:new Bt("Math.log10",zt),pow:new Bt("Math.pow",Wt),hypot:new Bt("Math.hypot",Wt),gcd:new Bt("puppy.gcd",Wt)},qt={input:new Bt("await puppy.input",new ht(xt,Tt)),print:new Bt("puppy.print",new ht(gt,bt,Vt),{isMatter:!0}),len:new Bt("lib.len",new ht(_t,yt(xt,kt))),range:new Bt("lib.range",new ht(It,_t,Et,Et)),".append":new Bt("lib.append",new ht(gt,kt,Ot)),int:new Bt("lib.int",new ht(_t,yt(vt,xt,_t))),float:new Bt("lib.float",new ht(wt,yt(vt,xt,_t))),str:new Bt("lib.str",new ht(xt,bt))},Kt={math:Ht,random:{random:new Bt("Math.random",new ht(_t))},matterjs:{World:new Bt("puppy.World",Ut,{isMatter:!0}),Circle:new Bt("puppy.Circle",Ut,{isMatter:!0}),Rectangle:new Bt("puppy.Rectangle",Ut,{isMatter:!0}),Polygon:new Bt("puppy.Polygon",Ut,{isMatter:!0}),Label:new Bt("puppy.Label",Ut,{isMatter:!0}),".setPosition":new Bt("lib.setPosition",new ht(gt,Pt,_t,_t)),".applyForce":new Bt("lib.applyForce",new ht(gt,Pt,_t,_t,_t,_t)),".rotate":new Bt("lib.rotate",new ht(gt,Pt,_t,Et,Et)),".scale":new Bt("lib.scale",new ht(gt,Pt,_t,_t,Et,Et)),".setAngle":new Bt("lib.setAngle",new ht(gt,Pt,_t)),".setAngularVelocity":new Bt("lib.setAngularVelocity",new ht(gt,Pt,_t)),".setDensity":new Bt("lib.setDensity",new ht(gt,Pt,_t)),".setMass":new Bt("lib.setMass",new ht(gt,Pt,_t)),".setStatic":new Bt("lib.setStatic",new ht(gt,Pt,vt)),".setVelocity":new Bt("lib.setVelocity",new ht(gt,Pt,_t))}},Gt={};(()=>{for(const e of Object.keys(Kt))for(const t of Object.keys(Kt[e]))Gt[t]=e})();const Xt={width:St,height:St,x:St,y:St,image:Tt,lineWidth:_t,strokeStyle:xt,fillStyle:xt,restitution:Nt,angle:Nt,position:jt,mass:St,density:St,area:St,friction:Nt,frictionStatic:Nt,airFriction:Nt,torque:Nt,stiffness:Nt,isSensor:vt,isStatic:vt,damping:Nt,in:new ht(gt,Pt,Pt),out:new ht(gt,Pt,Pt),over:new ht(gt,Pt,Pt),clicked:new ht(gt,Pt),font:Tt,fontColor:xt,textAlign:xt,value:_t,text:xt},Yt=e=>{if(e.isOptional())return e.getValue();if(e instanceof ft)return"[]";if(e instanceof pt){const t=e.toString();return t===xt.toString()?"''":t===vt.toString()?"false":t===Lt.toString()?"lib.vec(0,0)":"0"}return"undefined"},Zt=yt(_t,xt),Jt={and:"&&",or:"||",not:"!","+=":"+","-=":"-","*=":"*","//=":"//","/=":"/","<<=":"<<",">>=":">>","|=":"|","&=":"&","^=":"^"},$t=e=>{const t=Jt[e];return void 0!==t?t:e},Qt={"+":yt(_t,xt,At),"-":_t,"**":_t,"*":yt(_t,xt,At),"/":_t,"//":_t,"%":_t,"==":bt,"!=":bt,in:bt,"<":Zt,"<=":Zt,">":Zt,">=":Zt,"^":_t,"|":_t,"&":_t,"<<":_t,">>":_t},en=e=>{const t=Qt[e];return void 0===t?(console.log("FIXME undefined '".concat(e,"'")),bt):t},tn=(e,t)=>{if("in"==e)return yt(new ft(t,lt),xt);const n=Qt[e];return n===bt||n===_t||"*"===e?n:t},nn=(e,t,n)=>{const r=Math.min(t+1,e.length);for(var s=1,o=0,i=0;i<r;i+=1)10==e.charCodeAt(i)&&(s+=1,o=0),o+=1;return n.pos=t,n.row=s,n.col=o,n};class rn{constructor(e){this.root=void 0,this.parent=void 0,this.vars=void 0,this.vars={},void 0===e?(this.root=this,this.parent=null,this.vars["@varmap"]=[],this.vars["@logs"]=[],this.vars["@trace"]=[],this.vars["@indent"]=ct):(this.root=e.root,this.parent=e)}get(e,t){for(var n=this;null!==n;){const t=n.vars[e];if(void 0!==t)return t;n=n.parent}return t}has(e){return void 0!==this.get(e)}set(e,t){return this.vars[e]=t,t}getroot(e,t){return this.root.vars[e]||t}setroot(e,t){return this.root.vars[e]=t,t}from_import(e,t){for(const n of Object.keys(e))void 0!==t&&-1===t.indexOf(n)||(this.vars[n]=e[n])}setModule(e,t){this.set(e,new Bt("undefined",new Dt(t)))}isModule(e){const t=this.get(e);return void 0!==t&&"undefined"===t.code&&t.ty instanceof Dt}getModule(e,t){const n=this.get(e);if(void 0!==n&&"undefined"===n.code&&n.ty instanceof Dt){return n.ty.options[t]}}inferSymbolType(e){var t=Xt[e];if(void 0===t){if(void 0===this.get(e))return}return t}perror(e,t){const n=this.root.vars["@logs"];if(void 0===t.type&&(t.type="error"),void 0===t.pos){const n=e.begin();t.pos=n[0],t.row=n[1],t.col=n[2]}void 0===t.len&&(t.len=e.epos-e.spos),n.push(t)}trace(e){const t=this.getroot("@trace"),n=t.length,r=e.begin();return t.push([r[0],r[1],r[2],e.epos-e.spos]),",".concat(n)}setInLoop(){return this.set("@inloop",!0),!0}inLoop(){return!0===this.get("@inloop")}setFunc(e){return this.set("@func",e),e}inFunc(){return void 0!==this.get("@func")}foundFunc(e,t){if(t.isMatter){const t=this.get("@func");if(void 0!==t)t.isMatter=!0;else{const t=nn(e.inputs,e.spos,{type:"",key:""});this.setroot("@yeild",t.row)}}}isUtf8Name(e){for(var t=0;t<e.length;t+=1)if(e.charCodeAt(t)>128)return!0;return!1}local(e){if(this.isUtf8Name(e)){const n=this.getroot("@utf8map");if(void 0===n)return this.setroot("@utf8map",{}),this.local(e);var t=n[name];if(void 0===t){const e=Object.keys(n).length;t="_v".concat(e),n[name]=t}return t}return e}declVar(e,t){var n=this.inFunc()||this.inLoop()?this.local(e):"vars['".concat(e,"']");const r=new Bt(n,t);return r.isMutable=!0,this.set(e,r)}emitAutoYield(e){const t=this.getroot("@yeild");void 0===t||this.inFunc()?e.push("\n"):(e.push("; yield ".concat(t,";\n")),this.setroot("@yeild",void 0))}}class sn{constructor(){}}const on=e=>e instanceof Le?e.subs():[];class an{constructor(){}conv(e,t,n){try{return this[t.tag](e,t,n)}catch(r){if(r instanceof sn)throw r;if(void 0===this[t.tag])return e.perror(t,{type:"error",key:"UndefinedParseTree",subject:t.toString()}),this.skip(e,t,n);throw r}}skip(e,t,n){throw new sn}check(e,t,n,r,s){const o=this.conv(t,n,r);return void 0!==e?e.accept(o,!0)?o:(void 0===s&&(s={key:"TypeError",subject:e.toString()}),s.request=e,s.given=o,t.perror(n,s),this.skip(t,n,r)):o}checkBinary(e,t,n,r,s,o,i,a){return"=="===n||"!="===n?(a.push("".concat(s," ").concat(n,"= ").concat(i)),vt):(r=r.realType(),o=o.realType(),"+"===n?_t.accept(r,!1)&&_t.accept(o,!1)?(a.push("(".concat(s," + ").concat(i,")")),_t):r.accept(o,!0)?(a.push("lib.anyAdd(".concat(s,",").concat(i,")")),r):(e.perror(t,{key:"BinaryTypeError",subject:n,request:r,given:o}),this.skip(e,t,a)):"*"===n?_t.accept(r,!1)&&_t.accept(o,!1)?(a.push("(".concat(s," * ").concat(i,")")),_t):(a.push("lib.anyMul(".concat(s,",").concat(i,")")),r===_t||At.accept(o,!1)?o:(o===_t||At.accept(r,!1),r)):"//"===n?(a.push("((".concat(s,"/").concat(i,")|0)")),_t):"**"===n?(a.push("Math.pow(".concat(s,",").concat(i,")")),_t):r.accept(o,!0)?(a.push("(".concat(s," ").concat(n," ").concat(i,")")),Qt[n]===Zt?vt:r):(e.perror(t,{key:"BinaryTypeError",subject:n,request:r,given:o}),this.skip(e,t,a)))}err(e,t,n){return e.perror(t,{type:"error",key:"SyntaxError"}),gt}FromDecl(e,t,n){const r=t.tokenize("name"),s=Kt[r];return void 0===s?(e.perror(t.get("name"),{type:"warning",key:"UnknownPackageName"}),gt):(e.from_import(s),gt)}ImportDecl(e,t,n){const r=t.tokenize("name"),s=t.tokenize("alias",r),o=Kt[r];return void 0===o?(e.perror(t.get("name"),{type:"warning",key:"UnknownPackageName"}),gt):(e.setModule(s,o),gt)}Source(e,t,n){for(const s of on(t))try{const t=[];t.push(e.get("@indent")),this.conv(e,s,t),e.emitAutoYield(t),n.push(t.join(""))}catch(r){if(!(r instanceof sn))throw r}return gt}Block(e,t,n){const r=e.get("@indent"),s=ct+r,o=new rn(e);o.set("@indent",s),n.push("{\n");for(const i of on(t))n.push(o.get("@indent")),this.conv(o,i,n),o.emitAutoYield(n);return n.push(r+"}"),gt}IfExpr(e,t,n){n.push("(("),this.check(vt,e,t.cond,n),n.push(") ? (");const r=this.conv(e,t.then,n);return n.push(") : ("),this.check(r,e,t.else,n),n.push("))"),r}IfStmt(e,t,n){if(n.push("if ("),this.check(vt,e,t.cond,n),n.push(") "),this.conv(e,t.then,n),void 0!==t.elif)for(const r of on(t.elif))this.conv(e,r,n);return void 0!==t.else&&(n.push("else "),this.conv(e,t.else,n)),gt}ElifStmt(e,t,n){return n.push("else if ("),this.check(vt,e,t.cond,n),n.push(") "),this.conv(e,t.then,n),gt}ForStmt(e,t,n){const r=t.each.tokenize(),s=new Rt(e,t.each);n.push("for (let ".concat(r," of ")),this.check(new ft(s),e,t.list,n),n.push(")");const o=new rn(e);return o.setInLoop(),o.declVar(r,s),this.conv(o,t.body,n),gt}FuncDecl(e,t,n){const r=t.tokenize("name"),s=[new Rt(e,t.name)],o=[],i=new rn(e),a=i.setFunc({name:r,return:s[0],hasReturn:!1,isMatter:!1});for(const p of on(t.params)){const t=p.tokenize("name"),n=new Rt(e,p.name),r=i.declVar(t,n);o.push(r.code),s.push(n)}const c=new ht(...s),l=e.declVar(r,c),u=l.isGlobal()?"":"var ";return n.push("".concat(u).concat(l.code," = (").concat(o.join(", "),") => ")),this.conv(i,t.body,n),l.isMatter=a.isMatter,a.hasReturn||s[0].accept(gt,!0),console.log("DEFINED ".concat(r," :: ").concat(c)),gt}FuncExpr(e,t,n){const r=[new Rt(e,t)],s=[],o=new rn(e),i=o.setFunc({return:r[0],hasReturn:!1});for(const c of on(t.params)){const t=c.tokenize("name"),n=new Rt(e,c.name),i=o.declVar(t,n);s.push(i.code),r.push(n)}const a=new ht(...r);return n.push("(".concat(s.join(", "),") => ")),this.conv(o,t.body,n),i.hasReturn||r[0].accept(gt,!0),a}Return(e,t,n){if(!e.inFunc())return e.perror(t,{type:"warning",key:"OnlyInFunction",subject:"return"}),gt;const r=e.get("@func");return r.hasReturn=!0,void 0!==t.expr?(n.push("return "),this.check(r.return,e,t.expr,n)):n.push("return"),gt}Continue(e,t,n){return e.inLoop()?(n.push("continue"),gt):(e.perror(t,{type:"warning",key:"OnlyInLoop",subject:"continue"}),gt)}Break(e,t,n){return e.inLoop()?(n.push("break"),gt):(e.perror(t,{type:"warning",key:"OnlyInLoop",subject:"break"}),gt)}Pass(e,t,n){return gt}VarDecl(e,t,n){const r=t.left;if("Name"===r.tag){const o=r.tokenize();var s=e.get(o);if(void 0===s||e.inFunc()&&s.isGlobal()){const i=new Rt(e,r),a=[];this.check(i,e,t.right,a);const c=(s=e.declVar(o,i)).isGlobal()?"":"var ";return n.push("".concat(c).concat(s.code," = ").concat(a.join(""))),gt}}t.left.tag="Set".concat(t.left.tag);const o=this.conv(e,t.left,n);return n.push(" = "),this.check(o,e,t.right,n),gt}Name(e,t,n){const r=t.tokenize(),s=e.get(r);return void 0===s?(e.perror(t,{type:"error",key:"UndefinedName",subject:r}),this.skip(e,t,n)):(n.push(s.code),s.ty)}SetName(e,t,n){const r=t.tokenize(),s=e.get(r);return void 0===s?(e.perror(t,{type:"error",key:"UndefinedName",subject:r}),this.skip(e,t,n)):s.isMutable?(n.push(s.code),s.ty):(e.perror(t,{type:"error",key:"Immutable",subject:r}),this.skip(e,t,n))}And(e,t,n){return this.check(vt,e,t.left,n),n.push(" && "),this.check(vt,e,t.right,n),vt}Or(e,t,n){return this.check(vt,e,t.left,n),n.push(" || "),this.check(vt,e,t.right,n),vt}Not(e,t,n){return n.push("!("),this.check(vt,e,t[0],n),n.push(")"),vt}Infix(e,t,n){const r=$t(t.tokenize("name")),s=[],o=[],i=this.check(en(r),e,t.left,s),a=this.check(tn(r,i),e,t.right,o);return this.checkBinary(e,t,r,i,s.join(""),a,o.join(""),n)}Unary(e,t,n){const r=t.tokenize("name");return"!"===r||"not"===r?(n.push("".concat(r,"(")),this.check(vt,e,t.expr,n),n.push(")"),vt):(n.push("".concat(r,"(")),this.check(_t,e,t.expr,n),n.push(")"),_t)}ApplyExpr(e,t,n){const r=t.tokenize("name"),s=e.get(r);if(void 0===s){const s=Gt[r];if(void 0!==s)return console.log("importing ".concat(s," ...")),e.from_import(Kt[s]),e.perror(t.name,{type:"info",key:"InferredPackage",subject:s,code:"from ".concat(s," import *")}),this.ApplySymbolExpr(e,t,e.get(r),void 0,n)}return this.ApplySymbolExpr(e,t,s,void 0,n)}ApplySymbolExpr(e,t,n,r,s){if(void 0===n)return e.perror(t.name,{type:"error",key:"UnknownName",subject:t.name.tokenize()}),this.skip(e,t,s);s.push(n.code),s.push("(");const o=t.params.subs();void 0!==r&&o.unshift(r);var i=n.ty;if(!(i instanceof ht))return e.perror(t.name,{type:"error",key:"NotFunction",subject:t.name.tokenize()}),this.skip(e,t,s);i.hasAlpha()&&(i=i.toVarType({env:e,ref:t}));for(var a=0;a<o.length;a+=1){if(!(a<i.psize())){e.perror(o[a],{type:"warning",key:"TooManyArguments",subject:o[a]});break}a>0&&s.push(",");const t=i.ptype(a);this.check(t,e,o[a],s)}return o.length<i.psize()&&(i.ptype(o.length)||e.perror(t.name,nn(t.inputs,t.params.epos,{type:"error",key:"RequiredArguments"}))),s.push(")"),e.foundFunc(t,n),i.rtype()}MethodExpr(e,t,n){const r=t.tokenize("recv");if(e.isModule(r)){const s=e.getModule(r,t.tokenize("name"));return this.ApplySymbolExpr(e,t,s,void 0,n)}const s=".".concat(t.tokenize("name")),o=e.get(s);return this.ApplySymbolExpr(e,t,o,t.recv,n)}SelfAssign(e,t,n){const r=t.left.tag;return t.left.tag="Set".concat(r),this.conv(e,t.left,n),n.push(" = "),t.left.tag=r,this.Infix(e,t,n),gt}GetExpr(e,t,n){const r=t.tokenize("recv");if(e.isModule(r)){const s=e.getModule(r,t.tokenize("name"));return n.push(s.code),s.ty}n.push("lib.get("),this.check(Pt,e,t.recv,n);const s=t.tokenize("name"),o=e.inferSymbolType(s);if(void 0===o)return e.perror(t.name,{key:"UnknownName",subject:s}),this.skip(e,t,n);const i=Yt(o);return n.push(",'".concat(s,"',").concat(i).concat(e.trace(t.name),")")),o}SetGetExpr(e,t,n){const r=t.tokenize("recv");if(e.isModule(r))return e.perror(t,{type:"error",key:"Immutable",subject:t.tokenize()}),this.skip(e,t,n);const s=t.tokenize("name");this.check(Pt,e,t.recv,n),n.push(".".concat(s));const o=Xt[s]||new Rt(e,t.name);return o instanceof mt?o.ptype(0):o}IndexExpr(e,t,n){n.push("lib.index(");const r=this.check(yt(new ft(new Rt(e,t)),xt),e,t.recv,n);return n.push(","),this.check(_t,e,t.index,n),n.push("".concat(e.trace(t.index),")")),r instanceof ft?r.ptype(0):r}SetIndexExpr(e,t,n){const r=this.check(At,e,t.recv,n);return n.push("["),this.check(_t,e,t.index,n),n.push("]"),r instanceof ft?r.ptype(0):r}Slice(e,t,n){n.push("lib.slice(");const r=this.check(Ct,e,t.recv,n);n.push(",");const s=t.left;void 0===s?n.push("0"):this.check(_t,e,s,n),n.push(",");const o=t.right;return void 0===o?n.push("undefined"):this.check(_t,e,o,n),n.push("".concat(e.trace(t),")")),r}Data(e,t,n){n.push("{");for(const r of on(t))this.conv(e,r,n),n.push(",");return n.push("}"),Vt}KeyValue(e,t,n){const r=t.tokenize("name");if("Name"===t.name.tag){n.push("'".concat(r,"': "));const s=e.inferSymbolType(r);return void 0===s&&e.perror(t.name,{type:"warning",key:"UnknownName",subject:r,fix:"EncloseQuote"}),this.check(s,e,t.value,n),s}return n.push("".concat(r,": ")),this.conv(e,t.value,n),gt}Tuple(e,t,n){const r=on(t);if(r.length>2)return e.perror(t,{type:"warning",key:"SyntaxError",fix:"EncloseBrace"}),this.List(e,t,n);if(1==r.length){n.push("(");const t=this.conv(e,r[0],n);return n.push(")"),t}return n.push("lib.vec("),this.check(_t,e,r[0],n),n.push(","),this.check(_t,e,r[1],n),n.push(")"),Lt}List(e,t,n){var r=new Rt(e,t);n.push("[");for(const s of on(t))r=this.check(r,e,s,n,{type:"error",key:"AllTypeAsSame"}),n.push(",");return n.push("]"),new ft(r)}Format(e,t,n){var r=0;n.push("(");for(const s of on(t)){if(r>0&&n.push("+"),"StringPart"===s.tag)n.push("'".concat(s.tokenize(),"'"));else{const t=[];this.conv(e,s,t)===xt?n.push(t.join("")):n.push("lib.str(".concat(t.join(""),")"))}r++}return n.push(")"),xt}TrueExpr(e,t,n){return n.push("true"),vt}FalseExpr(e,t,n){return n.push("false"),vt}Int(e,t,n){return n.push(t.tokenize()),_t}Float(e,t,n){return n.push(t.tokenize()),wt}Double(e,t,n){return n.push(t.tokenize()),wt}String(e,t,n){return n.push(t.tokenize()),xt}Char(e,t,n){return n.push(t.tokenize()),xt}MultiString(e,t,n){return n.push(JSON.stringify(JSON.parse(t.tokenize()))),xt}}const cn=ot("Source"),ln=e=>{const t=cn(e),n=new rn;n.from_import(qt);const r=[];return(new an).conv(n,t,r),console.log(n.get("@logs")),r.join("")},un=e=>{const t=cn(e.source),n=new rn;n.from_import(qt);const r=[];(new an).conv(n,t,r);const s=r.join(""),o="\nreturn {\n  main: async function*(puppy) {\n\tconst lib = puppy.lib;\n\tconst vars = puppy.vars;\n".concat(s,"\n  },\n}");var i={};try{i=new Function(o)()}catch(a){n.perror(t,{type:"error",key:"CompileError",subject:a.toString()})}return i.world={},i.tree=t,i.code=s,i.errors=n.get("@logs"),i};console.log(ln('\nfrom matterjs import *\nWorld(1600, 900, background="white")\n\nRectangle(800, 900, width=1600, height=100, isStatic=true)\nfor x in range(100, 701, 100):\n  Rectangle(x*1.5, 100, width=40, height=300)\n\nRectangle(100, 200, width=200, height=200)\n')),console.log(ln("\n{\n  'hoge': 1,\n  hogo: 2\n}\n")),console.log(ln("\nv = (1,2)\n"));const pn=(e,t)=>{let n=0;const r=[];for(const s of t.errors)"error"===s.type&&(n+=1),"info"!==s.type&&r.push(s);return e((e=>({type:E.SET_MARKER,payload:{markers:e.map(e=>({severity:N(e.type),startLineNumber:e.row+1,startColumn:e.col,endLineNumber:e.row+1,endColumn:e.col+e.len,message:g[e.key](e)}))}}))(r)),0===n?(e(x("vs")),!1):(e(x("error")),!0)};let dn=null;const hn=e=>(t,n,r,s=!1,o=!1)=>{const i=un({source:n});return console.log(i),pn(e,i)||(dn&&dn.dispose(),dn=((e,t,n,r=!1)=>{if(null!=e&&!n&&t&&e.isRunning(),t){null!=e&&e.dispose();const n=new we(Se,t,r);return n.runCode(),n}return null})(t,i,r,s),e((e=>({type:M.SET_PUPPY,payload:{puppy:e}}))(dn))),dn},fn=e=>fetch(e,{method:"GET"}).then(e=>{if(e.ok)return e.text();throw new Error(e.statusText)}).then(e=>e),mn=e=>t=>fn("".concat("/LIVE2019","/course/").concat(t,"/setting.json")).then(e=>JSON.parse(e)).then(t=>{e(P(t))}).catch(e=>{console.log("ERR ".concat(e))}),yn=e=>(t,n)=>fn("".concat("/LIVE2019","/course/").concat(t,"/").concat(n,"/index.md")).then(t=>e(C(t))),bn=e=>(t,n,r,s)=>{const o=window.sessionStorage.getItem("".concat("/LIVE2019","/course/").concat(n,"/").concat(s,"/sample.py"));o?(e(w(o)),hn(e)(t,o,!1)):fn("".concat("/LIVE2019","/course/").concat(n,"/").concat(s,"/sample.py")).then(n=>{e(w(n)),hn(e)(t,n,!1)})},gn=async e=>{return Pe.dispatch(H(!0)),Pe.dispatch((e=>({type:V.SET_PLACEHOLDER,payload:{placeholder:e}}))(e)),await(e=>new Promise(t=>{e.addEventListener("submit",t,{once:!0})}))(document.getElementById("puppy-input-form")),Pe.getState().input.value},vn=()=>Pe.getState().puppy.isLive,_n=()=>{const e=Pe.getState().editor.diffStartLineNumber;return null===e?0:e},En=(e,t)=>{const n=Pe.getState().editor.codeEditor,r=Pe.getState().editor.decoration;Pe.dispatch(S(n.deltaDecorations(r,[{range:new b.Range(e,1,t,1),options:{isWholeLine:!0,className:"code-highlight"}}])))},wn=()=>{const e=Pe.getState().editor.codeEditor,t=Pe.getState().editor.decoration;Pe.dispatch(S(e.deltaDecorations(t,[])))},Sn=e=>()=>{const t={},n=[];["Puppy","PuppyCourse","LIVE2019"].forEach(e=>{n.push(fn("".concat("/LIVE2019","/course/").concat(e,"/setting.json")).then(e=>JSON.parse(e)).then(n=>{t[e]=n}))}),Promise.all(n).then(()=>e((e=>({type:O.SET_COURSES,payload:{courses:e}}))(t)))};var Nn=Object(a.b)(e=>({course:e.course.course,courses:e.course.courses}),e=>({fetchCourses:Sn(e),setShow:t=>e(Oe(t))}))(m),xn=n(303),Tn=n.n(xn),On=(n(409),n(302)),kn=n(435),In=n(129),An=n(120),Cn="/Users/shonanking/lab/project/LIVE2019/src/components/Editor/Editor.tsx";b.editor.defineTheme("error",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#ffEEEE"}}),b.languages.registerCompletionItemProvider("python",{provideCompletionItems:(e,t,n,r)=>{const s=e.getWordUntilPosition(t),o=new b.Range(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn),i=[];return["pi","sin","cos","tan","sqrt","log","log10","pow","hypot","gcd"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Function,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["input","print","len","range","int","float","str"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Function,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["random"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Function,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["World","Circle","Rectangle","Polygon","Label"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Constructor,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["width","height","isStatic","restitution","fillStyle","image","strokeStyle","lineWidth"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Property,insertText:"".concat(e,"="),range:o})}),{suggestions:i}}});const Pn=e=>{return s.a.createElement("div",{id:"editor-footer",__source:{fileName:Cn,lineNumber:180},__self:void 0},s.a.createElement(On.a,{onClick:()=>e.setIsLive(!e.isLive),__source:{fileName:Cn,lineNumber:181},__self:void 0},e.isLive?s.a.createElement(kn.a,{animation:"grow",variant:"light",size:"sm",__source:{fileName:Cn,lineNumber:183},__self:void 0}):s.a.createElement(In.a,{icon:An.g,__source:{fileName:Cn,lineNumber:185},__self:void 0})," LIVE"),s.a.createElement(On.a,{onClick:()=>{e.setFontSize(e.fontSize+3)},__source:{fileName:Cn,lineNumber:189},__self:void 0},s.a.createElement(In.a,{icon:An.h,__source:{fileName:Cn,lineNumber:190},__self:void 0})),s.a.createElement(On.a,{onClick:()=>{e.setFontSize(Math.max(12,e.fontSize-3))},__source:{fileName:Cn,lineNumber:192},__self:void 0},s.a.createElement(In.a,{icon:An.f,__source:{fileName:Cn,lineNumber:193},__self:void 0})))};let Ln,jn,Mn;var Fn=e=>{const t={selectOnLineNumbers:!0,fontSize:e.fontSize,wordWrap:"on",lightbulb:{enabled:!0}};addEventListener("resize",()=>{clearTimeout(Ln),Ln=setTimeout(function(){e.setSize(document.getElementById("right-col").clientWidth,document.getElementById("right-col").clientHeight)},300)}),Object(r.useEffect)(()=>{e.setSize(document.getElementById("right-col").clientWidth,document.getElementById("right-col").clientHeight)},[]);"piyo".startsWith("hoge");return s.a.createElement("div",{id:"puppy-editor",__source:{fileName:Cn,lineNumber:329},__self:void 0},s.a.createElement(Tn.a,{width:e.width,height:e.height,language:"python",theme:e.theme,value:e.code,options:t,onChange:(t,n)=>{let r=e.diffStartLineNumber;n.changes.map(e=>{r=null===r?e.range.startLineNumber:Math.min(r,e.range.startLineNumber)}),null!==r&&e.setDiffStartLineNumber(r),e.setCode(t),e.codeEditor&&(t=>{const n=t.getModel().findMatches("[\uff01\u3000\u201d\uff03\uff04\uff05\uff06\u2019\uff08\uff09\uff0a\uff0b\uff0c\uff0d\uff0e\uff0f\uff1a\uff1b\uff1c\uff1d\uff1e\uff1f\uff20\uff3b\uff3c\uffe5\uff3d\uff3e\uff3f\u2018\uff5b\uff5c\uff5d\uff5e\uffe3\uff21\uff22\uff23\uff24\uff25\uff26\uff27\uff28\uff29\uff2a\uff2b\uff2c\uff2d\uff2e\uff2f\uff30\uff31\uff32\uff33\uff34\uff35\uff36\uff37\uff38\uff39\uff3a\uff41\uff42\uff43\uff44\uff45\uff46\uff47\uff48\uff49\uff4a\uff4b\uff4c\uff4d\uff4e\uff4f\uff50\uff51\uff52\uff53\uff54\uff55\uff56\uff57\uff58\uff59\uff5a\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19\uff10\uff61\uff62\uff63\uff64\uff65\uff66\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff71\uff72\uff73\uff74\uff75\uff76\uff77\uff78\uff79\uff7a\uff7b\uff7c\uff7d\uff7e\uff7f\uff80\uff81\uff82\uff83\uff84\uff85\uff86\uff87\uff88\uff89\uff8a\uff8b\uff8c\uff8d\uff89\uff8f\uff90\uff91\uff92\uff93\uff94\uff95\uff96\uff97\uff98\uff99\uff9a\uff9b\uff9c\uff9d\uff9e\uff9f]",!0,!0,!1,null,!1).map(e=>({range:e.range,options:{inlineClassName:"zenkakuClass"}}));e.setDecoration(t.deltaDecorations(e.decoration,n))})(e.codeEditor),e.isLive&&(jn&&(clearTimeout(jn),jn=null),jn=setTimeout(()=>{(t=>{Mn&&(clearTimeout(Mn),Mn=null),Mn=setTimeout(()=>{t&&t.start(),e.setDiffStartLineNumber(null)},1500)})(e.trancepile(e.puppy,t,!1,!0,!0)),window.sessionStorage.setItem("/api/sample/".concat(e.coursePath,"/").concat(e.page),t)},100))},editorDidMount:t=>{e.setCodeEditor(t)},__source:{fileName:Cn,lineNumber:330},__self:void 0}),s.a.createElement(Pn,{setFontSize:e.setFontSize,fontSize:e.fontSize,setIsLive:e.setIsLive,isLive:e.isLive,__source:{fileName:Cn,lineNumber:340},__self:void 0}))};var Rn=Object(a.b)((e,t)=>({width:e.editor.width,height:e.editor.height,codeEditor:e.editor.codeEditor,decoration:e.editor.decoration,theme:e.editor.theme,fontSize:e.editor.fontSize,code:e.editor.code,diffStartLineNumber:e.editor.diffStartLineNumber,puppy:e.puppy.puppy,isLive:e.puppy.isLive,coursePath:t.coursePath,page:t.page}),e=>({setCode:t=>e(w(t)),setSize:(t,n)=>e(((e,t)=>({type:E.SET_SIZE,payload:{width:e,height:t}}))(t,n)),setCodeEditor:t=>e((e=>({type:E.SET_CODEEDITOR,payload:{codeEditor:e}}))(t)),setDecoration:t=>e(S(t)),setFontSize:t=>e((e=>({type:E.SET_FONTSIZE,payload:{value:e}}))(t)),setDiffStartLineNumber:t=>e((e=>({type:E.SET_DIFFSTARTLINENUMBER,payload:{startLineNumber:e}}))(t)),setIsLive:t=>e((e=>({type:M.SET_ISLIVE,payload:{isLive:e}}))(t)),trancepile:hn(e)}))(Fn),Dn=(n(410),"/Users/shonanking/lab/project/LIVE2019/src/components/PuppyScreen/PuppyScreen.tsx");const Bn=e=>{return s.a.createElement("div",{id:"puppy-footer",__source:{fileName:Dn,lineNumber:43},__self:void 0},s.a.createElement(On.a,{onClick:()=>e.trancepile(e.puppy,e.code,!0),__source:{fileName:Dn,lineNumber:44},__self:void 0},s.a.createElement(In.a,{icon:An.g,__source:{fileName:Dn,lineNumber:45},__self:void 0})," Play"),s.a.createElement(On.a,{onClick:()=>{if(null!=e.puppy){const t=e.puppy.getCanvas();if(t)if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.msRequestFullscreen)t.msRequestFullscreen();else{if(!t.requestFullscreen)return;t.requestFullscreen()}}},__source:{fileName:Dn,lineNumber:48},__self:void 0},s.a.createElement(In.a,{icon:An.e,__source:{fileName:Dn,lineNumber:49},__self:void 0})),s.a.createElement(On.a,{onClick:()=>e.setIsCourseVisible(!e.isCourseVisible),__source:{fileName:Dn,lineNumber:51},__self:void 0},s.a.createElement(In.a,{icon:e.isCourseVisible?An.b:An.a,__source:{fileName:Dn,lineNumber:52},__self:void 0})))};let Vn=null;var zn=e=>(addEventListener("resize",()=>{Vn&&(clearTimeout(Vn),Vn=null),Vn=setTimeout(function(){const t=document.getElementById("puppy-screen").clientWidth,n=document.getElementById("puppy-screen").clientHeight;e.setSize(t,n)},300)}),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"puppy-screen",__source:{fileName:Dn,lineNumber:79},__self:void 0}),s.a.createElement(Bn,{isCourseVisible:e.isCourseVisible,setIsCourseVisible:e.setIsCourseVisible,code:e.code,puppy:e.puppy,trancepile:e.trancepile,__source:{fileName:Dn,lineNumber:80},__self:void 0})));var Wn=Object(a.b)(e=>({isCourseVisible:e.course.visible,code:e.editor.code,puppy:e.puppy.puppy}),e=>({setIsCourseVisible:t=>e(L(t)),setSize:(t,n)=>e(((e,t)=>({type:M.SET_SIZE,payload:{width:e,height:t}}))(t,n)),trancepile:hn(e)}))(zn),Un=n(304),Hn=n(444),qn=(n(411),n(412),"/Users/shonanking/lab/project/LIVE2019/src/components/Course/Course.tsx");var Kn=e=>(Object(r.useEffect)(()=>{0!==e.course.list.length&&(e.fetchContent(e.coursePath,e.course.list[e.page].path),e.fetchSample(e.puppy,e.coursePath,e.page,e.course.list[e.page].path))},[e.page,e.coursePath,e.course]),Object(r.useEffect)(()=>{e.fetchSetting(e.coursePath)},[e.coursePath]),s.a.createElement("div",{id:"puppy-course",style:{visibility:e.visible?"visible":"hidden"},__source:{fileName:qn,lineNumber:57},__self:void 0},s.a.createElement(Hn.a,{className:"course-all",__source:{fileName:qn,lineNumber:61},__self:void 0},s.a.createElement(Hn.a.Header,{className:"course-header",__source:{fileName:qn,lineNumber:62},__self:void 0},s.a.createElement(l.a,{__source:{fileName:qn,lineNumber:63},__self:void 0},s.a.createElement("button",{className:"close-button",onClick:()=>e.setVisible(!1),__source:{fileName:qn,lineNumber:64},__self:void 0},s.a.createElement(In.a,{icon:An.i,__source:{fileName:qn,lineNumber:68},__self:void 0}))),s.a.createElement(l.a,{__source:{fileName:qn,lineNumber:71},__self:void 0},s.a.createElement(u.a,{className:"card-header-left",xs:6,__source:{fileName:qn,lineNumber:72},__self:void 0},e.course.list&&0!==e.course.list.length&&0!==e.page?s.a.createElement("a",{href:"#".concat(e.page-1),__source:{fileName:qn,lineNumber:76},__self:void 0},s.a.createElement(In.a,{icon:An.c,__source:{fileName:qn,lineNumber:77},__self:void 0})," ".concat(e.course.list[e.page-1].title)):null),s.a.createElement(u.a,{className:"card-header-right",xs:6,__source:{fileName:qn,lineNumber:82},__self:void 0},e.course.list&&0!==e.course.list.length&&e.page!==e.course.list.length-1?s.a.createElement("a",{href:"#".concat(e.page+1),__source:{fileName:qn,lineNumber:86},__self:void 0},"".concat(e.course.list[e.page+1].title," "),s.a.createElement(In.a,{icon:An.d,__source:{fileName:qn,lineNumber:88},__self:void 0})):null))),s.a.createElement(Hn.a.Body,{className:"course-body",__source:{fileName:qn,lineNumber:94},__self:void 0},s.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:Un(e.content)},__source:{fileName:qn,lineNumber:95},__self:void 0})))));var Gn=Object(a.b)((e,t)=>({course:e.course.course,puppy:e.puppy.puppy,coursePath:t.coursePath,page:t.page,content:e.course.content,visible:e.course.visible}),e=>({setContent:t=>e(C(t)),setCourse:t=>e(P(t)),setCode:t=>e(w(t)),setVisible:t=>e(L(t)),fetchContent:yn(e),fetchSample:bn(e),fetchSetting:mn(e)}))(Kn),Xn=n(439),Yn=n(440),Zn=n(437),Jn=n(307),$n="/Users/shonanking/lab/project/LIVE2019/src/components/Input/Input.tsx";var Qn=e=>s.a.createElement(Xn.a,{size:"lg",show:e.show,centered:!0,__source:{fileName:$n,lineNumber:19},__self:void 0},s.a.createElement(Xn.a.Body,{__source:{fileName:$n,lineNumber:20},__self:void 0},s.a.createElement(Yn.a,{id:"puppy-input-form",onSubmit:()=>e.setShow(!1),__source:{fileName:$n,lineNumber:21},__self:void 0},s.a.createElement(Zn.a,{className:"mb-3",__source:{fileName:$n,lineNumber:22},__self:void 0},s.a.createElement(Jn.a,{placeholder:e.placeholder,value:e.value,onChange:t=>e.setValue(t.target.value),__source:{fileName:$n,lineNumber:23},__self:void 0}),s.a.createElement(Zn.a.Append,{__source:{fileName:$n,lineNumber:28},__self:void 0},s.a.createElement(On.a,{type:"submit",__source:{fileName:$n,lineNumber:29},__self:void 0},"\u9001\u4fe1\u3059\u308b"))))));var er=Object(a.b)(e=>({show:e.input.show,value:e.input.value,placeholder:e.input.placeholder}),e=>({setShow:t=>e(H(t)),setValue:t=>e((e=>({type:V.SET_VALUE,payload:{value:e}}))(t))}))(Qn),tr="/Users/shonanking/lab/project/LIVE2019/src/components/Version/Version.tsx";var nr=e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(Xn.a,{show:e.show,onHide:()=>e.setShow(!1),__source:{fileName:tr,lineNumber:12},__self:void 0},s.a.createElement(Xn.a.Header,{closeButton:!0,__source:{fileName:tr,lineNumber:13},__self:void 0},s.a.createElement(Xn.a.Title,{__source:{fileName:tr,lineNumber:14},__self:void 0},"Modal heading")),s.a.createElement(Xn.a.Body,{__source:{fileName:tr,lineNumber:16},__self:void 0},"Woohoo, you're reading this text in a modal!"),s.a.createElement(Xn.a.Footer,{__source:{fileName:tr,lineNumber:19},__self:void 0},s.a.createElement(On.a,{variant:"secondary",onClick:()=>e.setShow(!1),__source:{fileName:tr,lineNumber:20},__self:void 0},"Close"),s.a.createElement(On.a,{variant:"primary",onClick:()=>e.setShow(!1),__source:{fileName:tr,lineNumber:23},__self:void 0},"Save Changes"))));var rr=Object(a.b)(e=>({show:e.version.show}),e=>({setShow:t=>e(Oe(t))}))(nr),sr="/Users/shonanking/lab/project/LIVE2019/src/App.tsx";var or=e=>{const t=e.qs.course?e.qs.course:"LIVE2019",n=""!==e.hash?parseInt(e.hash.substr(1)):0;return s.a.createElement("div",{className:"App",__source:{fileName:sr,lineNumber:18},__self:void 0},s.a.createElement(c.a,{className:"container",__source:{fileName:sr,lineNumber:19},__self:void 0},s.a.createElement(Nn,{__source:{fileName:sr,lineNumber:20},__self:void 0}),s.a.createElement(er,{__source:{fileName:sr,lineNumber:21},__self:void 0}),s.a.createElement(rr,{__source:{fileName:sr,lineNumber:22},__self:void 0}),s.a.createElement(l.a,{id:"main-row",__source:{fileName:sr,lineNumber:23},__self:void 0},s.a.createElement(u.a,{id:"left-col",xs:6,__source:{fileName:sr,lineNumber:24},__self:void 0},s.a.createElement(Gn,{coursePath:t,page:n,__source:{fileName:sr,lineNumber:25},__self:void 0}),s.a.createElement(Wn,{__source:{fileName:sr,lineNumber:26},__self:void 0})),s.a.createElement(u.a,{id:"right-col",xs:6,__source:{fileName:sr,lineNumber:28},__self:void 0},s.a.createElement(Rn,{coursePath:t,page:n,__source:{fileName:sr,lineNumber:29},__self:void 0})))))},ir=n(308),ar=n(166),cr="/Users/shonanking/lab/project/LIVE2019/src/index.tsx";const lr=e=>e.substr(1).split("&").reduce((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e},{});i.a.render(s.a.createElement(a.a,{store:Ce,__source:{fileName:cr,lineNumber:24},__self:void 0},s.a.createElement(ir.a,{__source:{fileName:cr,lineNumber:25},__self:void 0},s.a.createElement(ar.a,{render:e=>s.a.createElement(or,{qs:lr(e.location.search),hash:e.location.hash,__source:{fileName:cr,lineNumber:28},__self:void 0}),__source:{fileName:cr,lineNumber:26},__self:void 0}))),document.getElementById("root"))}},[[309,2,3]]]);
//# sourceMappingURL=main.b10ed55f.chunk.js.map