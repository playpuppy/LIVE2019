(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{310:function(e,t,n){e.exports=n(428)},320:function(e,t,n){},321:function(e,t,n){},322:function(e,t,n){},410:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},428:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),o=n(96),i=n.n(o),a=n(109),c=(n(320),n(321),n(440)),l=n(438),u=n(306),p=n(443),d=n(445),h=n(444),f=(n(322),"/Users/shonanking/lab/project/LIVE2019/src/components/Header/Header.tsx");var m=e=>(Object(r.useEffect)(()=>{e.fetchCourses()},[]),s.a.createElement("div",{className:"Header",id:"puppy-header",__source:{fileName:f,lineNumber:18},__self:void 0},s.a.createElement(p.a,{bg:"white",variant:"light",expand:"lg",__source:{fileName:f,lineNumber:19},__self:void 0},s.a.createElement(p.a.Brand,{onClick:()=>e.setShow(!0),__source:{fileName:f,lineNumber:20},__self:void 0},s.a.createElement("img",{src:"./image/logo.png",width:"25",height:"25",className:"d-inline-block align-top",__source:{fileName:f,lineNumber:21},__self:void 0})," Puppy"),s.a.createElement(d.a,{className:"mr-auto",__source:{fileName:f,lineNumber:29},__self:void 0},s.a.createElement(h.a,{title:"Courseware",id:"nav-dropdown-courses",__source:{fileName:f,lineNumber:30},__self:void 0},Object.keys(e.courses).map(t=>{const n=e.courses[t];return s.a.createElement(h.a,{title:n.title,id:"nav-dropdown-pages-".concat(n.title),drop:"right",key:n.title,__source:{fileName:f,lineNumber:34},__self:void 0},n.list.map((e,n)=>s.a.createElement(h.a.Item,{href:"?course=".concat(t,"#").concat(n),key:n,__source:{fileName:f,lineNumber:42},__self:void 0},e.title)))})))))),y=n(142),b=n(81);const g={UndefinedParseTree:e=>"UndefinedParseTree: ".concat(e.subject),TypeError:e=>e.subject?"TypeError: type ".concat(e.subject," or compatible its type is required"):"TypeError: type ".concat(e.given," is not assignable to type ").concat(e.request),BinaryTypeError:e=>"BinaryTypeError: invalid operands to binary expression ".concat(e.subject," (").concat(e.request," and ").concat(e.given,")"),SyntaxError:e=>"SyntaxError",UnknownPackageName:e=>"UnknownPackageName: package not found",OnlyInFunction:e=>"OnlyInFunction: ".concat(e.subject," outside function"),OnlyInLoop:e=>"OnlyInLoop: ".concat(e.subject," outside loop"),UndefinedName:e=>"UndefinedName: use of undeclared identifier ".concat(e.subject),Immutable:e=>"Immutable: ".concat(e.subject," is immutable value"),InferredPackage:e=>"InferredPackage: ".concat(e.subject," imported automatically"),UnknownName:e=>"UnknownName: use of undeclared identifier ".concat(e.subject),NotFunction:e=>"NotFunction: ".concat(e.subject," is not a function"),TooManyArguments:e=>"TooManyArguments: arguments are too many",RequiredArguments:e=>"RequiredArguments: arguments are required",CompileError:e=>"CompileError: ".concat(e.subject)};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E;!function(e){e.SET_SIZE="SET_SIZE",e.SET_CODE="SET_CODE",e.SET_CODEEDITOR="SET_CODEEDITOR",e.SET_FONTSIZE="SET_FONTSIZE",e.SET_DECORATION="SET_DECORATION",e.SET_MARKER="SET_MARKER",e.SET_THEME="SETTHEME",e.SET_DIFFSTARTLINENUMBER="SET_DIFFSTARTLINENUMBER"}(E||(E={}));const w=e=>({type:E.SET_CODE,payload:{code:e}}),S=e=>({type:E.SET_DECORATION,payload:{decoration:e}}),N=e=>{switch(e){case"error":return b.MarkerSeverity.Error;case"info":return b.MarkerSeverity.Info;case"warning":return b.MarkerSeverity.Warning;case"hint":return b.MarkerSeverity.Hint}},x=e=>({type:E.SET_THEME,payload:{theme:e}}),T={width:500,height:500,code:"",codeEditor:null,theme:"vs",fontSize:24,decoration:[],markers:[],diffStartLineNumber:null};var O,k=(e=T,t)=>{switch(t.type){case E.SET_SIZE:return _({},e,{width:t.payload.width,height:t.payload.height});case E.SET_CODE:return _({},e,{code:t.payload.code});case E.SET_CODEEDITOR:return _({},e,{codeEditor:t.payload.codeEditor});case E.SET_FONTSIZE:return _({},e,{fontSize:t.payload.value});case E.SET_DECORATION:return _({},e,{decoration:t.payload.decoration});case E.SET_MARKER:return b.editor.setModelMarkers(e.codeEditor.getModel(),"puppy",t.payload.markers),_({},e,{codeEditor:e.codeEditor,markers:t.payload.markers});case E.SET_THEME:return _({},e,{theme:t.payload.theme});case E.SET_DIFFSTARTLINENUMBER:return _({},e,{diffStartLineNumber:t.payload.startLineNumber});default:return e}};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.SET_CONTENT="SET_CONTENT",e.SET_COURSES="SET_COURCES",e.SET_COURSE="SET_COURSE",e.SET_VISIBLE="SET_VISIBLE"}(O||(O={}));const A=e=>({type:O.SET_CONTENT,payload:{content:e}}),P=e=>({type:O.SET_COURSE,payload:{course:e}}),L=e=>({type:O.SET_VISIBLE,payload:{visible:e}}),j={content:"# Hello World \n\n Rendered by **marked**",courses:{},course:{title:"",list:[]},coursePath:"",page:0,visible:!0};var M,F=(e=j,t)=>{switch(t.type){case O.SET_CONTENT:return C({},e,{content:t.payload.content});case O.SET_COURSES:return C({},e,{courses:t.payload.courses});case O.SET_COURSE:return C({},e,{course:t.payload.course});case O.SET_VISIBLE:return C({},e,{visible:t.payload.visible});default:return e}};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.SET_SIZE="SET_SIZE",e.SET_PUPPY="SET_PUPPY",e.SET_ISLIVE="SET_ISLIVE",e.SET_SHOWTLICON="SET_SHOWTLICON"}(M||(M={}));const B=e=>({type:M.SET_SHOWTLICON,payload:{showTLIcon:e}}),V={width:500,height:500,puppy:null,isLive:!0,showTLIcon:!1};var z,W=(e=V,t)=>{switch(t.type){case M.SET_SIZE:return e.puppy&&e.puppy.resize(t.payload.width,t.payload.height),R({},e,{width:t.payload.width,height:t.payload.height});case M.SET_PUPPY:return R({},e,{puppy:t.payload.puppy});case M.SET_ISLIVE:return R({},e,{isLive:t.payload.isLive});case M.SET_SHOWTLICON:return R({},e,{showTLIcon:t.payload.showTLIcon});default:return e}};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.SET_VALUE="SET_VALUE",e.SET_SHOW="SET_SHOW",e.SET_PLACEHOLDER="SET_PLACEHOLDER"}(z||(z={}));const q=e=>({type:z.SET_SHOW,payload:{show:e}}),K={value:"",show:!1,placeholder:""};var G=(e=K,t)=>{switch(t.type){case z.SET_VALUE:return H({},e,{value:t.payload.value});case z.SET_SHOW:return t.payload.show?{value:"",show:t.payload.show,placeholder:""}:H({},e,{show:t.payload.show});case z.SET_PLACEHOLDER:return H({},e,{placeholder:t.payload.placeholder});default:return e}},X=n(44);const Y=X.Bodies,Z=X.Composite,J=X.Common,$={radius:(e,t,n)=>{t.radius=n,"circle"===t.base&&(t.width=2*n,t.height=2*n)},width:(e,t,n)=>{t.width=n,"circle"===t.base&&(t.radius=n/2,t.height=n)},height:(e,t,n)=>{t.height=n,"circle"===t.base&&(t.radius=n/2,t.width=n)},fillStyle:(e,t,n)=>{t.fillStyle=((e,t)=>{if(Array.isArray(t)&&(t=J.choose(t)),"number"===typeof t){const n=e.world.colorScheme;return n[t%n.length]}return t})(e,n)}},Q=(e,t,n,r)=>(n in $?$[n](e,t,r):t[n]=r,r),ee=(e,t,n,r)=>t[n]?Q(e,t,n,t[n]):r?Q(e,t,n,r):void 0,te=(e,t)=>(Object.assign(t,{base:"circle",visible:!0}),ee(e,t,"height"),ee(e,t,"width"),ee(e,t,"radius",25),ee(e,t,"fillStyle",J.choose(e.world.colorScheme)),Y.circle(t.position.x,t.position.y,t.radius,t)),ne=(e,t)=>(Object.assign(t,{base:"rectangle",visible:!0}),ee(e,t,"width",100),ee(e,t,"height",100),ee(e,t,"fillStyle",t.isStatic?"black":J.choose(e.world.colorScheme)),Y.rectangle(t.position.x,t.position.y,t.width,t.height,t)),re=(e,t)=>{Object.assign(t,{base:"polygon",visible:!0});const n=ee(e,t,"sides",5);return ee(e,t,"height"),ee(e,t,"width"),ee(e,t,"radius",25),Y.polygon(t.position.x,t.position.y,n,t.radius,t)},se=(e,t)=>(Object.assign(t,{base:"rectangle",isSensor:!0,isStatic:!0,visible:!0,collisionFilter:{category:1,mask:0,group:3}}),ee(e,t,"width",10),ee(e,t,"height",10),ee(e,t,"fontColor",J.choose(e.world.colorScheme)),ee(e,t,"fillStyle","rgba(255, 255, 255, 0)"),Y.rectangle(t.position.x,t.position.y,t.width,t.height,t)),oe=(e,t)=>(Object.assign(t,{base:"circle",isSensor:!0,isStatic:!0,visible:!0,collisionFilter:{category:1,mask:0,group:3},created:e.getTimeStamp()}),ee(e,t,"height"),ee(e,t,"width"),ee(e,t,"radius",10),ee(e,t,"fillStyle",0),ee(e,t,"opacity",.8),Y.circle(t.position.x,t.position.y,t.radius,t)),ie=(e,t)=>{const n=ee(e,t,"column",5),r=ee(e,t,"width",e.world.viewWidth/2),s=ee(e,t,"height",e.world.viewWidth/2),o=r/(2*n),i=t.position.x-r/2,a=t.position.y-s/2,c=X.Composite.create({label:"Newtons Cradle"});for(let l=0;l<n;l+=1){const n={visible:!0,fillStyle:J.choose(e.world.colorScheme),inertia:t.interia||1/0,restitution:t.restitution||1,friction:t.friction||0,frictionAir:t.frictionAir||1e-4,slop:t.slop||1},r=X.Bodies.circle(i+l*(1.9*o),a+s,o,n),u=X.Constraint.create({pointA:{x:i+l*(1.9*o),y:a},bodyB:r,render:{visible:!0,lineWidth:1|t.lineWidth,strokeStyle:t.strokeStyle||"gray"}});Z.addBody(c,r),Z.addConstraint(c,u)}return console.log(c),console.log(c.parts),c},ae=e=>(Object.assign(e,{Circle:te,Rectangle:ne,Polygon:re,Label:se,Drop:oe,Pendulum:ie}),e);const ce=X.Common,le={pop:["#de9610","#c93a40","#fff001","#d06d8c","#65ace4","#a0c238","#56a764","#d16b16","#cc528b","#9460a0","#f2cf01","#0074bf"],cute:["#e2b2c0","#fff353","#a5d1f4","#e4ad6d","#d685b0","#dbe159","#7fc2ef","#c4a6ca","#eabf4c","#f9e697","#b3d3ac","#eac7cd"],dynamic:["#b80117","#222584","#00904a","#edc600","#261e1c","#6d1782","#8f253b","#a0c238","#d16b16","#0168b3","#b88b26","#c30068"],gorgeous:["#7d0f80","#b08829","#a03c44","#018a9a","#ab045c","#391d2b","#d5a417","#546474","#0f5ca0","#d0b98d","#d4c91f","#c1541c"],casual:["#7b9ad0","#f8e352","#c8d627","#d5848b","#e5ab47","#e1cea3","#51a1a2","#b1d7e4","#66b7ec","#c08e47","#ae8dbc","#c3cfa9"],psychedelic:["#b7007c","#009b85","#382284","#e2c80f","#009dc6","#c4c829","#95007e","#d685b0","#eee800","#bf5116","#b80e3b","#0178bc"],bright:["#fff001","#cb5393","#a0c238","#d78114","#00a5e7","#cd5638","#0168b3","#d685b0","#00984b","#f2cf01","#6bb6bb","#a563a0"],fairytale:["#cca9ca","#9bcad0","#dd9dbf","#edef9c","#aabade","#f2dae8","#c7ddae","#a199c8","#faede5","#d5a87f","#f7f06e","#95bfe7"],heavy:["#000000","#998c69","#5c002f","#244765","#814523","#5e2a58","#1a653c","#6a6a68","#bf7220","#5f556e","#84762f","#872226"],impact:["#c60019","#fff001","#1d4293","#00984b","#019fe6","#c2007b","#261e1c","#7d0f80","#dc9610","#dbdf19","#d685b0","#a0c238"],street:["#33476a","#211917","#6c7822","#c2007b","#44aeea","#5e3032","#d16b16","#c8d627","#9193a0","#816945","#c50030","#0080c9"],cool:["#b0d7f4","#c0cbe9","#eef0b1","#44aeea","#85beab","#c4a6ca","#f7f06e","#c8d627","#bcccd9","#e4f0fc","#f2dae8","#6490cd"],elegant:["#ae8dbc","#e3b3cd","#d6ddf0","#e5d57d","#82c0cd","#afc7a7","#834e62","#6a9176","#7f7eb8","#a04e90","#dbbc86","#c4c829"],fresh:["#70b062","#c8d85b","#f8e133","#dbdf19","#e3ab30","#dd9dbf","#a979ad","#cd5638","#399548","#6bb6bb","#f7f39c","#9acce3"],warm:["#c59f22","#dd9b9d","#ebcc00","#d6d11d","#8d4f42","#d8836e","#f8e469","#cbb586","#e4aa01","#eac287","#f2d8bf","#a6658d"],soft:["#f8e469","#e7e0aa","#d9de84","#e4bd60","#9ac29f","#e3be87","#edef9c","#dd9b9d","#b2d6d4","#f5dfa6","#ebeddf","#e1d4e6"],man:["#23466e","#4d639f","#dfe0d8","#1d695f","#9aadbe","#844f30","#934e61","#7e9895","#77aad7","#848a96","#a76535","#7e8639"],woman:["#7b0050","#a8006d","#bea620","#a26c54","#949b34","#614983","#cba777","#de9610","#bd8683","#be87a6","#bf5346","#e1d0b4"],boy:["#0168b3","#66b7ec","#afd0ef","#88b83e","#b8b2d6","#6bb6bb","#5e4694","#f2cf01","#c6e2f8","#d5dbcf","#7a8bc3","#e8e6f3"],girl:["#d06da3","#c2d3ed","#be91bc","#c73576","#f8e352","#c8d627","#e3b3cd","#c6e0d5","#e4ab5a","#cb6c58","#845d9e","#82c0cd"],smart:["#4d639f","#356c92","#c9ced1","#dfd4be","#92a1a6","#a67b2d","#bda5bb","#2c4b79","#d6d680","#babea5","#ebc175","#3a614f"],light:["#44aeea","#b4cb32","#b2b6db","#b2d6d4","#ebe9ae","#0080c9","#71b174","#e4c4db","#7da8db","#eac39a","#dbe585","#6db5a9"],stylish:["#58656e","#bac1c7","#487ca3","#dfd4be","#004679","#c0542d","#a44682","#9599b2","#d6d680","#8eb4d9","#6c5776","#499475"],natural:["#ba9648","#87643e","#c2b5d1","#ba7d8c","#b8ac60","#797c85","#f9ebd1","#9cb1c2","#81a47a","#acb130","#8b342a","#acae98"],spring:["#dd9cb4","#eeea55","#ebc061","#b2d6d4","#f2dae8","#c9d744","#b8b2d6","#afd0ef","#d7847e","#f8e352","#b3ce5b","#cbacbe"],summer:["#174e9e","#68b8dd","#d16b16","#88b83e","#f2cf01","#019fe6","#c60019","#019c96","#b0d7f4","#fff001","#0074bf","#c83955"],fall:["#ae3c22","#902342","#c59f22","#7e8639","#eabd00","#a49e2e","#ac5238","#9f832f","#ba7c6f","#875f3b","#bba929","#786b4b"],winter:["#a5aad4","#6591b6","#623d82","#5f897b","#858aa0","#eff3f6","#c2d3dd","#4f616f","#7f7073","#42629f","#674c51","#b38da4"],japan:["#c3003a","#3a546b","#d5a02e","#918d43","#787cac","#604439","#6f2757","#c1541c","#565d63","#afc9ca","#baaa52","#e2b2c0"],euro:["#bf541c","#25a4b7","#e4aa01","#b2bfe1","#ad438e","#1d4293","#b71232","#e8e2be","#b0bf30","#6aa43e","#6276b5","#d7832d"],nordic:["#149bdf","#dbdf19","#c97a2b","#945141","#9abca4","#a5a79a","#e6d9b9","#eabd00","#bf545e","#86b070","#665e51","#b59a4d"],asian:["#946761","#b80040","#4eacb8","#7f1f69","#c8b568","#147472","#1d518b","#b1623b","#95a578","#b9b327","#af508a","#dab100"]},ue=e=>{const t=e in le?le[e]:le[ce.choose(["pop","cute","dynamic","gorgeous","casual","psychedelic","bright","fairytale","heavy","impact","street","cool","elegant","fresh","warm","soft","man","woman","boy","girl","smart","light","stylish","natural","spring","summer","fall","winter","japan","euro","nordic","asian"])],n=document.getElementsByClassName("btn");for(let r=0;r<n.length;r+=1)n[r].style.backgroundColor=t[r%t.length],n[r].style.borderColor=t[r%t.length];return t};class pe{constructor(e,t){this.puppy=void 0,this.Body=void 0,this.Composite=void 0,this.Constraint=void 0,this.puppy=e,this.Body=t.Body,this.Composite=t.Composite,this.Constraint=t.Constraint}int(e,t){if("number"===typeof e)return 0|e;if("string"===typeof e){const n=Number.parseInt(e,t);return Number.isNaN(n)?0:n}return"boolean"===typeof e?e?1:0:0|e}float(e){if("number"===typeof e)return e;if("string"===typeof e){const t=Number.parseFloat(e);return isNaN(t)?0:t}return"boolean"===typeof e?e?1:0:e}str(e){return"number"===typeof e||"string"===typeof e?"".concat(e):"boolean"===typeof e?e?"True":"False":Array.isArray(e)?"["+e.map(e=>this.repr(e)).join(", ")+"]":void 0===e?"undefined":e.x&&e.y?"(".concat(e.x,", ").concat(e.y,")"):e.text?e.text:"{"+Object.keys(e).map(t=>"".concat(t,": ").concat(this.repr(e[t]))).join(", ")+"}"}repr(e){return"string"===typeof e?-1==e.indexOf('"')?'"'.concat(e,'"'):"'".concat(e,"'"):this.str(e)}anyAdd(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):e+t}anyMul(e,t){if("string"===typeof e){let n="";for(let r=0;r<t;r+=1)n+=e;return n}if(Array.isArray(e)){let n=[];for(let r=0;r<t;r+=1)n=n.concat(e);return n}return e*t}anyIn(e,t){return t.indexOf(e)>=0}range(e,t,n){let r=0,s=0,o=1;void 0===t?s=e:void 0!==n?(r=e,s=t,o=0===n?1:n):(r=e,s=t);const i=[];if(r<=s){o<0&&(o=-o);for(let e=r;e<s&&(i.push(e),!(i.length>1e5));e+=o);}else{o>0&&(o=-o);for(let e=r;e>s&&(i.push(e),!(i.length>1e5));e+=o);}return i}get(e,t,n,r){const s=e[t];return void 0===s?n:s}index(e,t,n){return"string"===typeof e?e.charAt((t+e.length)%e.length):Array.isArray(e)?e[(t+e.length)%e.length]:void 0}slice(e,t,n,r){return"string"===typeof e?(void 0==n&&(n=e.length),e.substring(t,n)):Array.isArray(e)?(void 0==n&&(n=e.length),e.slice(t,n)):void 0}find(e,t){return e.indexOf(t)}join(e,t){return t.join(e)}append(e,t){e.push(t)}len(e){return"string"===typeof e||Array.isArray(e.length)?e.length:0}vec(e=0,t=0){return{x:e,y:t}}setPosition(e,t,n){this.Body.setPosition(e,{x:t,y:n})}translate(e,t,n){this.Body.translate(e,{x:t,y:n})}applyForce(e,t,n,r,s){this.Body.applyForce(e,{x:t,y:n},{x:r,y:s})}rotate(e,t,n,r){this.Body.rotate(e,t)}scale(e,t,n,r,s){this.Body.scale(e,t,n)}setAngle(e,t){this.Body.setAngle(e,t)}setVelocity(e,t,n){this.Body.setVelocity(e,{x:t,y:n})}setAngularVelocity(e,t){this.Body.setAngularVelocity(e,t)}setDensity(e,t){this.Body.setDensity(e,t)}setMass(e,t){this.Body.setMass(e,t)}setStatic(e,t){this.Body.setStatic(e,t)}newComosite(e){return this.Composite.create({label:"comosite"})}addBody(e,t){this.Composite.addBody(e,t)}addConstraint(e,t){this.Composite.addConstraint(this.Constraint.create(t))}}const de=X.Engine,he=X.Runner,fe=(e=>{const t=(e,t)=>{let n=e.textures[t];return n||(n=e.textures[t]=new Image,t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:")||t.startsWith("/")?n.src=t:n.src="".concat("/LIVE2019","/image/").concat(t),n)};return e.bodies=function(e,n,r){const s=r,o=e.options,i=o.showInternalEdges||!o.wireframes,a=o.font||"bold 60px 'Arial'",c=o.fontColor||"gray";for(let l=0;l<n.length;l+=1){const r=n[l];if(r.visible)for(let n=r.parts.length>1?1:0;n<r.parts.length;n+=1){const l=r.parts[n];if(l.visible){if(1!==l.opacity&&(s.globalAlpha=l.opacity),l.image){const n=t(e,l.image);s.translate(l.position.x,l.position.y),s.rotate(l.angle),s.drawImage(n,-.5*l.width,-.5*l.height,l.width,l.height),s.rotate(-l.angle),s.translate(-l.position.x,-l.position.y)}else{if(l.circleRadius)s.beginPath(),s.arc(l.position.x,l.position.y,l.circleRadius,0,2*Math.PI);else{s.beginPath(),s.moveTo(l.vertices[0].x,l.vertices[0].y);for(let e=1;e<l.vertices.length;e+=1)!l.vertices[e-1].isInternal||i?s.lineTo(l.vertices[e].x,l.vertices[e].y):s.moveTo(l.vertices[e].x,l.vertices[e].y),l.vertices[e].isInternal&&!i&&s.moveTo(l.vertices[(e+1)%l.vertices.length].x,l.vertices[(e+1)%l.vertices.length].y);s.lineTo(l.vertices[0].x,l.vertices[0].y),s.closePath()}o.wireframes?(s.lineWidth=1,s.strokeStyle="#bbb",s.stroke()):(s.fillStyle=l.fillStyle,l.lineWidth&&(s.lineWidth=l.lineWidth,s.strokeStyle=l.strokeStyle,s.stroke()),s.fill())}void 0!==l.value&&(l.ref&&(l.value=l.ref()),s.save(),s.font=l.font||a,s.fillStyle=l.fontColor||c,s.textAlign=l.textAlign||"center",l.shadowColor&&(s.shadowColor=l.shadowColor,s.shadowBlur=s.shadowBlur||0,s.shadowOffsetX=s.shadowOffsetX||2,s.shadowOffsetY=s.shadowOffsetY||2),s.fillText("".concat(l.value),l.position.x,l.position.y+10),s.restore()),s.globalAlpha=1}}}},e})(X.Render),me=X.Constraint,ye=X.MouseConstraint,be=X.Mouse,ge=X.World,ve=X.Bounds,_e=X.Vertices,Ee=X.Detector,we=X.Common;class Se{constructor(e,t,n=!1){this.settings=void 0,this.code=void 0,this.world=void 0,this.interval=void 0,this.waitRestart=void 0,this.isExecuting=void 0,this.isDisposed=void 0,this.runner=void 0,this.engine=void 0,this.render=void 0,this.canvas=void 0,this.vars=void 0,this.lib=void 0,this.new_=((e,t,n,r)=>{r.position||(r.position={x:t,y:n});const s=e(this,r);return ge.add(this.engine.world,[s]),s}),this.Circle=((e,t,n={})=>this.new_(this.vars.Circle,e,t,n)),this.Rectangle=((e,t,n={})=>this.new_(this.vars.Rectangle,e,t,n)),this.Polygon=((e,t,n={})=>this.new_(this.vars.Polygon,e,t,n)),this.Label=((e,t,n={})=>this.new_(this.vars.Label,e,t,n)),this.World=((e,t,n)=>{if(this.engine&&this.world){this.world.viewWidth=e,this.world.viewHeight=t;const r=this.world.view.min;this.world.view={min:r,max:{x:r.x+e,y:r.y+t}},this.resize(this.render.options.width,this.render.options.height),fe.lookAt(this.render,this.world.view),n&&Object.keys(n).map(e=>{this.world&&e in this.world&&("background"==e&&(this.render.options.background=n.background),this.world[e]=n[e]),this.engine&&e in this.engine.world&&(this.engine.world[e]=n[e])})}}),this.settings=e,this.code=t,this.world=null,this.interval=500,this.waitRestart=n,this.isExecuting=!1,this.isDisposed=!1,this.runner=null,this.engine=null,this.render=null,this.canvas=null,this.vars={},this.lib=new pe(this,{Body:X.Body,Composite:X.Composite,Constraint:X.Constraint})}initCode(){const e=this.code,t=e.world.width||1e3,n=e.world.height||1e3,r=e.world.viewWidth||t,s=e.world.viewHeight||n,o=e.world.position||{x:0,y:0};this.code=e,this.world={width:t,height:n,viewWidth:r,viewHeight:s,background:e.world.background||"white",gravity:e.world.gravitiy||{x:0,y:1},colorScheme:ue(e.world.colorScheme||""),opacity:e.world.opacity||1,font:e.world.font||"bold 60px 'Arial'",view:e.world.view||{min:o,max:{x:o.x+r,y:o.y+s}},density:e.world.density||.001,friction:e.world.friction||.1,airFriction:e.world.airFriction||.01,frictionStatic:e.world.frictionStatic||.5,motion:e.world.motion||0,restitution:e.world.restitution||0}}startCode(){if(this.engine=de.create(),this.world.gravity){const e=this.engine;window.addEventListener("deviceorientation",t=>{const n=window.orientation||0,r=e.world.gravity;0===n?(r.x=we.clamp(t.gamma,-90,90)/90,r.y=we.clamp(t.beta,-90,90)/90):180===n?(r.x=we.clamp(t.gamma,-90,90)/90,r.y=we.clamp(-t.beta,-90,90)/90):90===n?(r.x=we.clamp(t.beta,-90,90)/90,r.y=we.clamp(-t.gamma,-90,90)/90):-90===n&&(r.x=we.clamp(-t.beta,-90,90)/90,r.y=we.clamp(t.gamma,-90,90)/90)})}X.Events.on(this.engine,"beforeUpdate",()=>{const e=this.engine.timing.timestamp;this.settings.eachUpdate&&this.settings.eachUpdate(e);const t=X.Composite.allBodies(this.engine.world);for(let n=0;n<t.length;n+=1){const r=t[n];r.move&&r.move(r,e)}}),X.Events.on(this.engine,"collisionActive",e=>{const t=e.pairs;for(let n=0;n<t.length;n+=1){const e=t[n];e.bodyA.collisionActive&&e.bodyA.collisionActive(e.bodyA,e.bodyB),e.bodyB.collisionActive&&e.bodyB.collisionActive(e.bodyB,e.bodyA)}}),X.Events.on(this.engine,"collisionStart",e=>{const t=e.pairs;for(let n=0;n<t.length;n+=1){const e=t[n];e.bodyA.collisionStart&&e.bodyA.collisionStart(e.bodyA,e.bodyB),e.bodyB.collisionStart&&e.bodyB.collisionStart(e.bodyB,e.bodyA)}}),X.Events.on(this.engine,"collisionEnd",e=>{const t=e.pairs;for(let n=0;n<t.length;n+=1){const e=t[n];e.bodyA.collisionEnd&&e.bodyA.collisionEnd(e.bodyA,e.bodyB),e.bodyB.collisionEnd&&e.bodyB.collisionEnd(e.bodyB,e.bodyA)}}),this.runner=he.create({isFixed:!1});const e=document.getElementById(this.settings.canvas);let t=e.clientWidth,n=e.clientWidth*this.world.height/this.world.width;n>e.clientHeight&&(n=e.clientHeight,t=e.clientHeight*this.world.width/this.world.height);const r={element:e,engine:this.engine,options:{width:t,height:n,background:this.world.background,font:this.world.font,wireframes:!1}};this.render=fe.create(r),this.canvas=this.render.canvas,fe.lookAt(this.render,this.world.view);const s=be.create(this.render.canvas),o={pointA:{x:0,y:0},pointB:{x:0,y:0},stiffness:this.world.mouseStiffness||.2,render:{visible:!1}},i=ye.create(this.engine,{mouse:s,constraint:me.create(o)});ge.add(this.engine.world,i),this.render.mouse=s,X.Events.on(i,"mousedown",e=>{const t=e.mouse;let n=e.sourcebody;const r=X.Composite.allBodies(this.engine.world);for(let s=0;s<r.length;s+=1)if(n=r[s],ve.contains(n.bounds,t.position)&&Ee.canCollide(n.collisionFilter,i.collisionFilter))for(let e=n.parts.length>1?1:0;e<n.parts.length;e+=1){const r=n.parts[e];if(r.clicked&&_e.contains(r.vertices,t.position)){r.clicked(r);break}}}),this.vars=ae({}),he.run(this.runner,this.engine),fe.run(this.render)}dispose(){this.engine&&(ge.clear(this.engine.world,!1),de.clear(this.engine)),this.runner&&he.stop(this.runner),this.render&&(fe.stop(this.render),this.render.canvas.remove(),this.render.textures={}),this.isDisposed=!0}getCode(){return this.code}getCanvas(){return this.canvas}resize(e,t){let n=e,r=e*this.world.viewHeight/this.world.viewWidth;r>t&&(r=t,n=t*this.world.viewWidth/this.world.viewHeight),this.canvas.setAttribute("width",n.toString()),this.canvas.setAttribute("height",r.toString()),this.render.options.width=n,this.render.options.height=r}async wait(e){await new Promise(t=>setTimeout(t,e))}async waitForRun(e){for(;this.waitRestart;)await this.wait(e);this.runner.enabled=!0}async execute_main(){const e=wn();this.isExecuting=!0;for await(const t of this.code.main(this)){if(this.isDisposed)break;if(t<e&&_n()){En();for(let e=0;e<this.interval/this.runner.delta;e+=1)this.engine=de.update(this.engine,void 0,void 0)}else Sn(t,t),await this.waitForRun(1e3),await this.wait(this.interval/2),Nn(),await this.wait(this.interval/2)}this.isExecuting=!1,Nn()}isRunning(){return this.runner&&this.runner.enabled}runCode(){this.initCode(),this.startCode(),this.runner.enabled=!this.waitRestart,this.execute_main()}pause(){this.waitRestart=!0,this.runner.enabled=!1}start(){this.isExecuting?this.waitRestart=!1:this.runner.enabled=!0}getTimeStamp(){return this.engine?this.engine.timing.timestamp:0}ln(e){return this.code.lines[e]}async input(e){this.runner.enabled=!1;const t=await vn(e||"");return this.runner.enabled=!0,this.waitForRun(500),console.log("input ".concat(t)),t}async input0(e){this.runner.enabled=!1;const t=document.getElementById("inputtext");t.placeholder=e||"Input here",document.getElementById("myOverlay").style.display="block";const n=await(async()=>{const e=document.querySelector("#submitInput");let n="";return document.getElementById("submitInput").onclick=(()=>{document.getElementById("myOverlay").style.display="none",n=t.value,t.value=""}),await(e=>new Promise(t=>{const n=t;e.addEventListener("click",n,{once:!0})}))(e),n})();return this.runner.enabled=!0,this.waitForRun(500),n}print(e,t={}){const n=this.world.width,r=we.extend({shape:"label",value:"".concat(e),created:this.getTimeStamp(),move:(e,t)=>{const r=n-100*(t-e.created)*.003;X.Body.setPosition(e,{x:r,y:e.position.y}),r<-1&&ge.remove(this.engine.world,e)}},t),s=this.world.width,o=this.world.height*(.9*Math.random()+.05);this.new_(this.vars.Label,s,o,r)}trace(e){console.log(e)}listAdd(e,t){return e.concat(t)}anyMul(e,t){if("string"===typeof e){let n="";for(let r=0;r<t;r+=1)n+=e;return n}if(Array.isArray(e)){let n=[];for(let r=0;r<t;r+=1)n=n.concat(e);return n}return e*t}anyIn(e,t){return t.indexOf(e)>=0}int(e){return"number"===typeof e?0|e:"string"===typeof e?Number.parseInt(e):"boolean"===typeof e?e?1:0:0|e}float(e){return"number"===typeof e?e:"string"===typeof e?Number.parseFloat(e):"boolean"===typeof e?e?1:0:e}str(e){return"boolean"===typeof e?e?"True":"False":Array.isArray(e)?"["+e.map(e=>this.str(e)).join(", ")+"]":"".concat(e)}range(e,t,n){let r=0,s=0,o=1;void 0===t?s=e:void 0!==n?(r=e,s=t,o=0===n?1:n):(r=e,s=t);const i=[];if(r<=s){o<0&&(o=-o);for(let e=r;e<s&&(i.push(e),!(i.length>1e5));e+=o);}else{o>0&&(o=-o);for(let e=r;e>s&&(i.push(e),!(i.length>1e5));e+=o);}return i}getindex(e,t){return"string"===typeof e?e.charAt((t+e.length)%e.length):Array.isArray(e)?e[(t+e.length)%e.length]:void 0}slice(e,t,n){return"string"===typeof e?(void 0==n&&(n=e.length),e.substr(t,n-t)):Array.isArray(e)?(void 0==n&&(n=e.length),e.slice(t,n)):void 0}find(e,t){return e.indexOf(t)}join(e,t){return t.join(e)}append(e,t){e.push(t)}len(e){return e.length}map(e,t){return Array.from(t,e)}setPosition(e,t,n){X.Body.setPosition(e,{x:t,y:n})}applyForce(e,t,n,r,s){X.Body.applyForce(e,{x:t,y:n},{x:r,y:s})}rotate(e,t,n,r){X.Body.rotate(e,t)}scale(e,t,n,r,s){X.Body.scale(e,t,n)}setAngle(e,t){X.Body.setAngle(e,t)}setVelocity(e,t,n){X.Body.setVelocity(e,{x:t,y:n})}setAngularVelocity(e,t){X.Body.setAngularVelocity(e,t)}setDensity(e,t){X.Body.setDensity(e,t)}setMass(e,t){X.Body.setMass(e,t)}setStatic(e,t){X.Body.setStatic(e,t)}}let Ne={canvas:"puppy-screen",ftrace:e=>{}};var xe,Te=n(202);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}!function(e){e.SET_VERSION_SHOW="SET_VERSION_SHOW"}(xe||(xe={}));const ke=e=>({type:xe.SET_VERSION_SHOW,payload:{show:e}}),Ie={show:!1};var Ce=(e=Ie,t)=>{switch(t.type){case xe.SET_VERSION_SHOW:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach(function(t){Object(y.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{show:t.payload.show});default:return e}};const Ae=Object(Te.b)({editor:k,course:F,puppy:W,input:G,version:Ce}),Pe=Object(Te.c)(Ae);var Le=Pe;class je{constructor(e,t,n,r){this.tag=void 0,this.urn=void 0,this.inputs=void 0,this.spos=void 0,this.epos=void 0,this.nodes=void 0,this.tag=e,this.urn=r,this.inputs="",this.spos=t,this.epos=n,this.nodes=je.empties}setup(e,t){if(null!==this.urn){const r=[];for(var n=this.urn;null!==n;)r.push([n.edge,n.child.setup(e,t)]),n=n.prev;this.nodes=r.reverse()}this.urn=e,this.inputs=t;for(var r=0;r<this.nodes.length;r+=1)this[r]=this.nodes[r][1],""!==this.nodes[r][0]&&(this[this.nodes[r][0]]=this.nodes[r][1]);return this}is(e){return this.tag===e}isError(){return"err"===this.tag}subs(){const e=[];for(var t=0;t<this.nodes.length;t+=1)e.push(this.nodes[t][1]);return e}size(){return this.nodes.length}contains(e){for(var t=0;t<this.nodes.length;t+=1)if(this.nodes[t][0]===e)return!0;return!1}get(e){return this[e]}tokenize(e,t){if(void 0===e)return this.inputs.substring(this.spos,this.epos);const n=this[e];return void 0===n?t||"":n.tokenize()}pos(e){const t=this.inputs;e=Math.min(e,t.length);for(var n=0,r=0,s=0;s<=e;s+=1)10==t.charCodeAt(s)?(n+=1,r=0):r+=1;return[e,n,r]}begin(){return this.pos(this.spos)}end(){return this.pos(this.spos)}length(){return this.epos-this.spos}toString(){const e=[];return this.strOut(e),e.join("")}strOut(e){e.push("[#"),e.push(this.tag);for(const t of this.nodes)e.push(""===t[0]?" ":" ".concat(t[0],"=")),t[1].strOut(e);if(0==this.nodes.length){const t=this.inputs.substring(this.spos,this.epos);e.push(" '"),e.push(t),e.push("'")}e.push("]")}}je.empties=[];class Me{constructor(e,t,n){this.prev=void 0,this.edge=void 0,this.child=void 0,this.prev=e,this.edge=t,this.child=n}}class Fe{constructor(e,t,n,r){this.urn=void 0,this.inputs=void 0,this.pos=void 0,this.epos=void 0,this.head_pos=void 0,this.ast=void 0,this.state=void 0,this.memos=void 0,this.urn=e,this.inputs=t,this.pos=n,this.epos=r,this.head_pos=n,this.ast=null,this.state=null,this.memos=[];for(var s=0;s<1789;s++)this.memos.push(new Qe)}}const De=e=>e.pos<e.epos&&(e.pos+=1,!0),Re=()=>De,Be=e=>{const t=e.length;return n=>!!n.inputs.startsWith(e,n.pos)&&(n.pos+=t,!0)},Ve=(e,t)=>{const n=1<<(t%8|0);e[t/8|0]|=n},ze=(e,t)=>{const n=((e,t)=>{for(var n=0,r=0;r<e.length;r+=1)n=Math.max(e.charCodeAt(r),n);for(const s of t)n=Math.max(s.charCodeAt(0),n),n=Math.max(s.charCodeAt(1),n);return n})(e,t)+1,r=new Uint8Array(1+(n/8|0));r[0]=2;for(var s=0;s<e.length;s+=1)Ve(r,e.charCodeAt(s));for(const i of t)for(var o=i.charCodeAt(0);o<=i.charCodeAt(1);o+=1)Ve(r,o);return e=>{if(e.pos<e.epos){const t=e.inputs.charCodeAt(e.pos),n=t/8|0,s=1<<(t%8|0);if(n<r.length&&(r[n]&s)===s)return e.pos+=1,!0}return!1}},We=e=>t=>{for(var n=t.pos,r=t.ast;e(t)&&t.pos>n;)n=t.pos,r=t.ast;return t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r,!0},Ue=e=>t=>{if(e(t)){for(var n=t.pos,r=t.ast;e(t)&&t.pos>n;)n=t.pos,r=t.ast;return t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r,!0}return!1},He=e=>t=>{const n=t.pos;return!!e(t)&&(t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,!0)},qe=e=>t=>{const n=t.pos,r=t.ast;return!e(t)||(t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r,!1)},Ke=e=>t=>{const n=t.pos,r=t.ast;return e(t)||(t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r),!0},Ge=(...e)=>t=>{for(const n of e)if(!n(t))return!1;return!0},Xe=(e,t)=>n=>e(n)&&t(n),Ye=(e,t,n)=>r=>e(r)&&t(r)&&n(r),Ze=(...e)=>t=>{const n=t.pos,r=t.ast;for(const s of e){if(s(t))return!0;t.head_pos=Math.max(t.pos,t.head_pos),t.pos=n,t.ast=r}return!1},Je=(e,t)=>n=>{const r=n.pos,s=n.ast;return!!e(n)||(n.head_pos=Math.max(n.pos,n.head_pos),n.pos=r,n.ast=s,t(n))},$e=(e,t)=>e[t]?e[t]:n=>e[t](n);class Qe{constructor(){this.key=void 0,this.key=-1}}const et=(e,t,n)=>r=>{const s=r.pos;return r.ast=null,!!e(r)&&(r.ast=new je(t,s+n,r.pos,r.ast),!0)},tt=(e,t)=>n=>{const r=n.ast;return!!t(n)&&(n.ast=new Me(r,e,n.ast),!0)},nt=(e,t,n,r)=>s=>{const o=s.pos;return s.ast=new Me(null,e,s.ast),!!t(s)&&(s.ast=new je(n,o+r,s.pos,s.ast),!0)};class rt{constructor(e,t,n){this.sid=void 0,this.value=void 0,this.prev=void 0,this.sid=e,this.value=t,this.prev=n}}const st=(e,t)=>{for(;null!==e;){if(e.sid===t)return e;e=e.prev}return null},ot=e=>t=>{const n=st(t.state,e);return!(null===n||!t.inputs.startsWith(n.value,t.pos))&&(t.pos+=n.value.length,!0)},it=e=>{const t=ct(e);return void 0===t&&(console.log("undefined ".concat(e)),console.log(at)),(e,n)=>{const r=new Fe((void 0===n?{}:n).urn||"(unknown source)",e,0,e.length);return t(r)?null===r.ast&&(r.ast=new je("",0,r.pos,null)):r.ast=new je("err",r.head_pos,r.head_pos+1,null),r.ast.setup(r.urn,e)}};let at=null;const ct=e=>(null===at&&((at={}).Source=Ye(Ke($e(at,"EOL")),et(We(Ge(tt("",$e(at,"Statement")),We(Xe($e(at,'";"'),tt("",$e(at,"Statement")))),Ke($e(at,'";"')),$e(at,"EOL"))),"Source",0),$e(at,"EOF")),at.Block=et((e=>t=>{const n=t.state,r=e(t);return t.state=n,r})(Ye(((e,t)=>n=>{const r=n.pos;return!!t(n)&&(n.state=new rt(e,n.inputs.substring(r,n.pos),n.state),!0)})(0,$e(at,"INDENT")),Je(Ye(tt("",$e(at,"Statement")),We(Xe($e(at,'";"'),tt("",$e(at,"Statement")))),Ke($e(at,'";"'))),Xe($e(at,"_"),He($e(at,"EOL")))),We(Xe(ot(0),Je(Ye(tt("",$e(at,"Statement")),We(Xe($e(at,'";"'),tt("",$e(at,"Statement")))),Ke($e(at,'";"'))),Xe($e(at,"_"),He($e(at,"EOL")))))))),"Block",0),at.Statement=Ze($e(at,"ClassDecl"),$e(at,"ImportDecl"),$e(at,"FuncDecl"),$e(at,"IfStmt"),$e(at,"ForStmt"),$e(at,"WhileStmt"),$e(at,"Return"),$e(at,"Yield"),$e(at,"Break"),$e(at,"Continue"),$e(at,"VarDecl"),$e(at,"Expression")),at.ImportDecl=Je(et(Ye(Xe(Be("import"),$e(at,"S")),tt("name",$e(at,"Name")),Ke(Xe(Xe(Be("as"),$e(at,"S")),tt("alias",$e(at,"Name"))))),"ImportDecl",0),et(Ge(Xe(Be("from"),$e(at,"S")),tt("name",$e(at,"Name")),Xe(Be("import"),$e(at,"S")),tt("names",Je(et(Xe(tt("",$e(at,"Name")),We(Ye(Be(","),$e(at,"_"),tt("",$e(at,"Name"))))),"",0),et(Xe(Be("*"),$e(at,"_")),"",0)))),"FromDecl",0)),at.ClassDecl=et(Ge(Be("class"),$e(at,"S"),$e(at,"_"),tt("name",$e(at,"Name")),Ke(Ge(Be("("),$e(at,"_"),tt("extends",$e(at,"Name")),Be(")"),$e(at,"_"))),Be(":"),$e(at,"_"),Je(tt("",$e(at,"Block")),tt("",$e(at,"Statement")))),"ClassDecl",0),at.FuncDecl=et(Ge(Be("def"),$e(at,"S"),$e(at,"_"),tt("name",$e(at,"Name")),tt("params",$e(at,"FuncParams")),Be(":"),$e(at,"_"),tt("body",Je($e(at,"Block"),$e(at,"Statement")))),"FuncDecl",0),at.FuncParams=et(Ge($e(at,'"("'),Ke(tt("",$e(at,"FuncParam"))),We(Xe($e(at,'","'),tt("",$e(at,"FuncParam")))),$e(at,'")"')),"FuncParam",0),at.FuncParam=et(Xe(tt("name",$e(at,"Name")),Ke(Ye(Be(":"),$e(at,"_"),tt("type",$e(at,"Name"))))),"Param",0),at.Lambda=et(Ge(Be("lambda"),Ke(Ye($e(at,"S"),$e(at,"_"),tt("params",$e(at,"LambdaParams")))),Be(":"),$e(at,"_"),tt("body",Je($e(at,"Block"),$e(at,"Statement")))),"FuncExpr",0),at.LambdaParams=et(Xe(Ke(tt("",$e(at,"Name"))),We(Xe($e(at,'","'),tt("",$e(at,"Name"))))),"Param",0),at.Return=et(Xe(Be("return"),Ke(Ye(qe($e(at,"W")),$e(at,"_"),tt("expr",$e(at,"Expression"))))),"Return",0),at.Yield=et(Xe(Be("yield"),$e(at,"_")),"Yield",0),at.Pass=et(Xe(Be("pass"),$e(at,"_")),"Pass",0),at.Break=et(Xe(Be("break"),$e(at,"_")),"Break",0),at.Continue=et(Xe(Be("continue"),$e(at,"_")),"Continue",0),at.IfStmt=et(Ge(Xe(Be("if"),qe($e(at,"W"))),$e(at,"_"),tt("cond",$e(at,"Expression")),Be(":"),$e(at,"_"),tt("then",Je($e(at,"Block"),$e(at,"Statement"))),Ke(tt("elif",$e(at,"ElifBlock"))),Ke(Ge(Je(ot(0),$e(at,"NL")),Be("else"),qe($e(at,"W")),$e(at,"_"),Be(":"),$e(at,"_"),tt("else",Je($e(at,"Block"),$e(at,"Statement")))))),"IfStmt",0),at.ElifBlock=et(Ue(tt("",$e(at,"ElifStmt"))),"",0),at.ElifStmt=et(Ge(Je(ot(0),$e(at,"NL")),Xe(Be("elif"),qe($e(at,"W"))),$e(at,"_"),tt("cond",$e(at,"Expression")),Be(":"),$e(at,"_"),tt("then",Je($e(at,"Block"),$e(at,"Statement")))),"ElifStmt",0),at.ForStmt=et(Ge(Xe(Be("for"),qe($e(at,"W"))),$e(at,"_"),tt("each",$e(at,"Name")),Xe(Be("in"),qe($e(at,"W"))),$e(at,"_"),tt("list",$e(at,"Expression")),Be(":"),$e(at,"_"),tt("body",Je($e(at,"Block"),$e(at,"Statement")))),"ForStmt",0),at.WhileStmt=et(Ge(Xe(Be("while"),qe($e(at,"W"))),$e(at,"_"),tt("cond",$e(at,"Expression")),Be(":"),$e(at,"_"),tt("body",Je($e(at,"Block"),$e(at,"Statement")))),"WhileStmt",0),at.VarDecl=Je(et(Ge(tt("left",$e(at,"LeftHand")),Be("="),$e(at,"_"),tt("right",$e(at,"Expression"))),"VarDecl",0),$e(at,"SelfAssign")),at.LeftHand=Xe($e(at,"Name"),We(Je(nt("recv",Ye(Be("."),$e(at,"_"),tt("name",$e(at,"Name"))),"GetExpr",0),nt("recv",Ye($e(at,'"["'),tt("index",$e(at,"Expression")),$e(at,'"]"')),"IndexExpr",0)))),at.SelfAssign=et(Ye(tt("left",$e(at,"LeftHand")),tt("name",$e(at,"SelfAssignOp")),tt("right",$e(at,"Expression"))),"SelfAssign",0),at.SelfAssignOp=Xe(et(Xe(Ze(Be("<<"),Be(">>"),Be("**"),Be("//"),ze("+=*@/%&|^",[])),Be("=")),"",0),$e(at,"_")),at.Expression=Xe($e(at,"Operator"),Ke(nt("then",Ge(Be("if"),qe($e(at,"W")),$e(at,"_"),tt("cond",$e(at,"Expression")),Be("else"),qe($e(at,"W")),$e(at,"_"),tt("else",$e(at,"Expression"))),"IfExpr",0))),at.Operator=Xe($e(at,"AndExpr"),We(nt("left",Ye($e(at,"OR"),$e(at,"_"),tt("right",$e(at,"AndExpr"))),"Or",0))),at.OR=Je(Xe(Be("or"),qe($e(at,"W"))),Be("||")),at.AndExpr=Xe($e(at,"NotExpr"),We(nt("left",Ye($e(at,"AND"),$e(at,"_"),tt("right",$e(at,"NotExpr"))),"And",0))),at.AND=Je(Xe(Be("and"),qe($e(at,"W"))),Be("&&")),at.NotExpr=Je(et(Ye($e(at,"NOT"),$e(at,"_"),tt("",$e(at,"NotExpr"))),"Not",0),$e(at,"EqExpr")),at.NOT=Je(Ye(Be("not"),qe($e(at,"W")),$e(at,"_")),Be("!")),at.EqExpr=Xe($e(at,"SumExpr"),We(nt("left",Ye(tt("name",et($e(at,"EQ"),"Name",0)),$e(at,"_"),tt("right",$e(at,"SumExpr"))),"Infix",0))),at.EQ=Ze(Xe(Be("=="),qe(Be("="))),Xe(Be("!="),qe(Be("="))),Xe(Be("<="),qe(Be("="))),Xe(Be(">="),qe(Be("="))),Xe(Be("<"),qe(Be("<"))),Xe(Be(">"),qe(Be(">"))),Xe(Be("in"),$e(at,"S")),Xe(Be("is"),$e(at,"S")),Xe(Be("is not"),$e(at,"S"))),at.SumExpr=Xe($e(at,"ProdExpr"),We(nt("left",Ye(tt("name",et($e(at,"SUM"),"Name",0)),$e(at,"_"),tt("right",$e(at,"ProdExpr"))),"Infix",0))),at.SUM=ze("+-|\uff0b\u30fc",[]),at.ProdExpr=Xe($e(at,"PowExpr"),We(nt("left",Ye(tt("name",et($e(at,"PROD"),"Name",0)),$e(at,"_"),tt("right",$e(at,"PowExpr"))),"Infix",0))),at.PROD=Ze(Be("//"),Be("<<"),Be(">>"),ze("*/%^&\xd7\xf7",[])),at.PowExpr=Xe($e(at,"UnaryExpr"),We(nt("left",Ye(tt("name",et(Be("**"),"Name",0)),$e(at,"_"),tt("right",$e(at,"UnaryExpr"))),"Infix",0))),at.UnaryExpr=Je(et(Ye(tt("name",et($e(at,"PRE"),"Name",0)),$e(at,"_"),tt("expr",$e(at,"UnaryExpr"))),"Unary",0),$e(at,"SuffixExpr")),at.PRE=ze("+-~",[]),at.SuffixExpr=Xe($e(at,"Primary"),We(Ze(nt("recv",Ge(Be("."),$e(at,"_"),tt("name",$e(at,"Name")),$e(at,'"("'),tt("params",$e(at,"Arguments")),$e(at,"__"),$e(at,'")"')),"MethodExpr",0),nt("recv",Ye(Be("."),$e(at,"_"),tt("name",$e(at,"Name"))),"GetExpr",0),nt("name",Ge($e(at,'"("'),tt("params",$e(at,"Arguments")),$e(at,"__"),$e(at,'")"')),"ApplyExpr",0),nt("recv",Ge($e(at,'"["'),Ke(tt("left",$e(at,"Expression"))),Be(":"),$e(at,"_"),Ke(tt("right",$e(at,"Expression"))),$e(at,'"]"')),"Slice",0),nt("recv",Ye($e(at,'"["'),tt("index",$e(at,"Expression")),$e(at,'"]"')),"IndexExpr",0)))),at.Arguments=et(Ye(Ke(Xe(tt("",$e(at,"Expression")),qe(Be("=")))),We(Ge(Be(","),$e(at,"__"),tt("",$e(at,"Expression")),qe(Be("=")))),Ke(tt("",$e(at,"KeywordArgument")))),"Arguments",0),at.KeywordArgument=et(Ye(Ke(Xe(Be(","),$e(at,"__"))),tt("",$e(at,"Argument")),We(Ye(Be(","),$e(at,"__"),tt("",$e(at,"Argument"))))),"Data",0),at.Argument=et(Ge(tt("name",$e(at,"Name")),Be("="),$e(at,"_"),tt("value",$e(at,"Expression"))),"KeyValue",0),at.Primary=Ze($e(at,"GroupExpr"),$e(at,"ListExpr"),$e(at,"DataExpr"),$e(at,"Lambda"),$e(at,"Constant"),$e(at,"Name")),at.GroupExpr=et(Ge($e(at,'"("'),tt("",$e(at,"Expression")),We(Ye($e(at,'","'),$e(at,"__"),tt("",$e(at,"Expression")))),$e(at,"__"),$e(at,'")"')),"Tuple",0),at.ListExpr=et(Ge($e(at,'"["'),Ke(Xe(tt("",$e(at,"Expression")),We(Ye($e(at,'","'),$e(at,"__"),tt("",$e(at,"Expression")))))),Ke($e(at,'","')),$e(at,"__"),$e(at,'"]"')),"List",0),at.DataExpr=et(Ge($e(at,'"{"'),tt("",$e(at,"KeyValue")),We(Ye($e(at,'","'),$e(at,"__"),tt("",$e(at,"KeyValue")))),Ke($e(at,'","')),$e(at,"__"),$e(at,'"}"')),"Data",0),at.KeyValue=et(Ye(tt("name",Ze($e(at,"Name"),$e(at,"StringExpr"),$e(at,"CharExpr"))),$e(at,'":"'),tt("value",$e(at,"Expression"))),"KeyValue",0),at.Name=Je($e(at,"Identifier"),$e(at,"NLPSymbol")),at.Identifier=Xe(et(Xe(ze("",["AZ","az"]),We($e(at,"W"))),"Name",0),$e(at,"_")),at.NLPSymbol=Xe(et(Ue(Ze($e(at,"HIRA"),$e(at,"KATA"),$e(at,"KANJI"))),"NLPSymbol",0),$e(at,"_")),at.W=ze("_",["AZ","az","09"]),at.Constant=Ze($e(at,"FormatString"),$e(at,"LongString"),$e(at,"StringExpr"),$e(at,"CharExpr"),$e(at,"Number"),$e(at,"TrueExpr"),$e(at,"FalseExpr"),$e(at,"NullExpr")),at.FormatString=Ye(ze("Ff",[]),Ze(Ye(Be("'''"),et(We(tt("",$e(at,"FormatContent3"))),"Format",0),Be("'''")),Ye(Be("'"),et(We(tt("",$e(at,"FormatContent1"))),"Format",0),Be("'")),Ye(Be('"""'),et(We(tt("",$e(at,"FormatContent3D"))),"Format",0),Be('"""')),Ye(Be('"'),et(We(tt("",$e(at,"FormatContent1D"))),"Format",0),Be('"'))),$e(at,"_")),at.FormatContent3=Je(Ye(Be("{"),$e(at,"Expression"),Be("}")),et(We(Ye(qe(Be("'''")),qe(Be("{")),Re())),"StringPart",0)),at.FormatContent1=Je(Ye(Be("{"),$e(at,"Expression"),Be("}")),et(We(Ye(qe(Be("'")),qe(Be("{")),Re())),"StringPart",0)),at.FormatContent3D=Je(Ye(Be("{"),$e(at,"Expression"),Be("}")),et(We(Ye(qe(Be('"""')),qe(Be("{")),Re())),"StringPart",0)),at.FormatContent1D=Je(Ye(Be("{"),$e(at,"Expression"),Be("}")),et(We(Ye(qe(Be('"')),qe(Be("{")),Re())),"StringPart",0)),at.LongString=Je(Ge(Be("''"),et(Ye(Be("'"),We(Ze($e(at,"ESCAPE"),Xe(qe(ze("\\'",[])),Re()),Xe(qe(Be("'''")),Be("'")))),Be("'")),"MultiString",0),Be("''"),$e(at,"_")),Ge(Be('""'),et(Ye(Be('"'),We(Ze($e(at,"ESCAPE"),Xe(qe(ze('\\"',[])),Re()),Xe(qe(Be('"""')),Be('"')))),Be('"')),"MultiString",0),Be('""'),$e(at,"_"))),at.StringExpr=Xe(et(Ye(Be('"'),We($e(at,"STRING_CONTENT")),Be('"')),"String",0),$e(at,"_")),at.CharExpr=Xe(et(Ye(Be("'"),We($e(at,"CHAR_CONTENT")),Be("'")),"Char",0),$e(at,"_")),at.STRING_CONTENT=Je($e(at,"ESCAPE"),Xe(qe(ze('"\n\\',[])),Re())),at.CHAR_CONTENT=Je($e(at,"ESCAPE"),Xe(qe(ze("'\n\\",[])),Re())),at.ESCAPE=Ze(Xe(Be("\\"),ze("'\"\\bfnrt",[])),Ge(Be("\\"),ze("",["03"]),ze("",["07"]),ze("",["07"])),Ye(Be("\\"),ze("",["07"]),ze("",["07"])),Xe(Be("\\"),ze("",["07"])),Ge(Be("\\"),ze("uU",[]),$e(at,"HEX"),$e(at,"HEX"),$e(at,"HEX"),$e(at,"HEX"))),at.IntExpr=Xe(et(Ze($e(at,"DECIMAL"),$e(at,"HEXADECIMAL"),$e(at,"BINARY"),$e(at,"OCTAL")),"Int",0),$e(at,"_")),at.DECIMAL=Je(Xe(Be("0"),qe(ze("bBxX_",["09"]))),Xe(ze("",["19"]),We(Xe(We(Be("_")),$e(at,"DIGIT"))))),at.HEXADECIMAL=Ge(Be("0"),ze("xX",[]),$e(at,"HEX"),We(Xe(We(Be("_")),$e(at,"HEX")))),at.BINARY=Ge(Be("0"),ze("bB",[]),ze("01",[]),We(Xe(We(Be("_")),ze("01",[])))),at.OCTAL=Xe(Be("0"),We(Xe(We(Be("_")),ze("",["07"])))),at.DIGIT=ze("",["09"]),at.HEX=ze("",["af","AF","09"]),at.LONG_SUFFIX=ze("lL",[]),at.FloatExpr=Xe(et($e(at,"FLOAT"),"Double",0),$e(at,"_")),at.FLOAT=Je(Xe($e(at,"FRACTION"),Ke($e(at,"EXPONENT"))),Xe(Ue($e(at,"DIGIT")),$e(at,"EXPONENT"))),at.FRACTION=Je(Ge(qe(Be("_")),We(Xe(We(Be("_")),$e(at,"DIGIT"))),Be("."),$e(at,"DIGIT"),We(Xe(We(Be("_")),$e(at,"DIGIT")))),Ge($e(at,"DIGIT"),We(Xe(We(Be("_")),$e(at,"DIGIT"))),Be("."),qe(Be(".")))),at.EXPONENT=Ge(ze("eE",[]),Ke(ze("+-",[])),$e(at,"DIGIT"),We(Xe(We(Be("_")),$e(at,"DIGIT")))),at.Number=Je($e(at,"FloatExpr"),$e(at,"IntExpr")),at.TrueExpr=Xe(et(Xe(ze("Tt",[]),Be("rue")),"TrueExpr",0),$e(at,"_")),at.FalseExpr=Xe(et(Xe(ze("Ff",[]),Be("alse")),"FalseExpr",0),$e(at,"_")),at.NullExpr=Xe(et(Je(Be("None"),Be("null")),"Null",0),$e(at,"_")),at.EOF=qe(Re()),at.NL=Je(Be("\n"),$e(at,"EOF")),at.S=ze(" \t\u200b\v\r\u3000",[]),at._=We(Ze($e(at,"S"),$e(at,"BLOCKCOMMENT"),$e(at,"LINECOMMENT"))),at.__=We(Ze($e(at,"S"),Be("\n"),$e(at,"BLOCKCOMMENT"),$e(at,"LINECOMMENT"))),at.SPC=Ue(Ze($e(at,"S"),$e(at,"BLOCKCOMMENT"),$e(at,"LINECOMMENT"))),at.BLOCKCOMMENT=Je(Ye(Be("/*"),We(Xe(qe(Be("*/")),Re())),Be("*/")),Ye(Be("(*"),We(Xe(qe(Be("*)")),Re())),Be("*)"))),at.LINECOMMENT=Xe(Be("#"),We(Xe(qe($e(at,"NL")),Re()))),at.EOL=Ye($e(at,"_"),$e(at,"NL"),We(Xe($e(at,"_"),$e(at,"NL")))),at.INDENT=Xe(Be("\n"),Ue(ze(" \t",[]))),at.C=Ze($e(at,"HIRA"),$e(at,"KATA"),$e(at,"KANJI"),$e(at,"MARK"),ze("",["\uff41\uff5a","\uff21\uff3a","\uff10\uff19"])),at.HIRA=ze("",["\u3041\u3093"]),at.KATA=ze("",["\u30a1\u30f6"]),at.KANJI=ze("\u3005\u3007\u303b\u30fc",["\u3400\u4db5","\u4e00\u9fa0"]),at.MARK=Be("\u30fc"),at['"{"']=Xe(ze("{\uff5b",[]),$e(at,"__")),at['"}"']=Xe(ze("}\uff5d",[]),$e(at,"_")),at['"["']=Xe(ze("[\uff3b\u3010",[]),$e(at,"__")),at['"]"']=Xe(ze("]\uff3d\u3011",[]),$e(at,"_")),at['"("']=Xe(ze("(\uff08",[]),$e(at,"__")),at['")"']=Xe(ze(")\uff09",[]),$e(at,"_")),at['"="']=Ye(ze("=\uff1d",[]),qe(ze("=\uff1d",[])),$e(at,"_")),at['"."']=Xe(ze(".\uff0e\u3002",[]),$e(at,"_")),at['","']=Xe(ze(",\u3001",[]),$e(at,"_")),at['";"']=Ue(Xe(ze(";\uff1b",[]),$e(at,"_"))),at['":"']=Xe(ze(":\uff1a",[]),$e(at,"_"))),at[e]),lt="\t",ut="";class pt{constructor(e){this.code=void 0,this.code=e}isOptional(){return this.code!==ut}getValue(){return this.code}toString(){return"?"}rtype(){return this}psize(){return 0}ptype(e){return this}accept(e,t){return!1}realType(){return this}isPattern(){return!1}hasAlpha(){return!1}toVarType(e){return this}}class dt extends pt{constructor(e,t){super(t),this.name=void 0,this.name=e}toString(){return this.name}accept(e,t){const n=e.realType();return n instanceof dt?this.name===n.name:n instanceof Rt&&n.must(this,t)}isPattern(){return"a"===this.name||"b"===this.name}hasAlpha(){return"a"===this.name||"b"===this.name}toVarType(e){if(this.hasAlpha()){return void 0===e[this.name]&&(e[this.name]=new Rt(e.env,e.t)),e[this.name]}return this}}class ht extends dt{constructor(){super("void",ut)}accept(e,t){const n=e.realType();return n instanceof Rt&&n.must(this,t),!0}}class ft extends pt{constructor(...e){super(ut),this.types=void 0,this.types=e}toString(){const e=["("];for(var t=1;t<this.types.length;t+=1)t>1&&e.push(","),e.push(this.types[t].toString());return e.push(")->"),e.push(this.types[0].toString()),e.join("")}rtype(){return this.types[0]}psize(){return this.types.length-1}ptype(e){return this.types[e+1]}accept(e,t){const n=e.realType();if(n instanceof ft&&this.psize()==n.psize())for(var r=0;r<this.types.length;r+=1)return!!this.types[r].accept(n.types[r],t);return n instanceof Rt&&n.must(this,t)}isPattern(){for(const e of this.types)if(e.isPattern())return!0;return!1}hasAlpha(){for(const e of this.types)if(e.hasAlpha())return!0;return!1}toVarType(e){if(this.hasAlpha()){const t=[];for(const n of this.types)t.push(n.toVarType(e));return new ft(...t)}return this}}class mt extends pt{constructor(e,t=ut){super(t),this.param=void 0,this.param=e}toString(){return"List[".concat(this.param.toString(),"]")}psize(){return 1}ptype(e){return this.param}realType(){const e=this.param.realType();return e!==this.param?new mt(e,this.code):this}accept(e,t){const n=e.realType();return n instanceof mt?this.param==gt||this.param.accept(n.param,t):n instanceof Rt&&n.must(this,t)}isPattern(){return this.param.isPattern()}hasAlpha(){return this.param.hasAlpha()}toVarType(e){return this.hasAlpha()?new mt(this.param.toVarType(e)):this}}class yt extends pt{constructor(...e){super(ut),this.types=void 0,this.types=e}toString(){const e=[];for(var t=0;t<this.types.length;t+=1)t>0&&e.push("|"),e.push(this.types[t].toString());return e.join("")}psize(){return this.types.length}ptype(e){return this.types[e]}accept(e,t){for(const n of this.types)if(n.accept(e,!1))return!0;return console.log("FAIL ".concat(e," ").concat(this.toString())),!1}isPattern(){return!0}hasAlpha(){for(const e of this.types)if(e.hasAlpha())return!0;return!1}toVarType(e){if(this.hasAlpha()){const t=[];for(const n of this.types)t.push(n.toVarType(e));return new yt(...t)}return this}}const bt=(...e)=>1===e.length?e[0]:new yt(...e),gt=new class extends dt{constructor(e){super("any",e)}accept(e,t){return!(e.realType()instanceof ht)}isPattern(){return!0}hasAlpha(){return!0}toVarType(e){return new Rt(e.env,e.t)}}(ut),vt=new ht,_t=new dt("bool",ut),Et=new dt("number",ut),wt=new dt("number","undefined"),St=Et,Nt=new dt("number","0"),xt=(new dt("number","1"),new dt("number","0.0")),Tt=new dt("string",ut),Ot=new dt("string","''"),kt=new dt("a",ut),It=new mt(kt,ut),Ct=new mt(Et,ut),At=new mt(gt,ut),Pt=bt(At,Tt),Lt=new dt("Object",ut),jt=new dt("Vec",ut),Mt=new dt("Vec","lib.vec(0,0)"),Ft=[],Dt=(e,t,n)=>{const r=[];for(const s of e)-1===r.indexOf(s)&&r.push(s);for(const s of t)-1===r.indexOf(s)&&r.push(s);if(void 0!==n)for(const s of n)-1===r.indexOf(s)&&r.push(s);return r};class Rt extends pt{constructor(e,t){super(ut),this.varMap=void 0,this.varid=void 0,this.ref=void 0,this.varMap=e.getroot("@varmap"),this.varid=this.varMap.length,this.varMap.push(Ft),this.ref=t}toString(){const e=this.varMap[this.varid];return e instanceof pt?e.toString():"any"}realType(){const e=this.varMap[this.varid];return e instanceof pt?e:this}accept(e,t){var n=this.varMap[this.varid];return n instanceof pt&&n!==this?n.accept(e,t):this.must(e.realType(),t)}must(e,t){const n=e.realType();if(t){if(n instanceof Rt){if(n.varid===this.varid)return!0;const e=Dt(this.varMap[this.varid],this.varMap[n.varid],[n.varid,this.varid]);for(const t of e)this.varMap[t]=e;return!0}if(!n.isPattern()){const e=this.varMap[this.varid];for(const t of e)this.varMap[t]=n;this.varMap[this.varid]=n}}return!0}hasAlpha(){return!1}}class Bt extends pt{constructor(e){super(JSON.stringify(e)),this.options=void 0,this.options=e}toString(){return this.code}accept(e){return e.realType()instanceof Bt}equals(e,t){return this.accept(e)}isPattern(){return!1}hasAlpha(){return!1}toVarType(e){return this}}class Vt{constructor(e,t,n){this.code=void 0,this.ty=void 0,this.isMatter=!1,this.isMutable=!1,this.code=e,this.ty=t.realType(),void 0!==n&&(this.isMatter=void 0!==n.isMatter&&n.isMatter,this.isMutable=void 0!=n.isMutable&&n.isMutable)}isGlobal(){return 0==this.code.indexOf("vars[")}}new yt(Tt,Et);const zt=new Bt({}),Wt=new ft(St,St),Ut=new ft(St,St,St),Ht=new ft(Lt,Et,Et,zt),qt={pi:new Vt("3.14159",St),sin:new Vt("Math.sin",Wt),cos:new Vt("Math.cos",Wt),tan:new Vt("Math.tan",Wt),sqrt:new Vt("Math.sqrt",Wt),log:new Vt("Math.log",Wt),log10:new Vt("Math.log10",Wt),pow:new Vt("Math.pow",Ut),hypot:new Vt("Math.hypot",Ut),gcd:new Vt("puppy.gcd",Ut)},Kt={input:new Vt("await puppy.input",new ft(Tt,Ot)),print:new Vt("puppy.print",new ft(vt,gt,zt),{isMatter:!0}),len:new Vt("lib.len",new ft(Et,bt(Tt,It))),range:new Vt("lib.range",new ft(Ct,Et,wt,wt)),".append":new Vt("lib.append",new ft(vt,It,kt)),int:new Vt("lib.int",new ft(Et,bt(_t,Tt,Et))),float:new Vt("lib.float",new ft(St,bt(_t,Tt,Et))),str:new Vt("lib.str",new ft(Tt,gt))},Gt={math:qt,random:{random:new Vt("Math.random",new ft(Et))},matterjs:{getTime:new Vt("puppy.getTimeStamp.bind(puppy)",new ft(Et)),World:new Vt("puppy.World",Ht,{isMatter:!0}),Circle:new Vt("puppy.Circle",Ht,{isMatter:!0}),Rectangle:new Vt("puppy.Rectangle",Ht,{isMatter:!0}),Polygon:new Vt("puppy.Polygon",Ht,{isMatter:!0}),Label:new Vt("puppy.Label",Ht,{isMatter:!0}),".setPosition":new Vt("lib.setPosition",new ft(vt,Lt,Et,Et)),".applyForce":new Vt("lib.applyForce",new ft(vt,Lt,Et,Et,Et,Et)),".rotate":new Vt("lib.rotate",new ft(vt,Lt,Et,wt,wt)),".scale":new Vt("lib.scale",new ft(vt,Lt,Et,Et,wt,wt)),".setAngle":new Vt("lib.setAngle",new ft(vt,Lt,Et)),".setAngularVelocity":new Vt("lib.setAngularVelocity",new ft(vt,Lt,Et)),".setDensity":new Vt("lib.setDensity",new ft(vt,Lt,Et)),".setMass":new Vt("lib.setMass",new ft(vt,Lt,Et)),".setStatic":new Vt("lib.setStatic",new ft(vt,Lt,_t)),".setVelocity":new Vt("lib.setVelocity",new ft(vt,Lt,Et))}},Xt={};(()=>{for(const e of Object.keys(Gt))for(const t of Object.keys(Gt[e]))Xt[t]=e})();const Yt={width:Nt,height:Nt,x:Nt,y:Nt,image:Ot,lineWidth:Et,strokeStyle:Tt,fillStyle:Tt,restitution:xt,angle:xt,position:Mt,mass:Nt,density:Nt,area:Nt,friction:xt,frictionStatic:xt,airFriction:xt,torque:xt,stiffness:xt,isSensor:_t,isStatic:_t,damping:xt,in:new ft(vt,Lt,Lt),out:new ft(vt,Lt,Lt),over:new ft(vt,Lt,Lt),clicked:new ft(vt,Lt),font:Ot,fontColor:Tt,textAlign:Tt,value:Et,text:Tt},Zt=e=>{if(e.isOptional())return e.getValue();if(e instanceof mt)return"[]";if(e instanceof dt){const t=e.toString();return t===Tt.toString()?"''":t===_t.toString()?"false":t===jt.toString()?"lib.vec(0,0)":"0"}return"undefined"},Jt=bt(Et,Tt),$t={and:"&&",or:"||",not:"!","+=":"+","-=":"-","*=":"*","//=":"//","/=":"/","<<=":"<<",">>=":">>","|=":"|","&=":"&","^=":"^"},Qt=e=>{const t=$t[e];return void 0!==t?t:e},en={"+":bt(Et,Tt,At),"-":Et,"**":Et,"*":bt(Et,Tt,At),"/":Et,"//":Et,"%":Et,"==":gt,"!=":gt,in:gt,"<":Jt,"<=":Jt,">":Jt,">=":Jt,"^":Et,"|":Et,"&":Et,"<<":Et,">>":Et},tn=e=>{const t=en[e];return void 0===t?(console.log("FIXME undefined '".concat(e,"'")),gt):t},nn=(e,t)=>{if("in"==e)return bt(new mt(t,ut),Tt);const n=en[e];return n===gt||n===Et||"*"===e?n:t},rn=(e,t,n)=>{const r=Math.min(t+1,e.length);for(var s=1,o=0,i=0;i<r;i+=1)10==e.charCodeAt(i)&&(s+=1,o=0),o+=1;return n.pos=t,n.row=s,n.col=o,n};class sn{constructor(e){this.root=void 0,this.parent=void 0,this.vars=void 0,this.vars={},void 0===e?(this.root=this,this.parent=null,this.vars["@varmap"]=[],this.vars["@logs"]=[],this.vars["@trace"]=[],this.vars["@indent"]=lt):(this.root=e.root,this.parent=e)}get(e,t){for(var n=this;null!==n;){const t=n.vars[e];if(void 0!==t)return t;n=n.parent}return t}has(e){return void 0!==this.get(e)}set(e,t){return this.vars[e]=t,t}getroot(e,t){return this.root.vars[e]||t}setroot(e,t){return this.root.vars[e]=t,t}from_import(e,t){for(const n of Object.keys(e))void 0!==t&&-1===t.indexOf(n)||(this.vars[n]=e[n])}setModule(e,t){this.set(e,new Vt("undefined",new Bt(t)))}isModule(e){const t=this.get(e);return void 0!==t&&"undefined"===t.code&&t.ty instanceof Bt}getModule(e,t){const n=this.get(e);if(void 0!==n&&"undefined"===n.code&&n.ty instanceof Bt){return n.ty.options[t]}}inferSymbolType(e){var t=Yt[e];if(void 0===t){if(void 0===this.get(e))return}return t}perror(e,t){const n=this.root.vars["@logs"];if(void 0===t.type&&(t.type="error"),void 0===t.pos){const n=e.begin();t.pos=n[0],t.row=n[1],t.col=n[2]}void 0===t.len&&(t.len=e.epos-e.spos),n.push(t)}trace(e){const t=this.getroot("@trace"),n=t.length,r=e.begin();return t.push([r[0],r[1],r[2],e.epos-e.spos]),",".concat(n)}setInLoop(){return this.set("@inloop",!0),!0}inLoop(){return!0===this.get("@inloop")}setFunc(e){return this.set("@func",e),e}inFunc(){return void 0!==this.get("@func")}foundFunc(e,t){if(t.isMatter){const t=this.get("@func");if(void 0!==t)t.isMatter=!0;else{const t=rn(e.inputs,e.spos,{type:"",key:""});this.setroot("@yeild",t.row)}}}isUtf8Name(e){for(var t=0;t<e.length;t+=1)if(e.charCodeAt(t)>128)return!0;return!1}local(e){if(this.isUtf8Name(e)){const n=this.getroot("@utf8map");if(void 0===n)return this.setroot("@utf8map",{}),this.local(e);var t=n[name];if(void 0===t){const e=Object.keys(n).length;t="_v".concat(e),n[name]=t}return t}return e}declVar(e,t){var n=this.inFunc()||this.inLoop()?this.local(e):"vars['".concat(e,"']");const r=new Vt(n,t);return r.isMutable=!0,this.set(e,r)}emitAutoYield(e){const t=this.getroot("@yeild");void 0===t||this.inFunc()?e.push("\n"):(e.push("; yield ".concat(t,";\n")),this.setroot("@yeild",void 0))}}class on{constructor(){}}const an=e=>e instanceof je?e.subs():[];class cn{constructor(){}conv(e,t,n){try{return this[t.tag](e,t,n)}catch(r){if(r instanceof on)throw r;if(void 0===this[t.tag])return e.perror(t,{type:"error",key:"UndefinedParseTree",subject:t.toString()}),this.skip(e,t,n);throw r}}skip(e,t,n){throw new on}check(e,t,n,r,s){const o=this.conv(t,n,r);return void 0!==e?e.accept(o,!0)?o:(void 0===s&&(s={key:"TypeError",subject:e.toString()}),s.request=e,s.given=o,t.perror(n,s),this.skip(t,n,r)):o}checkBinary(e,t,n,r,s,o,i,a){return"=="===n||"!="===n?(a.push("".concat(s," ").concat(n,"= ").concat(i)),_t):(r=r.realType(),o=o.realType(),"+"===n?Et.accept(r,!1)&&Et.accept(o,!1)?(a.push("(".concat(s," + ").concat(i,")")),Et):r.accept(o,!0)?(a.push("lib.anyAdd(".concat(s,",").concat(i,")")),r):(e.perror(t,{key:"BinaryTypeError",subject:n,request:r,given:o}),this.skip(e,t,a)):"*"===n?Et.accept(r,!1)&&Et.accept(o,!1)?(a.push("(".concat(s," * ").concat(i,")")),Et):(a.push("lib.anyMul(".concat(s,",").concat(i,")")),r===Et||At.accept(o,!1)?o:(o===Et||At.accept(r,!1),r)):"//"===n?(a.push("((".concat(s,"/").concat(i,")|0)")),Et):"**"===n?(a.push("Math.pow(".concat(s,",").concat(i,")")),Et):r.accept(o,!0)?(a.push("(".concat(s," ").concat(n," ").concat(i,")")),en[n]===Jt?_t:r):(e.perror(t,{key:"BinaryTypeError",subject:n,request:r,given:o}),this.skip(e,t,a)))}err(e,t,n){return e.perror(t,{type:"error",key:"SyntaxError"}),vt}FromDecl(e,t,n){const r=t.tokenize("name"),s=Gt[r];return void 0===s?(e.perror(t.get("name"),{type:"warning",key:"UnknownPackageName"}),vt):(e.from_import(s),vt)}ImportDecl(e,t,n){const r=t.tokenize("name"),s=t.tokenize("alias",r),o=Gt[r];return void 0===o?(e.perror(t.get("name"),{type:"warning",key:"UnknownPackageName"}),vt):(e.setModule(s,o),vt)}Source(e,t,n){for(const s of an(t))try{const t=[];t.push(e.get("@indent")),this.conv(e,s,t),e.emitAutoYield(t),n.push(t.join(""))}catch(r){if(!(r instanceof on))throw r}return vt}Block(e,t,n){const r=e.get("@indent"),s=lt+r,o=new sn(e);o.set("@indent",s),n.push("{\n");for(const i of an(t))n.push(o.get("@indent")),this.conv(o,i,n),o.emitAutoYield(n);return n.push(r+"}"),vt}IfExpr(e,t,n){n.push("(("),this.check(_t,e,t.cond,n),n.push(") ? (");const r=this.conv(e,t.then,n);return n.push(") : ("),this.check(r,e,t.else,n),n.push("))"),r}IfStmt(e,t,n){if(n.push("if ("),this.check(_t,e,t.cond,n),n.push(") "),this.conv(e,t.then,n),void 0!==t.elif)for(const r of an(t.elif))this.conv(e,r,n);return void 0!==t.else&&(n.push("else "),this.conv(e,t.else,n)),vt}ElifStmt(e,t,n){return n.push("else if ("),this.check(_t,e,t.cond,n),n.push(") "),this.conv(e,t.then,n),vt}ForStmt(e,t,n){const r=t.each.tokenize(),s=new Rt(e,t.each);n.push("for (let ".concat(r," of ")),this.check(new mt(s),e,t.list,n),n.push(")");const o=new sn(e);return o.setInLoop(),o.declVar(r,s),this.conv(o,t.body,n),vt}FuncDecl(e,t,n){const r=t.tokenize("name"),s=[new Rt(e,t.name)],o=[],i=new sn(e),a=i.setFunc({name:r,return:s[0],hasReturn:!1,isMatter:!1});for(const p of an(t.params)){const t=p.tokenize("name"),n=new Rt(e,p.name),r=i.declVar(t,n);o.push(r.code),s.push(n)}const c=new ft(...s),l=e.declVar(r,c),u=l.isGlobal()?"":"var ";return n.push("".concat(u).concat(l.code," = (").concat(o.join(", "),") => ")),this.conv(i,t.body,n),l.isMatter=a.isMatter,a.hasReturn||s[0].accept(vt,!0),console.log("DEFINED ".concat(r," :: ").concat(c)),vt}FuncExpr(e,t,n){const r=[new Rt(e,t)],s=[],o=new sn(e),i=o.setFunc({return:r[0],hasReturn:!1});for(const c of an(t.params)){const t=c.tokenize("name"),n=new Rt(e,c.name),i=o.declVar(t,n);s.push(i.code),r.push(n)}const a=new ft(...r);return n.push("(".concat(s.join(", "),") => ")),this.conv(o,t.body,n),i.hasReturn||r[0].accept(vt,!0),a}Return(e,t,n){if(!e.inFunc())return e.perror(t,{type:"warning",key:"OnlyInFunction",subject:"return"}),vt;const r=e.get("@func");return r.hasReturn=!0,void 0!==t.expr?(n.push("return "),this.check(r.return,e,t.expr,n)):n.push("return"),vt}Continue(e,t,n){return e.inLoop()?(n.push("continue"),vt):(e.perror(t,{type:"warning",key:"OnlyInLoop",subject:"continue"}),vt)}Break(e,t,n){return e.inLoop()?(n.push("break"),vt):(e.perror(t,{type:"warning",key:"OnlyInLoop",subject:"break"}),vt)}Pass(e,t,n){return vt}VarDecl(e,t,n){const r=t.left;if("Name"===r.tag){const o=r.tokenize();var s=e.get(o);if(void 0===s||e.inFunc()&&s.isGlobal()){const i=new Rt(e,r),a=[];this.check(i,e,t.right,a);const c=(s=e.declVar(o,i)).isGlobal()?"":"var ";return n.push("".concat(c).concat(s.code," = ").concat(a.join(""))),vt}}t.left.tag="Set".concat(t.left.tag);const o=this.conv(e,t.left,n);return n.push(" = "),this.check(o,e,t.right,n),vt}Name(e,t,n){const r=t.tokenize(),s=e.get(r);return void 0===s?(e.perror(t,{type:"error",key:"UndefinedName",subject:r}),this.skip(e,t,n)):(n.push(s.code),s.ty)}SetName(e,t,n){const r=t.tokenize(),s=e.get(r);return void 0===s?(e.perror(t,{type:"error",key:"UndefinedName",subject:r}),this.skip(e,t,n)):s.isMutable?(n.push(s.code),s.ty):(e.perror(t,{type:"error",key:"Immutable",subject:r}),this.skip(e,t,n))}And(e,t,n){return this.check(_t,e,t.left,n),n.push(" && "),this.check(_t,e,t.right,n),_t}Or(e,t,n){return this.check(_t,e,t.left,n),n.push(" || "),this.check(_t,e,t.right,n),_t}Not(e,t,n){return n.push("!("),this.check(_t,e,t[0],n),n.push(")"),_t}Infix(e,t,n){const r=Qt(t.tokenize("name")),s=[],o=[],i=this.check(tn(r),e,t.left,s),a=this.check(nn(r,i),e,t.right,o);return this.checkBinary(e,t,r,i,s.join(""),a,o.join(""),n)}Unary(e,t,n){const r=t.tokenize("name");return"!"===r||"not"===r?(n.push("".concat(r,"(")),this.check(_t,e,t.expr,n),n.push(")"),_t):(n.push("".concat(r,"(")),this.check(Et,e,t.expr,n),n.push(")"),Et)}ApplyExpr(e,t,n){const r=t.tokenize("name"),s=e.get(r);if(void 0===s){const s=Xt[r];if(void 0!==s)return console.log("importing ".concat(s," ...")),e.from_import(Gt[s]),e.perror(t.name,{type:"info",key:"InferredPackage",subject:s,code:"from ".concat(s," import *")}),this.ApplySymbolExpr(e,t,e.get(r),void 0,n)}return this.ApplySymbolExpr(e,t,s,void 0,n)}ApplySymbolExpr(e,t,n,r,s){if(void 0===n)return e.perror(t.name,{type:"error",key:"UnknownName",subject:t.name.tokenize()}),this.skip(e,t,s);s.push(n.code),s.push("(");const o=t.params.subs();void 0!==r&&o.unshift(r);var i=n.ty;if(!(i instanceof ft))return e.perror(t.name,{type:"error",key:"NotFunction",subject:t.name.tokenize()}),this.skip(e,t,s);i.hasAlpha()&&(i=i.toVarType({env:e,ref:t}));for(var a=0;a<o.length;a+=1){if(!(a<i.psize())){e.perror(o[a],{type:"warning",key:"TooManyArguments",subject:o[a]});break}a>0&&s.push(",");const t=i.ptype(a);this.check(t,e,o[a],s)}return o.length<i.psize()&&(i.ptype(o.length)||e.perror(t.name,rn(t.inputs,t.params.epos,{type:"error",key:"RequiredArguments"}))),s.push(")"),e.foundFunc(t,n),i.rtype()}MethodExpr(e,t,n){const r=t.tokenize("recv");if(e.isModule(r)){const s=e.getModule(r,t.tokenize("name"));return this.ApplySymbolExpr(e,t,s,void 0,n)}const s=".".concat(t.tokenize("name")),o=e.get(s);return this.ApplySymbolExpr(e,t,o,t.recv,n)}SelfAssign(e,t,n){const r=t.left.tag;return t.left.tag="Set".concat(r),this.conv(e,t.left,n),n.push(" = "),t.left.tag=r,this.Infix(e,t,n),vt}GetExpr(e,t,n){const r=t.tokenize("recv");if(e.isModule(r)){const s=e.getModule(r,t.tokenize("name"));return n.push(s.code),s.ty}n.push("lib.get("),this.check(Lt,e,t.recv,n);const s=t.tokenize("name"),o=e.inferSymbolType(s);if(void 0===o)return e.perror(t.name,{key:"UnknownName",subject:s}),this.skip(e,t,n);const i=Zt(o);return n.push(",'".concat(s,"',").concat(i).concat(e.trace(t.name),")")),o}SetGetExpr(e,t,n){const r=t.tokenize("recv");if(e.isModule(r))return e.perror(t,{type:"error",key:"Immutable",subject:t.tokenize()}),this.skip(e,t,n);const s=t.tokenize("name");this.check(Lt,e,t.recv,n),n.push(".".concat(s));const o=Yt[s]||new Rt(e,t.name);return o instanceof yt?o.ptype(0):o}IndexExpr(e,t,n){n.push("lib.index(");const r=this.check(bt(new mt(new Rt(e,t)),Tt),e,t.recv,n);return n.push(","),this.check(Et,e,t.index,n),n.push("".concat(e.trace(t.index),")")),r instanceof mt?r.ptype(0):r}SetIndexExpr(e,t,n){const r=this.check(At,e,t.recv,n);return n.push("["),this.check(Et,e,t.index,n),n.push("]"),r instanceof mt?r.ptype(0):r}Slice(e,t,n){n.push("lib.slice(");const r=this.check(Pt,e,t.recv,n);n.push(",");const s=t.left;void 0===s?n.push("0"):this.check(Et,e,s,n),n.push(",");const o=t.right;return void 0===o?n.push("undefined"):this.check(Et,e,o,n),n.push("".concat(e.trace(t),")")),r}Data(e,t,n){n.push("{");for(const r of an(t))this.conv(e,r,n),n.push(",");return n.push("}"),zt}KeyValue(e,t,n){const r=t.tokenize("name");if("Name"===t.name.tag){n.push("'".concat(r,"': "));const s=e.inferSymbolType(r);return void 0===s&&e.perror(t.name,{type:"warning",key:"UnknownName",subject:r,fix:"EncloseQuote"}),this.check(s,e,t.value,n),s}return n.push("".concat(r,": ")),this.conv(e,t.value,n),vt}Tuple(e,t,n){const r=an(t);if(r.length>2)return e.perror(t,{type:"warning",key:"SyntaxError",fix:"EncloseBrace"}),this.List(e,t,n);if(1==r.length){n.push("(");const t=this.conv(e,r[0],n);return n.push(")"),t}return n.push("lib.vec("),this.check(Et,e,r[0],n),n.push(","),this.check(Et,e,r[1],n),n.push(")"),jt}List(e,t,n){var r=new Rt(e,t);n.push("[");for(const s of an(t))r=this.check(r,e,s,n,{type:"error",key:"AllTypeAsSame"}),n.push(",");return n.push("]"),new mt(r)}Format(e,t,n){var r=0;n.push("(");for(const s of an(t)){if(r>0&&n.push("+"),"StringPart"===s.tag)n.push("'".concat(s.tokenize(),"'"));else{const t=[];this.conv(e,s,t)===Tt?n.push(t.join("")):n.push("lib.str(".concat(t.join(""),")"))}r++}return n.push(")"),Tt}TrueExpr(e,t,n){return n.push("true"),_t}FalseExpr(e,t,n){return n.push("false"),_t}Int(e,t,n){return n.push(t.tokenize()),Et}Float(e,t,n){return n.push(t.tokenize()),St}Double(e,t,n){return n.push(t.tokenize()),St}String(e,t,n){return n.push(t.tokenize()),Tt}Char(e,t,n){return n.push(t.tokenize()),Tt}MultiString(e,t,n){return n.push(JSON.stringify(JSON.parse(t.tokenize()))),Tt}}const ln=it("Source"),un=e=>{const t=ln(e),n=new sn;n.from_import(Kt);const r=[];return(new cn).conv(n,t,r),console.log(n.get("@logs")),r.join("")},pn=e=>{const t=ln(e.source),n=new sn;n.from_import(Kt);const r=[];(new cn).conv(n,t,r);const s=r.join(""),o="\nreturn {\n  main: async function*(puppy) {\n\tconst lib = puppy.lib;\n\tconst vars = puppy.vars;\n".concat(s,"\n  },\n}");var i={};try{i=new Function(o)()}catch(a){n.perror(t,{type:"error",key:"CompileError",subject:a.toString()})}return i.world={},i.tree=t,i.code=s,i.errors=n.get("@logs"),i};console.log(un('\nfrom matterjs import *\nWorld(1600, 900, background="white")\n\nRectangle(800, 900, width=1600, height=100, isStatic=true)\nfor x in range(100, 701, 100):\n  Rectangle(x*1.5, 100, width=40, height=300)\n\nRectangle(100, 200, width=200, height=200)\n')),console.log(un("\n{\n  'hoge': 1,\n  hogo: 2\n}\n")),console.log(un("\nv = (1,2)\n"));const dn=(e,t)=>{let n=0;const r=[];for(const s of t.errors)"error"===s.type&&(n+=1),"info"!==s.type&&r.push(s);return e((e=>({type:E.SET_MARKER,payload:{markers:e.map(e=>({severity:N(e.type),startLineNumber:e.row+1,startColumn:e.col,endLineNumber:e.row+1,endColumn:e.col+e.len,message:g[e.key](e)}))}}))(r)),0===n?(e(x("vs")),!1):(e(x("error")),!0)};let hn=null;const fn=e=>(t,n,r,s=!1,o=!1)=>{const i=pn({source:n});return console.log(i),dn(e,i)||(hn&&hn.dispose(),hn=((e,t,n,r=!1)=>{if(null!=e&&!n&&t&&e.isRunning(),t){null!=e&&e.dispose();const n=new Se(Ne,t,r);return n.runCode(),n}return null})(t,i,r,s),e((e=>({type:M.SET_PUPPY,payload:{puppy:e}}))(hn))),hn},mn=e=>fetch(e,{method:"GET"}).then(e=>{if(e.ok)return e.text();throw new Error(e.statusText)}).then(e=>e),yn=e=>t=>mn("".concat("/LIVE2019","/course/").concat(t,"/setting.json")).then(e=>JSON.parse(e)).then(t=>{e(P(t))}).catch(e=>{console.log("ERR ".concat(e))}),bn=e=>(t,n)=>mn("".concat("/LIVE2019","/course/").concat(t,"/").concat(n,"/index.md")).then(t=>e(A(t))),gn=e=>(t,n,r,s)=>{const o=window.sessionStorage.getItem("".concat("/LIVE2019","/course/").concat(n,"/").concat(s,"/sample.py"));o?(e(w(o)),fn(e)(t,o,!1)):mn("".concat("/LIVE2019","/course/").concat(n,"/").concat(s,"/sample.py")).then(n=>{e(w(n)),fn(e)(t,n,!1)})},vn=async e=>{return Le.dispatch(q(!0)),Le.dispatch((e=>({type:z.SET_PLACEHOLDER,payload:{placeholder:e}}))(e)),await(e=>new Promise(t=>{e.addEventListener("submit",t,{once:!0})}))(document.getElementById("puppy-input-form")),Le.getState().input.value},_n=()=>Le.getState().puppy.isLive,En=()=>Le.dispatch(B(!0)),wn=()=>{const e=Le.getState().editor.diffStartLineNumber;return null===e?0:e},Sn=(e,t)=>{const n=Le.getState().editor.codeEditor,r=Le.getState().editor.decoration;Le.dispatch(S(n.deltaDecorations(r,[{range:new b.Range(e,1,t,1),options:{isWholeLine:!0,className:"code-highlight"}}])))},Nn=()=>{const e=Le.getState().editor.codeEditor,t=Le.getState().editor.decoration;Le.dispatch(S(e.deltaDecorations(t,[])))},xn=e=>()=>{const t={},n=[];["Puppy","PuppyCourse","LIVE2019"].forEach(e=>{n.push(mn("".concat("/LIVE2019","/course/").concat(e,"/setting.json")).then(e=>JSON.parse(e)).then(n=>{t[e]=n}))}),Promise.all(n).then(()=>e((e=>({type:O.SET_COURSES,payload:{courses:e}}))(t)))};var Tn=Object(a.b)(e=>({course:e.course.course,courses:e.course.courses}),e=>({fetchCourses:xn(e),setShow:t=>e(ke(t))}))(m),On=n(304),kn=n.n(On),In=(n(410),n(303)),Cn=n(437),An=n(130),Pn=n(120),Ln="/Users/shonanking/lab/project/LIVE2019/src/components/Editor/Editor.tsx";b.editor.defineTheme("error",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#ffEEEE"}}),b.languages.registerCompletionItemProvider("python",{provideCompletionItems:(e,t,n,r)=>{const s=e.getWordUntilPosition(t),o=new b.Range(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn),i=[];return["pi","sin","cos","tan","sqrt","log","log10","pow","hypot","gcd"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Function,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["input","print","len","range","int","float","str"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Function,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["random"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Function,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["World","Circle","Rectangle","Polygon","Label"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Constructor,insertText:"".concat(e,"(${1})"),insertTextRules:b.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o})}),["width","height","isStatic","restitution","fillStyle","image","strokeStyle","lineWidth"].map(e=>{i.push({label:e,kind:b.languages.CompletionItemKind.Property,insertText:"".concat(e,"="),range:o})}),{suggestions:i}}});const jn=e=>{return s.a.createElement("div",{id:"editor-footer",__source:{fileName:Ln,lineNumber:180},__self:void 0},s.a.createElement(In.a,{onClick:()=>e.setIsLive(!e.isLive),__source:{fileName:Ln,lineNumber:181},__self:void 0},e.isLive?s.a.createElement(Cn.a,{animation:"grow",variant:"light",size:"sm",__source:{fileName:Ln,lineNumber:183},__self:void 0}):s.a.createElement(An.a,{icon:Pn.h,__source:{fileName:Ln,lineNumber:185},__self:void 0})," LIVE"),s.a.createElement(In.a,{onClick:()=>{e.setFontSize(e.fontSize+3)},__source:{fileName:Ln,lineNumber:189},__self:void 0},s.a.createElement(An.a,{icon:Pn.i,__source:{fileName:Ln,lineNumber:190},__self:void 0})),s.a.createElement(In.a,{onClick:()=>{e.setFontSize(Math.max(12,e.fontSize-3))},__source:{fileName:Ln,lineNumber:192},__self:void 0},s.a.createElement(An.a,{icon:Pn.g,__source:{fileName:Ln,lineNumber:193},__self:void 0})))};let Mn,Fn,Dn;var Rn=e=>{const t={selectOnLineNumbers:!0,fontSize:e.fontSize,wordWrap:"on",lightbulb:{enabled:!0}};addEventListener("resize",()=>{clearTimeout(Mn),Mn=setTimeout(function(){e.setSize(document.getElementById("right-col").clientWidth,document.getElementById("right-col").clientHeight)},300)}),Object(r.useEffect)(()=>{e.setSize(document.getElementById("right-col").clientWidth,document.getElementById("right-col").clientHeight)},[]);"piyo".startsWith("hoge");return s.a.createElement("div",{id:"puppy-editor",__source:{fileName:Ln,lineNumber:329},__self:void 0},s.a.createElement(kn.a,{width:e.width,height:e.height,language:"python",theme:e.theme,value:e.code,options:t,onChange:(t,n)=>{let r=e.diffStartLineNumber;n.changes.map(e=>{r=null===r?e.range.startLineNumber:Math.min(r,e.range.startLineNumber)}),null!==r&&e.setDiffStartLineNumber(r),e.setCode(t),e.codeEditor&&(t=>{const n=t.getModel().findMatches("[\uff01\u3000\u201d\uff03\uff04\uff05\uff06\u2019\uff08\uff09\uff0a\uff0b\uff0c\uff0d\uff0e\uff0f\uff1a\uff1b\uff1c\uff1d\uff1e\uff1f\uff20\uff3b\uff3c\uffe5\uff3d\uff3e\uff3f\u2018\uff5b\uff5c\uff5d\uff5e\uffe3\uff21\uff22\uff23\uff24\uff25\uff26\uff27\uff28\uff29\uff2a\uff2b\uff2c\uff2d\uff2e\uff2f\uff30\uff31\uff32\uff33\uff34\uff35\uff36\uff37\uff38\uff39\uff3a\uff41\uff42\uff43\uff44\uff45\uff46\uff47\uff48\uff49\uff4a\uff4b\uff4c\uff4d\uff4e\uff4f\uff50\uff51\uff52\uff53\uff54\uff55\uff56\uff57\uff58\uff59\uff5a\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19\uff10\uff61\uff62\uff63\uff64\uff65\uff66\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff71\uff72\uff73\uff74\uff75\uff76\uff77\uff78\uff79\uff7a\uff7b\uff7c\uff7d\uff7e\uff7f\uff80\uff81\uff82\uff83\uff84\uff85\uff86\uff87\uff88\uff89\uff8a\uff8b\uff8c\uff8d\uff89\uff8f\uff90\uff91\uff92\uff93\uff94\uff95\uff96\uff97\uff98\uff99\uff9a\uff9b\uff9c\uff9d\uff9e\uff9f]",!0,!0,!1,null,!1).map(e=>({range:e.range,options:{inlineClassName:"zenkakuClass"}}));e.setDecoration(t.deltaDecorations(e.decoration,n))})(e.codeEditor),e.isLive&&(Fn&&(clearTimeout(Fn),Fn=null),Fn=setTimeout(()=>{(t=>{Dn&&(clearTimeout(Dn),Dn=null),Dn=setTimeout(()=>{t&&t.start(),e.setDiffStartLineNumber(null)},1500)})(e.trancepile(e.puppy,t,!1,!0,!0)),window.sessionStorage.setItem("/api/sample/".concat(e.coursePath,"/").concat(e.page),t)},300))},editorDidMount:t=>{e.setCodeEditor(t)},__source:{fileName:Ln,lineNumber:330},__self:void 0}),s.a.createElement(jn,{setFontSize:e.setFontSize,fontSize:e.fontSize,setIsLive:e.setIsLive,isLive:e.isLive,__source:{fileName:Ln,lineNumber:340},__self:void 0}))};var Bn=Object(a.b)((e,t)=>({width:e.editor.width,height:e.editor.height,codeEditor:e.editor.codeEditor,decoration:e.editor.decoration,theme:e.editor.theme,fontSize:e.editor.fontSize,code:e.editor.code,diffStartLineNumber:e.editor.diffStartLineNumber,puppy:e.puppy.puppy,isLive:e.puppy.isLive,coursePath:t.coursePath,page:t.page}),e=>({setCode:t=>e(w(t)),setSize:(t,n)=>e(((e,t)=>({type:E.SET_SIZE,payload:{width:e,height:t}}))(t,n)),setCodeEditor:t=>e((e=>({type:E.SET_CODEEDITOR,payload:{codeEditor:e}}))(t)),setDecoration:t=>e(S(t)),setFontSize:t=>e((e=>({type:E.SET_FONTSIZE,payload:{value:e}}))(t)),setDiffStartLineNumber:t=>e((e=>({type:E.SET_DIFFSTARTLINENUMBER,payload:{startLineNumber:e}}))(t)),setIsLive:t=>e((e=>({type:M.SET_ISLIVE,payload:{isLive:e}}))(t)),trancepile:fn(e)}))(Rn),Vn=(n(411),n(446)),zn="/Users/shonanking/lab/project/LIVE2019/src/components/PuppyScreen/PuppyScreen.tsx";const Wn=e=>{return s.a.createElement("div",{id:"puppy-footer",__source:{fileName:zn,lineNumber:45},__self:void 0},s.a.createElement(In.a,{onClick:()=>e.trancepile(e.puppy,e.code,!0),__source:{fileName:zn,lineNumber:46},__self:void 0},s.a.createElement(An.a,{icon:Pn.h,__source:{fileName:zn,lineNumber:47},__self:void 0})," Play"),s.a.createElement(In.a,{onClick:()=>{if(null!=e.puppy){const t=e.puppy.getCanvas();if(t)if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.msRequestFullscreen)t.msRequestFullscreen();else{if(!t.requestFullscreen)return;t.requestFullscreen()}}},__source:{fileName:zn,lineNumber:50},__self:void 0},s.a.createElement(An.a,{icon:Pn.f,__source:{fileName:zn,lineNumber:51},__self:void 0})),s.a.createElement(In.a,{onClick:()=>e.setIsCourseVisible(!e.isCourseVisible),__source:{fileName:zn,lineNumber:53},__self:void 0},s.a.createElement(An.a,{icon:e.isCourseVisible?Pn.c:Pn.b,__source:{fileName:zn,lineNumber:54},__self:void 0})))};let Un=null;var Hn=e=>{addEventListener("resize",()=>{Un&&(clearTimeout(Un),Un=null),Un=setTimeout(function(){const t=document.getElementById("puppy-screen").clientWidth,n=document.getElementById("puppy-screen").clientHeight;e.setSize(t,n)},300)});return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"puppy-screen",onClick:()=>e.setIsCourseVisible(!1),__source:{fileName:zn,lineNumber:90},__self:void 0}),s.a.createElement(Vn.a,{in:e.showTLIcon,timeout:{enter:0,exit:500},className:"time-leap",unmountOnExit:!0,onEntered:()=>e.setShowTLIcon(!1),__source:{fileName:zn,lineNumber:94},__self:void 0},s.a.createElement("div",{style:{background:(e=>e&&e.world?e.world.colorScheme[0]:"gray")(e.puppy)},__source:{fileName:zn,lineNumber:104},__self:void 0},s.a.createElement(An.a,{icon:Pn.a,__source:{fileName:zn,lineNumber:105},__self:void 0}))),s.a.createElement(Wn,{isCourseVisible:e.isCourseVisible,setIsCourseVisible:e.setIsCourseVisible,code:e.code,puppy:e.puppy,trancepile:e.trancepile,__source:{fileName:zn,lineNumber:108},__self:void 0}))};var qn=Object(a.b)(e=>({isCourseVisible:e.course.visible,code:e.editor.code,puppy:e.puppy.puppy,showTLIcon:e.puppy.showTLIcon}),e=>({setIsCourseVisible:t=>e(L(t)),setSize:(t,n)=>e(((e,t)=>({type:M.SET_SIZE,payload:{width:e,height:t}}))(t,n)),setShowTLIcon:t=>e(B(t)),trancepile:fn(e)}))(Hn),Kn=n(305),Gn=n(447),Xn=(n(412),n(413),"/Users/shonanking/lab/project/LIVE2019/src/components/Course/Course.tsx");var Yn=e=>(Object(r.useEffect)(()=>{0!==e.course.list.length&&(e.fetchContent(e.coursePath,e.course.list[e.page].path),e.fetchSample(e.puppy,e.coursePath,e.page,e.course.list[e.page].path))},[e.page,e.coursePath,e.course]),Object(r.useEffect)(()=>{e.fetchSetting(e.coursePath)},[e.coursePath]),s.a.createElement("div",{id:"puppy-course",style:{visibility:e.visible?"visible":"hidden"},__source:{fileName:Xn,lineNumber:57},__self:void 0},s.a.createElement(Gn.a,{className:"course-all",__source:{fileName:Xn,lineNumber:61},__self:void 0},s.a.createElement(Gn.a.Header,{className:"course-header",__source:{fileName:Xn,lineNumber:62},__self:void 0},s.a.createElement(l.a,{__source:{fileName:Xn,lineNumber:71},__self:void 0},s.a.createElement(u.a,{className:"card-header-left",xs:6,__source:{fileName:Xn,lineNumber:72},__self:void 0},e.course.list&&0!==e.course.list.length&&0!==e.page?s.a.createElement("a",{href:"#".concat(e.page-1),__source:{fileName:Xn,lineNumber:76},__self:void 0},s.a.createElement(An.a,{icon:Pn.d,__source:{fileName:Xn,lineNumber:77},__self:void 0})," ".concat(e.course.list[e.page-1].title)):null),s.a.createElement(u.a,{className:"card-header-right",xs:6,__source:{fileName:Xn,lineNumber:82},__self:void 0},e.course.list&&0!==e.course.list.length&&e.page!==e.course.list.length-1?s.a.createElement("a",{href:"#".concat(e.page+1),__source:{fileName:Xn,lineNumber:86},__self:void 0},"".concat(e.course.list[e.page+1].title," "),s.a.createElement(An.a,{icon:Pn.e,__source:{fileName:Xn,lineNumber:88},__self:void 0})):null))),s.a.createElement(Gn.a.Body,{className:"course-body",__source:{fileName:Xn,lineNumber:94},__self:void 0},s.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:Kn(e.content)},__source:{fileName:Xn,lineNumber:95},__self:void 0})))));var Zn=Object(a.b)((e,t)=>({course:e.course.course,puppy:e.puppy.puppy,coursePath:t.coursePath,page:t.page,content:e.course.content,visible:e.course.visible}),e=>({setContent:t=>e(A(t)),setCourse:t=>e(P(t)),setCode:t=>e(w(t)),setVisible:t=>e(L(t)),fetchContent:bn(e),fetchSample:gn(e),fetchSetting:yn(e)}))(Yn),Jn=n(441),$n=n(442),Qn=n(439),er=n(308),tr="/Users/shonanking/lab/project/LIVE2019/src/components/Input/Input.tsx";var nr=e=>s.a.createElement(Jn.a,{size:"lg",show:e.show,centered:!0,__source:{fileName:tr,lineNumber:19},__self:void 0},s.a.createElement(Jn.a.Body,{__source:{fileName:tr,lineNumber:20},__self:void 0},s.a.createElement($n.a,{id:"puppy-input-form",onSubmit:()=>e.setShow(!1),__source:{fileName:tr,lineNumber:21},__self:void 0},s.a.createElement(Qn.a,{className:"mb-3",__source:{fileName:tr,lineNumber:22},__self:void 0},s.a.createElement(er.a,{placeholder:e.placeholder,value:e.value,onChange:t=>e.setValue(t.target.value),__source:{fileName:tr,lineNumber:23},__self:void 0}),s.a.createElement(Qn.a.Append,{__source:{fileName:tr,lineNumber:28},__self:void 0},s.a.createElement(In.a,{type:"submit",__source:{fileName:tr,lineNumber:29},__self:void 0},"\u9001\u4fe1\u3059\u308b"))))));var rr=Object(a.b)(e=>({show:e.input.show,value:e.input.value,placeholder:e.input.placeholder}),e=>({setShow:t=>e(q(t)),setValue:t=>e((e=>({type:z.SET_VALUE,payload:{value:e}}))(t))}))(nr),sr="/Users/shonanking/lab/project/LIVE2019/src/components/Version/Version.tsx";var or=e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(Jn.a,{show:e.show,onHide:()=>e.setShow(!1),__source:{fileName:sr,lineNumber:12},__self:void 0},s.a.createElement(Jn.a.Header,{closeButton:!0,__source:{fileName:sr,lineNumber:13},__self:void 0},s.a.createElement(Jn.a.Title,{__source:{fileName:sr,lineNumber:14},__self:void 0},"Modal heading")),s.a.createElement(Jn.a.Body,{__source:{fileName:sr,lineNumber:16},__self:void 0},"Woohoo, you're reading this text in a modal!"),s.a.createElement(Jn.a.Footer,{__source:{fileName:sr,lineNumber:19},__self:void 0},s.a.createElement(In.a,{variant:"secondary",onClick:()=>e.setShow(!1),__source:{fileName:sr,lineNumber:20},__self:void 0},"Close"),s.a.createElement(In.a,{variant:"primary",onClick:()=>e.setShow(!1),__source:{fileName:sr,lineNumber:23},__self:void 0},"Save Changes"))));var ir=Object(a.b)(e=>({show:e.version.show}),e=>({setShow:t=>e(ke(t))}))(or),ar="/Users/shonanking/lab/project/LIVE2019/src/App.tsx";var cr=e=>{const t=e.qs.course?e.qs.course:"LIVE2019",n=""!==e.hash?parseInt(e.hash.substr(1)):0;return s.a.createElement("div",{className:"App",__source:{fileName:ar,lineNumber:18},__self:void 0},s.a.createElement(c.a,{className:"container",__source:{fileName:ar,lineNumber:19},__self:void 0},s.a.createElement(Tn,{__source:{fileName:ar,lineNumber:20},__self:void 0}),s.a.createElement(rr,{__source:{fileName:ar,lineNumber:21},__self:void 0}),s.a.createElement(ir,{__source:{fileName:ar,lineNumber:22},__self:void 0}),s.a.createElement(l.a,{id:"main-row",__source:{fileName:ar,lineNumber:23},__self:void 0},s.a.createElement(u.a,{id:"left-col",xs:6,__source:{fileName:ar,lineNumber:24},__self:void 0},s.a.createElement(Zn,{coursePath:t,page:n,__source:{fileName:ar,lineNumber:25},__self:void 0}),s.a.createElement(qn,{__source:{fileName:ar,lineNumber:26},__self:void 0})),s.a.createElement(u.a,{id:"right-col",xs:6,__source:{fileName:ar,lineNumber:28},__self:void 0},s.a.createElement(Bn,{coursePath:t,page:n,__source:{fileName:ar,lineNumber:29},__self:void 0})))))},lr=n(309),ur=n(166),pr="/Users/shonanking/lab/project/LIVE2019/src/index.tsx";const dr=e=>e.substr(1).split("&").reduce((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e},{});i.a.render(s.a.createElement(a.a,{store:Pe,__source:{fileName:pr,lineNumber:24},__self:void 0},s.a.createElement(lr.a,{__source:{fileName:pr,lineNumber:25},__self:void 0},s.a.createElement(ur.a,{render:e=>s.a.createElement(cr,{qs:dr(e.location.search),hash:e.location.hash,__source:{fileName:pr,lineNumber:28},__self:void 0}),__source:{fileName:pr,lineNumber:26},__self:void 0}))),document.getElementById("root"))}},[[310,2,3]]]);
//# sourceMappingURL=main.f986cd6d.chunk.js.map